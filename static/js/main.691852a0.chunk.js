(this["webpackJsonpmusic-scholars-annotator"]=this["webpackJsonpmusic-scholars-annotator"]||[]).push([[0],{481:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQEAAAA1CAYAAABBcF7yAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAERVJREFUeNrsXWmMHEcVrh7fINnNjxAIItsOIIQ4dlaKkzg+dsY57MRRdvyHPyB2RgIUEGh3cwoRMTM/SEzsaHclRAQ5diYEhPjjseQoh4m313buiG0n4oyI286fhLOdPz4ST/FeT/VuT031NdM9M7uuJ5Wmp7vrelXvq/deHU2IJEmSJEmSJEmSJEmSJEmSJEmSJEmSLjlSlmKhzxa+pBKqpGldyRCaGiR1uKZK4eO/PaHLJpUkKRqt7PcCnrvjKhWwKk3qqQwI/SAKP6kTbQHC6FKFMkmSJAi00IXxz6gUhZymMgQFvp6CER4Enrr0Fur6lSRJ0tIFgQ/vu4yN8Aob4VMg/C6Bt4Ue/lBnmHcP+a3XUhmQJKmPQeCj4nrbhocAI3xqEIQerqm2IOCxjOxSNQhDt912G5pSaRaQhiFYEE6w/waGQ4cOmZJbEgTapvoDazONET7VsOFB4Kl7RFcUJrP+o3so6gBAQCBm4SeTBA9AiBSWRwl+ihGiWkwQTUrpHPzWnn76aauTsuzevVtTFCUPl6MQNI/XchxvDMi/CpeVqPkL+GoCPzYmBGotbejw3vUOPp+NmLSObQE8ONhJG0DeB3jeIk+hjIV+AYFUrMK/d1W6/uDqNGN4kahX5hRtm0Yu/1qL3PrJdNOFQhf+KzaAcPc70R0oTSx0kIcKIQMBhXYGwkkQ4vE2hV+FgCB0EtIrUhuMQ5cD23GS5V/qkK9au3UIqF+e8UrI+w7bGdPNudqg1A7/MQ1B2jl8tixBgCHe5IIcD36TkMFvkNSuvd7S7vXbBVOgT0FABAqTt9566yyE0B0H3k1DvHkm/J3mX4T05jHNDvhajFL+EPVTveqWQDu7eaBG6F95n/RyyxMEFDKwYGs65v7lX20Z0ZuFlkq7PhzhyDR7yy23BHZCeAe1iHkf1d9W0ZnK6w5+Km+a5Z9us/y2IMXFDEhrPKB+SVA6bBuwMo6286yvfAJ0f8qxpXTl7nqW3cMONgn/PyGIMg1CXgVZtu0v+uZT0NWOEXr2g4b8b9xCUoVDi+bDH/aR+uH9PqN7h/6C4EZCm3cu4DXejkbhqUbRNgRUDoi2AQLyme9saaae7gkAgBmPfE27jcDGfeaZZ0yP+BrLW+Q/wPKgEGQhvhGxzkjjEHfaK++wxMo45pNPmPJUIJwKaIOcgAfYBmjnZwPKmGag4QnqWI9OedENxyA29ASEEa4jWQgQAAR6k1px34dGwzG4piGo1ilC//cu3FCaBLf+2O1E2f1AO5pG8zoBZwqxTUyABqgEvbNr165hHgSeffbZUicgECY+5FtmplWeN7ngWQbS0AVxUFuY8XA2liHOVAieYPti+UqQnsipaQMBPMtCekZEECAMxLIdgndRAJBRQaAq4iFHEx48yMD9PMSv+OQ5FqJoY0y++tocQEYPohAwrcABgQL7bXYM/mwVre9dTQPt9au2EmXtBpdw0wT8BLGpnYE2ZxLxoYNZEArwfkWQRksH27lzJ6rbBwTvoqBmwwCAB1gNQRqWwKY9gHm24WvJQLxMu+2BcX1s7Ug+gbA8gHfLIh9HQLvzDkFsxxrvIFwKPgGVjYKmbZPuT5XYyJThzQa6b0VJIbRhZw5sJ8q2HxNlYNuCENtyfO4MoSeP22YBtU4TglpCi4w3+wgU8X3s2JVLYYHQc889JwLcnMcIqwo0Oc8RO6QQGGzk5v0FGok29cmXtV0q9qANSsxn0lR/ACTNA6hEptxBFvg0cn0NAqDuG+gLYP4AnTXAMFNjciD8sxDSDBTGQGJtsCAbBgjZ9AOCYNAk3u+9RepP3E7qj99OLj46Qup//F2YsdRg9huqTdl1j/1dWff434bWzfyl0AwOyTgVe6UJ8L4LPo2bb755AYjxWjDy4OhdgA5sxSAEuGZgj6Au45C3FqLOJj9lCPEiTxlCHNGUoJWkJuDXBmwaVfTuCF9G4GGNaQJ8eUf6XRMQAUOWjTCWy1FijzrKvR81bL23fk3IP094ju4+10zgqS3wa35+SlnzC3No7SPvFNb+8h9Ta3/1ti70EyxDc4BLQw+YhhwTPC8///zzRlx8gLT0sGqx4J2qAAiKN910U2i7Ht8VTAmaInMpIRAww4AAlFMTmQKMh5bAJMhH4UMvHIOtzNifoi71hjCfwRnbXHhoJaV1kMut9xNyJZgEEOzZAfO4l9MRAgW0UIzVD7+nE0mR6cYbb9QE5oF5+PDhqQSym2JaoOq2fZmPKIjwHfeqPWfKcCKkEI4risJrHWXS/WnCoHLmFKVlZKpyZkGej8O03b7XBBzb0AmjzAxAtc6t0mQpaAL0NzsJfWoXoe+/2Yir0IZKr5Dsyp/+V1n14H+GVu39d2HVQ/+aWrXv/Q4BgCbZqP2gCWR80hE9m06CFwAsFj/yojADEOWC6gxxdV6jwb7DQCwM0PHajg5pVpJ2DLrS0Dycrjzx5URANlw8rPFaBQPW/tME2GyACeq/ycwAy+0cgecWAwN8b1i556KCmoDt6T9zCoyF04TWFbLi/rNL2n/XjtDGGZ+l0bKw5IUXXtAd+1MQpZYgP6oM+N007M7Tq87oo4CfkwInYTYgT9GUYDksf5NqA95he8MNN+C6AB7UpgVp1TgepiGuBm1q9psmUCStc9Q8TTKNAEBhhaPqzXat9F2YQuy1JrBjx44ZwShU8xmhjCQ7E6RtCJxb6YA6D7O4Ihs+A3XM+NRfNCVYcYFg4poAlGFcoI2ZyAsunzFBHrWQTsaeaQMpNqqjl58XXkS0UeeZ4HmV2TfVhpOQZrrss2s2A5bZfGE2m1URADyA2D26pP1Gp4TIEPSVsDRBWqcbZwIGIzdZJHjFZWwEbVAirv0wvCbCEe+b0UWAfOTIEUPAw55NFa50dZy8wJEz6fNcI4tLS8usM1YbjbZ8zvxKwhwAAc/4RFGZeo2jn8hrPDU7O6v7pH+iCzyx/EDAj2cgABbUf5oTbg3ujUO9pjg+2VOCPADCe2aU9vF4ZzSgHexlwwL13gZBKENFUFbVxyEoMqvSHA9ykG6tVyBwgmkEaVwbwHwAOrP7TZ+OZbo6gAVyr4P8F5fT2X8J+QTaNZkMXdcn4rZ326jTCb+RK6hM0NFLmUyG35tQhHsVqJ8NMHAt2nCEz6ai1t/jnXyb1bdEPoyovhlm0vEaxkiS/pwgn8Ak98sza9IBCXt14P4UIl6FaQBZhuqAanS26z1SuWR2HlZIh2vuYwSBgRiS4acGm4TeY5fghAMSPSIcIIf4MgwPD2sCUKz4lRWemQKBz0NaXV8zsJKN+sIx29k5uNAwDb8AqlBZtnnIZPdt1Ui55yKYEBdJY/9At1WB5FYM9jI+43F5bm6uEjL9gS4wW+PytaLWGYSgBh1eJ81L0MfhnuPv4HcJGiIedGl2wGJ+mCkog0iwc4I8DoYo10EBeHR9zUCkxUIICq7FQm6yt2TSfSsoraeW1bEAPQQBHHUKR48eNQLSN7kRU+sCTzRBWSPXGd5DbWCeuz3DgE8N0BySBgGdCT9uNa9AO1g+6fOefQver4Uol2MSuOs61tcgAADgNhuGXOBQYiAwwjpEvlvHgjeySU7rSAIEjh071lTY7du348g6z3UGjfgf8uEFApkk+b1t2zZNAAJmOzxDgIP0Kpx9Lip/DXimxwwCWa80I/IjI+CHCvdpm+VKQ9w0lM3oGQi4VP4ys1kmXUhcZR0173rPUZcMkMW0olCVfuVbRIFAn9rZJb8AWdLaBwiDCQ1f5nwyyOcDbrD1oDlecCCtHHSipBxMGY8ydOIbyBH/8wEm+rj5RhNKs2sgkPJguOHqiA7KqWzmoOpS1yaY6mKx9xoqFK4YxH0Da9XkhV90HbMm0I3FQiC0U7jQh1+Es3Xr1lKQStnNhSce5/rp7fIM6o0Lj6Z9zgcowztmJ/yNY9mwiKBtvA4S7TTku4liIhBIk8W5asul6lkuNdVRQQfZr8ruZez4uJX49FFi/8ZA57+/UTv3vaty5+74XOncdz9fOvudL+TPfvuLWjeG/26uGMRltaJdelu2bPE81+/48eOGYIdbBuLEbhZAmnnBCkUdymB2wjOIX/LYpYcAMdUpf5MCAQYAagIgoAKvu7Z4SOQTGHQEn438ztmCGjtUxFH/LJeWUIF3J+i+1DzuCCRvPZm3zxeknQ3P5394ZQbSKBJcMEK5YX8Zzgy++OKLBjQ+mgVFrrPNXH/99dmXXnrJy0dQJtyqOzyhOCBOJIK07FOPBTvk4lq9N8HMn6Z7wBOrX9sL9xMI+LEnjC+H9yHwdWd7FWo9AQEUZo93NdY5daYtFBxfANtchB8VwU+JpTu10dk3CWcIbrGkSq8buqvxodOXQOBGSPNqsjTj/YRHnArEKXIOQue7AYU4AIA0FjipXH10ABk9Dp5BHWqQj+7yORiQdiUO/iaxoArKirzO8NOYUOZam+kZXJvnkO9xgXhUc8DfDF88VERlnWwSNQSmJZRDOLL8AeDOK1QAkVmFnz/1/AjJ8jEHAsyC8c2bN2cixslDnE6O8iIQHwV/Fv0TgvQn4uQZq0OWhT1x8TcJc8DjnMPpDtKr9so30MmhIo7vwIVe9lRd0XXdDjuK9odKQ3+BONnPFPdincDLL79sXHfddS1mAar8cH/olVdesQRxdI84ebiPbbQH4plRyoHx2OnFLT4JUIMLWM44eQbpmSTiBqheaQKircXAk07Ud3Tw8it2MY+ppEHA2UVIPRYBuWmWa6CG6389aEWoiWJYr3VUmAt3fUoDeR6XHyEhBAS2RMS79WYC4ohUaBTikyDUk9dee21gI+E78C7mMy8CAMwDBLZyqbYN8CZDWhdl1YAnbavuDAB5EEkzAO+KJpAl4Ta1tM754QzAegiXQVnfnSPkzOn2B2cFTADqNdL7XTfsseWiCbjVY9K6oi4HQpp79dVXax5AUIDntgYgeIzr8cfhucF8O2fYr6PRbWA2ud9HMyqQd6HbI28/aQIeB4wcjCFd0TLixNcMNG0gcq0IdLSDkutdi3gt6PgylPOTg0wwO/qsmBoSLLhfqn/syT9ZSXWyXh0qAsJmeBzuOXPNNdeoPvEKHvEW1h+gj4HN+c+y7xUU2b20T7xCEADEwbO4+RunTwD5LjrZGfhSiaEutV74BVIuFEN70r1lGCs1zA4UmW8RUBT8rx8h5PMjhDy8ohHenYunVBE/QqJ08ZCJbtNrr70mMgtUjy8N8fGyJJ5DRlBbGII0L1kTwCWootWNtZja2hKYc+qmTZsSXTPg7CIsCZ6dYmFAqFp+wPrWZWmhDNNF7SEKVRYdW82qv9KYE2g1AxRSWDfzZ72X6mbSqqiXWQCdI//6669XfDoV8mUjvkcaG1PSbQh/1S+PS9AcGBWkV42xPgcF8pbomgHP2QEEBnZugFgdwaXBCAQIAmvgtfMueV/8RmCkgq/e/5554a5PizzcIsIjzSbWPfHXSsKdbIJDfiti/App/XpNJAIhNK6++uohwQhkhoyPZahAGhqzOYddfgDVVS+DLB4iU3vjjTfMXvAsbv46n2Ljbhtt5lcmnOYJfIptEIK2qkE7ZVv7enLkO4fn+ipxK+FswOafNK5/v2PRFEDhh0DrigW/Q6kfXYjckS7ceUWO1JVJSlOa/TFTTLOeggbAXzvdabieWvfo2327mkySpKVCYUBgkjjbg0NBpS20Fghp1vlKcbt0fuyzaRB6DdJLQzBoPWWufeQdQzabJEm90QSMUDYlxS3FqYJy70dSWCVJWuogIACFHFk4T7CFUOinlbvrFclWSZKWKQi4wEAjzSumFjcRSZIkSZIkSZIkSZIkSZIkSZIkSZIkqe/p/wIMAMflv55Wc/6WAAAAAElFTkSuQmCC"},501:function(e,t,n){e.exports=n.p+"static/media/play-solid.f79fe6ae.svg"},503:function(e,t,n){e.exports=n.p+"static/media/arrow-to-left-regular.1bf90cef.svg"},504:function(e,t,n){e.exports=n.p+"static/media/arrow-to-right-regular.f0cdfa6a.svg"},505:function(e,t,n){e.exports=n.p+"static/media/search-minus-solid.bc6bab64.svg"},506:function(e,t,n){e.exports=n.p+"static/media/search-plus-solid.5485d017.svg"},569:function(e,t,n){e.exports=n(837)},577:function(e,t){},579:function(e,t){},589:function(e,t){},591:function(e,t){},616:function(e,t){},618:function(e,t){},619:function(e,t){},624:function(e,t){},626:function(e,t){},645:function(e,t){},657:function(e,t){},660:function(e,t){},718:function(e,t){},791:function(e,t,n){},794:function(e,t,n){},795:function(e,t,n){},837:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(30),o=n.n(i),s=n(122),l=n(274),c=n(534),u=n(70),d=n(477),f=n(90),m=n(478),p=n.n(m),h=n(962),g=n(965),v=n(116),b=n(485),y=n(51),w=n(950),E=n(481),A=n.n(E);function S(){var e=Object(r.useContext)(v.SessionContext).session,t=Object(y.h)(),n=Object(y.g)();return a.a.createElement(h.a,{bg:"light",expand:"xl"},a.a.createElement(h.a.Brand,{href:"#home"},a.a.createElement("img",{src:A.a,alt:"Trompa logo"}),"Music scholars annotation tool"),a.a.createElement(g.a,{className:"me-auto"},a.a.createElement(g.a.Link,{as:s.b,to:"/"},"Home"),a.a.createElement(g.a.Link,{as:s.b,to:"/new"},"New"),a.a.createElement(g.a.Link,{as:s.b,to:"/help"},"Help")),a.a.createElement(g.a,null,e.info.isLoggedIn?a.a.createElement(h.a.Text,{style:{display:"inline-flex",alignItems:"center"}},a.a.createElement(v.CombinedDataProvider,{datasetUrl:e.info.webId,thingUrl:e.info.webId},"Logged in:"," ",a.a.createElement(v.Text,{style:{marginLeft:".1vw"},property:b.a.name.iri.value})),"\u2003",a.a.createElement(v.LogoutButton,{onLogout:function(){n.go(0)}},a.a.createElement(w.a,{className:"logoutButton"},"Log out"))):a.a.createElement(v.LoginButton,{oidcIssuer:"https://trompa-solid.upf.edu",redirectUrl:window.location.origin+t.pathname+t.search+t.hash},a.a.createElement(w.a,{className:"loginButton"},"Log in"))))}var C,T,O,j=n(960),D=(n(755),n(17)),I=n(31),k=n(273),x=n(221),R=n(952),N=n(497),$=n(961),M=n(107),B=Object(M.a)(C||(C=Object(k.a)(['\n  fragment MusicCompositionFrag on MusicComposition {\n    identifier\n    contributor\n    name\n    source\n    title\n    composer {\n      name\n    }\n    workExample(filter: { encodingFormat: "application/mei+xml" }) {\n      ... on MediaObject {\n        identifier\n        source\n        contentUrl\n        encodingFormat\n      }\n    }\n  }\n']))),P=Object(M.a)(T||(T=Object(k.a)(["\n  ",'\n  query ($query: String!) {\n    allResults: ItemList(identifier: "e91489d7-a776-40dd-8abf-0c934922bd99") {\n      identifier\n      name\n      itemListElement(filter: { name_regexp: $query }) {\n        __typename\n        ...MusicCompositionFrag\n      }\n    }\n  }\n'])),B),U=function e(){Object(I.a)(this,e),this.name="MusicComposition"};U.filters=[],U.preprocessQuery=function(e){return"(?i).*".concat(e,".*")},U.searchAllQuery=P,U.searchQuery=Object(M.a)(O||(O=Object(k.a)(["\n    ",'\n    query ($filter: _ThingInterfaceFilter) {\n      results: ItemList(identifier: "e91489d7-a776-40dd-8abf-0c934922bd99") {\n        identifier\n        name\n        itemListElement(filter: $filter, first: 50) {\n          ...MusicCompositionFrag\n        }\n      }\n    }\n  '])),B),U.processSearchResult=function(e){return Array.isArray(e)&&e[0]?e[0].itemListElement:[]};var L=new x.a({searchTypes:[U]}),q=function(e,t,n){if("MusicComposition"===e){var r=null;return t.composer.length>0&&(r=t.composer[0].name),a.a.createElement(x.b,{variant:"default",type:"Composition",heading:r,title:t.name||t.title,source:t.source,onClick:function(){return n(t)}})}return a.a.createElement(x.b,{title:t.title,variant:"default",onClick:function(){return n(t)}})},F=[{name:"Mahler - Symphony No. 4 (Piano 4 hands version)",url:"https://raw.githubusercontent.com/trompamusic-encodings/Mahler_Symphony_No4_Doblinger-4hands/master/Mahler_No4_1-Doblinger-4hands.mei"},{name:"Orlando di Lasso - Bon jour, mon coeur (from https://cpdl.org)",url:"https://trompa-mtg.upf.edu/data/meiconversion/79f3e3c5-29b7-424f-9144-4cc6d720c206.mei"}];function H(){var e=Object(r.useState)(""),t=Object(D.a)(e,2),n=t[0],i=t[1],o=Object(y.g)(),s=function(e){o.push({pathname:"/annotate",search:"?resource=".concat(e)})};return a.a.createElement(R.a,null,a.a.createElement(N.a,{sm:2}),a.a.createElement(N.a,null,a.a.createElement("p",null,"\xa0"),a.a.createElement("h2",null,"Load a score"),a.a.createElement("h3",null,"Use a sample score"),a.a.createElement("ul",null,F.map((function(e){return a.a.createElement("li",{key:e.url},a.a.createElement("a",{href:"/annotate?resource=".concat(e.url),onClick:function(t){t.preventDefault(),s(e.url)}},e.name))}))),a.a.createElement("p",null,"or"),a.a.createElement("h3",null,"Load an MEI URL"),a.a.createElement($.a,{onSubmit:function(e){e.preventDefault(),n&&""!==n&&s(n)}},a.a.createElement(R.a,null,a.a.createElement(N.a,{sm:11},a.a.createElement($.a.Control,{type:"input",placeholder:"Enter URL",value:n,onChange:function(e){return i(e.target.value)}})),a.a.createElement(N.a,null,a.a.createElement(w.a,{variant:"primary",type:"submit",onClick:function(){n&&""!==n&&s(n)}},"Load")))),a.a.createElement("p",null,"or"),a.a.createElement("h3",null,"Search the TROMPA early music database"),a.a.createElement(x.c,{config:L,uri:"https://api.trompamusic.eu",renderSearchResult:q,placeholderText:"Search for a composition...",onResultClick:function(e){e.workExample.length&&s(e.workExample[0].contentUrl)}})),a.a.createElement(N.a,{sm:2}))}var W,V=n(37),Q=n(2),z=n.n(Q),G=n(6),J=n(42),Z=n(53),Y=n(39),_=n(40),K=n(536),X=n(499),ee=n(500),te=n(434),ne=["svgRef","title"];function re(){return(re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ae(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ie,oe=function(e){var t=e.svgRef,n=e.title,r=ae(e,ne);return a.a.createElement("svg",re({"aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"arrow-alt-to-top",className:"svg-inline--fa fa-arrow-alt-to-top fa-w-12",role:"img",viewBox:"0 0 384 512",ref:t},r),n?a.a.createElement("title",null,n):null,W||(W=a.a.createElement("path",{fill:"currentColor",d:"M48 336h51.6v96c0 26.5 21.5 48 48 48h88.6c26.5 0 48-21.5 48-48v-96h51.6c42.6 0 64.2-51.7 33.9-81.9l-143.9-144c-18.7-18.7-49.1-18.7-67.9 0l-144 144C-16 284.2 5.3 336 48 336zm144-192l144 144h-99.7v144h-88.6V288H48l144-144zM0 68V44c0-6.6 5.4-12 12-12h360c6.6 0 12 5.4 12 12v24c0 6.6-5.4 12-12 12H12C5.4 80 0 74.6 0 68z"})))},se=a.a.forwardRef((function(e,t){return a.a.createElement(oe,re({svgRef:t},e))})),le=(n.p,["svgRef","title"]);function ce(){return(ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ue(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var de,fe=function(e){var t=e.svgRef,n=e.title,r=ue(e,le);return a.a.createElement("svg",ce({"aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"file-import",className:"svg-inline--fa fa-file-import fa-w-16",role:"img",viewBox:"0 0 512 512",ref:t},r),n?a.a.createElement("title",null,n):null,ie||(ie=a.a.createElement("path",{fill:"currentColor",d:"M497.83 97.98L413.94 14.1c-9-9-21.2-14.1-33.89-14.1H175.99C149.5.1 128 21.6 128 48.09v215.98H12c-6.63 0-12 5.37-12 12v24c0 6.63 5.37 12 12 12h276v48.88c0 10.71 12.97 16.05 20.52 8.45l71.77-72.31c4.95-4.99 4.95-13.04 0-18.03l-71.77-72.31c-7.55-7.6-20.52-2.26-20.52 8.45v48.88H175.99V48.09h159.97v103.98c0 13.3 10.7 23.99 24 23.99H464v287.95H175.99V360.07H128v103.94c0 26.49 21.5 47.99 47.99 47.99h287.94c26.5 0 48.07-21.5 48.07-47.99V131.97c0-12.69-5.17-24.99-14.17-33.99zm-113.88 30.09V51.99l76.09 76.08h-76.09z"})))},me=a.a.forwardRef((function(e,t){return a.a.createElement(fe,ce({svgRef:t},e))})),pe=(n.p,function(e){var t=e.body,n=e.setBody;return a.a.createElement("textarea",{className:"textArea",id:"annotationContent",value:t.value,placeholder:"Add your annotation...",onChange:function(e){n({id:Object(te.a)(),type:"TextualBody",value:e.target.value})}})}),he=function(e){var t=e.body,n=e.setBody;return a.a.createElement("textarea",{className:"textArea",id:"annotationContent",value:t.value,placeholder:"Insert your image link...",onChange:function(e){n({id:e.target.value})}})},ge=function(e){var t=e.body,n=e.setBody;return a.a.createElement("textarea",{className:"textArea",id:"annotationContent",value:t.value,placeholder:"Insert your URI link...",onChange:function(e){n({id:e.target.value})}})},ve=function(e){var t=e.body,n=e.setBody,r=t.value||"",i=t.seconds||"";return a.a.createElement("div",null,a.a.createElement("input",{type:"text",value:r,name:"value",placeholder:"enter link here",onChange:function(e){n({id:e.target.value+"#t="+i})},className:"sizedTextBox"}),a.a.createElement("span",null," jump to: "),a.a.createElement("input",{type:"text",pattern:"[0-9]",placeholder:"seconds",name:"seconds",value:i,onChange:function(e){n({id:r+"#t="+e.target.value})},className:"sizedTextBox"}))},be=function(e){var t=e.body,n=e.setBody,r=t.value||"",i=t.title||"",o=t.id;return o||(o=Object(te.a)()),a.a.createElement("div",null,a.a.createElement("input",{type:"text",value:r,name:"value",placeholder:"enter link here",onChange:function(e){n({id:o,type:"TextualBody",title:i,value:e.target.value})},className:"sizedTextBox"}),a.a.createElement("span",null," with title: "),a.a.createElement("input",{type:"text",placeholder:"title",name:"seconds",value:i,onChange:function(e){n({id:o,type:"TextualBody",title:e.target.value,value:r})},className:"sizedTextBox"}))},ye=function(e){var t=Object(r.useState)("describing"),n=Object(D.a)(t,2),i=n[0],o=n[1],s=Object(r.useState)({}),l=Object(D.a)(s,2),c=l[0],u=l[1],d=function(){return 0===Object.keys(c).length&&c.constructor===Object};return a.a.createElement("div",{className:"App"},a.a.createElement("div",{className:"container__app"},a.a.createElement("h3",null,"Annotation type"),[{value:"Describing",motivation:"describing",title:"links external resources to the annotation"},{value:"Linking",motivation:"linking",title:"adds a textual content to the annotation"},{value:"Cue Media",motivation:"trompa:cueMedia",title:"links a media content to the annotation"},{value:"Image",motivation:"trompa:cueImage",title:"links an image content to the annotation"},{value:"Playlist",motivation:"trompa:playlist",title:"adds a textual content to the annotation"}].map((function(e){return a.a.createElement($.a.Check,{inline:!0,key:e.motivation,id:"annotationType-".concat(e.motivation),type:"radio",label:e.value,name:"annotationType",value:e.value,onChange:function(){o(e.motivation),u({})},checked:i===e.motivation})})),a.a.createElement("div",{className:"addAnnotations"},"describing"===i&&a.a.createElement(pe,{body:c,setBody:u}),"linking"===i&&a.a.createElement(ge,{body:c,setBody:u}),"trompa:cueMedia"===i&&a.a.createElement(ve,{body:c,setBody:u}),"trompa:cueImage"===i&&a.a.createElement(he,{body:c,setBody:u}),"trompa:playlist"===i&&a.a.createElement(be,{body:c,setBody:u}),a.a.createElement("button",{className:d()?"disabledSubmitButton":"enabledSubmitButton",title:"click to post your annotation to your solid POD",onClick:function(){var t={"@context":"https://www.w3.org/ns/anno.jsonld",target:e.selection.map((function(t){return{id:e.uri+"#"+t.getAttribute("id")}})),type:"Annotation",motivation:i,body:[c],created:(new Date).toISOString(),creator:e.creator};d()?console.log("annotation is empty, not saving"):(e.saveAnnotation(t),u({}))}},!d()&&a.a.createElement(a.a.Fragment,null,a.a.createElement(se,{style:{width:"1em",height:"1em"}})," Submit to your Solid POD"),d()&&a.a.createElement(a.a.Fragment,null,a.a.createElement(me,{style:{width:"1em",height:"1em"}})," Write something to begin...")))))},we=[{name:"Note",value:".note"},{name:"Measure",value:".measure"},{name:"Dynamics",value:".dynam"},{name:"Directives",value:".dir"}],Ee=function(e){Object(Y.a)(n,e);var t=Object(_.a)(n);function n(){var e;Object(I.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={selectorString:[]},e}return Object(J.a)(n,[{key:"updateSelectorList",value:function(e,t){var n=this;if(e.target.checked){var r=[].concat(Object(V.a)(this.state.selectorString),[t]);this.setState({selectorString:r},(function(){n.props.handleStringChange(n.state.selectorString)}))}else this.setState({selectorString:this.state.selectorString.filter((function(e){return e!==t}))},(function(){n.props.handleStringChange(n.state.selectorString)}))}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement("h3",null,"Selection type"),a.a.createElement($.a,null,we.map((function(t){return a.a.createElement($.a.Check,{inline:!0,key:t.name,label:t.name,name:"selector",value:t.value,id:"selector-".concat(t.name),onChange:function(n){return e.updateSelectorList(n,t.value)}})}))))}}]),n}(r.Component),Ae=n(99),Se=n.n(Ae),Ce=n(342),Te=n.n(Ce),Oe=n(68),je=n(501),De=n.n(je),Ie=["svgRef","title"];function ke(){return(ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Re,Ne=function(e){var t=e.svgRef,n=e.title,r=xe(e,Ie);return a.a.createElement("svg",ke({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"trash",className:"svg-inline--fa fa-trash fa-w-14",role:"img",viewBox:"0 0 448 512",ref:t},r),n?a.a.createElement("title",null,n):null,de||(de=a.a.createElement("path",{fill:"currentColor",d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"})))},$e=a.a.forwardRef((function(e,t){return a.a.createElement(Ne,ke({svgRef:t},e))})),Me=(n.p,["svgRef","title"]);function Be(){return(Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Pe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ue=function(e){var t=e.svgRef,n=e.title,r=Pe(e,Me);return a.a.createElement("svg",Be({"aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"info-circle",className:"svg-inline--fa fa-info-circle fa-w-16",role:"img",viewBox:"0 0 512 512",ref:t},r),n?a.a.createElement("title",null,n):null,Re||(Re=a.a.createElement("path",{fill:"currentColor",d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm0-338c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"})))},Le=a.a.forwardRef((function(e,t){return a.a.createElement(Ue,Be({svgRef:t},e))})),qe=(n.p,function(e){Object(Y.a)(n,e);var t=Object(_.a)(n);function n(e){var r;return Object(I.a)(this,n),(r=t.call(this,e)).showDetails=function(e){e.preventDefault(),e.stopPropagation();var t=e.target.closest(".rootAnno"),n=t.querySelector(".hiddenDetails");if(n&&!r.state.isVisible)r.setState({isVisible:!0}),n.classList.remove("hiddenDetails"),n.classList.add("showDetails");else if(r.state.isVisible){r.setState({isVisible:!1});var a=t.querySelector(".showDetails");a.classList.remove("showDetails"),a.classList.add("hiddenDetails")}},r.showReplyDetails=function(e){e.preventDefault(),e.stopPropagation();var t=e.target.closest(".quoteContent"),n=t.querySelector(".hiddenDetails");if(n&&!r.state.isVisible)r.setState({isVisible:!0}),n.classList.remove("hiddenDetails"),n.classList.add("showDetails");else if(r.state.isVisible){r.setState({isVisible:!1});var a=t.querySelector(".showDetails");a.classList.remove("showDetails"),a.classList.add("hiddenDetails")}},r.onClick=function(e){e.preventDefault(),e.stopPropagation();var t=r.props.annotation.target,n=r.props.annotation["@id"];r.props.onAnnoReplyHandler(t,n),console.log("reply target id",n)},r.showConfirm=function(e){e.preventDefault(),e.stopPropagation();var t=e.target.closest(".rootAnno"),n=t.querySelector(".hiddenConfirm");if(n&&!r.state.isConfirmVisible)r.setState({isConfirmVisible:!r.state.isConfirmVisible}),n.classList.remove("hiddenConfirm"),n.classList.add("showConfirm");else if(r.state.isConfirmVisible){r.setState({isConfirmVisible:!r.state.isConfirmVisible});var a=t.querySelector(".showConfirm");a.classList.remove("showConfirm"),a.classList.add("hiddenConfirm")}},r.onPlayClick=function(e){e.preventDefault(),e.stopPropagation();var t=r.props.annotation.body[0].id;r.props.onMediaClick(t)},r.onPreviewclick=function(e){e.preventDefault(),e.stopPropagation();var t=e.target.closest(".rootAnno").children[0];r.state.isPictureShowing?(document.querySelector(".showContainer").addEventListener("click",(function(e){e.stopPropagation()})),r.setState({isPictureShowing:!1,previewButtonContent:"show preview"}),t.classList.add("hiddenContainer"),t.classList.remove("showContainer")):(r.setState({isPictureShowing:!0,previewButtonContent:"Hide preview"}),console.log(t),document.querySelector(".hiddenContainer").addEventListener("click",(function(e){e.stopPropagation()})),t.classList.remove("hiddenContainer"),t.classList.add("showContainer"))},r.onShowReplyClick=function(e){e.preventDefault(),e.stopPropagation();var t=e.target.closest(".rootAnno");console.log("root anno",t);var n=document.querySelectorAll(".replyAnno");n.length?n.forEach((function(e){var n=e.dataset.replyAnnotationTarget,a=t.dataset.selfId;if(console.log("Reply target anno id: ",n),n===a)if(!1===r.props.areRepliesVisible||!1===r.state.isClicked){r.setState({isClicked:!0}),t.appendChild(e),r.props.showReplyHandler();var i=Array.from(t.getElementsByClassName("showReply"));i.forEach((function(e){return e.classList.add("hiddenReply")})),i.forEach((function(e){return e.classList.remove("showReply")}));var o=Array.from(t.getElementsByClassName("hiddenReply"));o.forEach((function(e){return e.classList.add("showReply")})),o.forEach((function(e){return e.classList.remove("hiddenReply")}))}else{r.setState({isClicked:!1}),r.props.showReplyHandler();var s=document.querySelector(".listContainer"),l=Array.from(t.getElementsByClassName("showReply"));l.forEach((function(e){e.classList.add("hiddenReply"),s.appendChild(e)})),l.forEach((function(e){return e.classList.remove("showReply")}))}})):console.warn("no replies to show for this annotation")},r.renderSwitch=function(){var e,t,n=r.props.annotation.created,i=document.querySelectorAll(".replyAnno"),o=r.props.annotation["@id"],s=!1;i.length&&i.forEach((function(e){e.dataset.replyAnnotationTarget===o&&(s=!0)})),e=r.state.datasetWithAcl?Object(Oe.getPublicAccess)(r.state.datasetWithAcl).read?"public":Object.keys(Object(Oe.getAgentAccessAll)(r.state.datasetWithAcl))>1?"shared":"private":"unknown",r.state.userMayModifyAccess?"public"!==e?t=a.a.createElement(Te.a,{checked:!1,onChange:r.grantPublic,icons:{unchecked:a.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"lock",className:"svg-inline--fa fa-lock fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512","vertical-align":"middle"},a.a.createElement("path",{fill:"white",d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"}))}}):"public"===e&&(t=a.a.createElement(Te.a,{checked:!0,onChange:r.revokePublic,icons:{checked:a.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"lock-open",className:"svg-inline--fa fa-lock-open fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},a.a.createElement("path",{fill:"white",d:"M423.5 0C339.5.3 272 69.5 272 153.5V224H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48h-48v-71.1c0-39.6 31.7-72.5 71.3-72.9 40-.4 72.7 32.1 72.7 72v80c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24v-80C576 68 507.5-.3 423.5 0z"}))}})):t=a.a.createElement("span",{className:"accessPermissions"},"No access");var l=a.a.createElement("div",null,a.a.createElement("div",{className:"hiddenConfirm"},a.a.createElement("div",null,"Delete this annotation and its replies?",a.a.createElement("p",null,a.a.createElement("button",{className:"deleteYes",onClick:r.deleteAnno},"yes"),a.a.createElement("button",{className:"deleteNo",onClick:r.showConfirm},"no")))),a.a.createElement("div",{style:{paddingTop:"1.5%"}},a.a.createElement("button",{className:"deleteButton",onClick:r.showConfirm},a.a.createElement($e,null)),a.a.createElement("button",{className:"infoButton",onMouseEnter:r.showDetails,onMouseLeave:r.showDetails},a.a.createElement(Le,null)),"permissions: ",t)),c=a.a.createElement("div",null,a.a.createElement("div",{className:"hiddenDetails"}," ",a.a.createElement("p",{className:"date"},"Created on: ",n,", access permissions: ",e,".")),a.a.createElement("div",null,s&&a.a.createElement("button",{className:"showRepliesButton",name:"showRepliesButton",onClick:r.onShowReplyClick},r.state.showRepliesButtonContent),a.a.createElement("button",{className:"replyButton",name:"replyButton",onClick:r.onClick},"Reply"))),u=r.props.annotation.motivation,d=r.props.annotation.body[0].value,f=r.props.annotation.body[0].id,m=r.props.annotation.body[0].id,p=r.props.annotation.target[0].id,h=r.props.annotation.target,g=r.props.annotation.creator||"unknown";switch(u){case"describing":return a.a.createElement("div",{className:"rootAnno annoItem","data-target":p,"data-self-id":o}," ",l,a.a.createElement("p",null,d),c);case"linking":if(f.startsWith("http"))return a.a.createElement("div",{className:"rootAnno annoItem","data-target":p,"data-self-id":o},a.a.createElement("p",null,"",l,a.a.createElement("a",{href:f,onClick:function(){return!1},target:"_blank",rel:"noopener noreferrer"},f)),c);var v="https://"+f;return a.a.createElement("div",{className:"rootAnno annoItem","data-target":p,"data-self-id":o},l,a.a.createElement("p",null,"",a.a.createElement("a",{href:v,onClick:function(){return!1},target:"_blank",rel:"noopener noreferrer"},f)),c);case"trompa:cueMedia":var b=m.split("#")[0];return a.a.createElement("div",{className:"rootAnno annoItem","data-target":p,"data-self-id":o}," ",l,a.a.createElement("p",null,b," ",a.a.createElement("button",{className:"playButton",onClick:r.onPlayClick}," ",a.a.createElement("img",{src:De.a,alt:"",style:{width:"5px",alignContent:"center",textAlign:"center"}})," ","play"," ")),c);case"trompa:cueImage":return a.a.createElement("div",{className:"rootAnno annoItem","data-target":p,"data-self-id":o}," ",a.a.createElement("div",{className:"hiddenContainer"},a.a.createElement("a",{href:m,target:"_blank",rel:"noopener noreferrer"},a.a.createElement("img",{title:"click for full res",src:m,alt:"annotation",style:{maxWidth:"240px",maxHeight:"135px",marginTop:"5px"}}))),l,a.a.createElement("p",null,"The content of this annotation is a picture, click the button to see a preview"," ",a.a.createElement("button",{onClick:r.onPreviewclick},r.state.previewButtonContent," ")),c);case"trompa:playlist":return;case"replying":return a.a.createElement("div",{"data-reply-annotation-target":h,"data-self-id":o,className:"replyAnno hiddenReply"},a.a.createElement("div",{className:"quoteContent"},a.a.createElement("button",{className:"deleteButton",onClick:r.deleteAnno},a.a.createElement($e,null)),a.a.createElement("button",{className:"infoButton",onMouseEnter:r.showReplyDetails,onMouseLeave:r.showReplyDetails},a.a.createElement(Le,null)),a.a.createElement("p",null,"Reply: ",d),a.a.createElement("span",{className:"hiddenDetails"}," ",a.a.createElement("span",{className:"date"},"Created on: ",n,", access permissions: ",e,"."))));default:return console.log("no motivation provided defaulting to plain text annotation",u),a.a.createElement("div",{className:"annoItem","data-target":p}," ",a.a.createElement("p",null,"The plain text content of this annotation is ",d),a.a.createElement("div",{className:"date"},"Created on: ",n," by ",g," with ",u," motivation"))}},r.state={isClicked:!1,userMayModifyAccess:!1,resourceAcl:void 0,aclModified:0,datasetWithAcl:void 0,userId:void 0,isPictureShowing:!1,previewButtonContent:"Show preview",showRepliesButtonContent:"Toggle replies",isConfirmVisible:!1,isVisible:!1,resp:""},r.grantPublic=r.grantPublic.bind(Object(Z.a)(r)),r.revokePublic=r.revokePublic.bind(Object(Z.a)(r)),r.updateDatasetAcl=r.updateDatasetAcl.bind(Object(Z.a)(r)),r.deleteAnno=r.deleteAnno.bind(Object(Z.a)(r)),r}return Object(J.a)(n,[{key:"deleteAnno",value:function(e){var t=this,n=e.target.closest(".rootAnno"),r=document.querySelectorAll(".replyAnno");r&&r.forEach((function(e){e.dataset.replyAnnotationTarget===n.dataset.selfId&&(console.log("replies found: ",e.dataset.selfId),Se.a.fetch(e.dataset.selfId,{method:"DELETE"}).then((function(){console.log("replies deleted")})))})),Se.a.fetch(this.props.annotation["@id"],{method:"DELETE"}).then(function(){var e=Object(G.a)(z.a.mark((function e(n){var r,a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:if(r=e.sent,n.ok){e.next=6;break}return a=r&&r.message||n.status,e.abrupt("return",Promise.reject(a));case 6:t.setState({resp:"success"});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then(this.props.onRefreshClick()).catch((function(){console.warn("Your annotation has been deleted, refreshing...")}))}},{key:"componentDidMount",value:function(){this.updateDatasetAcl()}},{key:"updateDatasetAcl",value:function(){var e=this;Se.a.currentSession().then((function(t){Object(Oe.getSolidDatasetWithAcl)(e.props.annotation["@id"],{fetch:Se.a.fetch}).then((function(n){var r;if(console.log("Got dataset: ",n),Object(Oe.hasResourceAcl)(n))r=Object(Oe.getResourceAcl)(n),e.setState({userMayModifyAccess:!0,datasetWithAcl:n,resourceAcl:r,aclModified:Date.now()}),console.log("Got resource ACL");else if(Object(Oe.hasAccessibleAcl)(n)||console.warn("You do not have permission to modify access on ",e.props.annotation["@id"]),Object(Oe.hasFallbackAcl)(n)){r=Object(Oe.createAclFromFallbackAcl)(n);var a=Object(Oe.setAgentResourceAccess)(r,t.webId,{read:!0,append:!0,write:!0,control:!0});e.setState({userMayModifyAccess:!0,datasetWithAcl:n,resourceAcl:a,aclModified:Date.now()}),console.log("Creating ACL from fallback ACL")}else console.warn("You do not have permission to view access rights list on ",e.props.annotation["@id"])})).catch((function(t){return console.error("Couldn't get Solid dataset with ACL: ",e.props.annotation["@id"],t)}))})).catch((function(e){return console.error("Couldn't access the current Solid session: ",e)}))}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.aclModified!==t.aclModified}},{key:"grantPublic",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),Se.a.currentSession().then((function(e){var n=Object(Oe.setPublicResourceAccess)(t.state.resourceAcl,{read:!0,append:!1,write:!1,control:!1});n=Object(Oe.setAgentResourceAccess)(n,e.webId,{read:!0,append:!0,write:!0,control:!0}),Object(Oe.saveAclFor)(t.state.datasetWithAcl,n,{fetch:Se.a.fetch}).then((function(){return t.updateDatasetAcl()})).catch((function(e){return console.error("Could not grant public access: ",e)}))}))}},{key:"revokePublic",value:function(e){var t=this;console.log("Revoking. Old acl: ",this.state.resourceAcl),e.stopPropagation(),e.preventDefault(),Se.a.currentSession().then((function(e){var n=Object(Oe.setPublicResourceAccess)(t.state.resourceAcl,{read:!1,append:!1,write:!1,control:!1});n=Object(Oe.setAgentResourceAccess)(n,e.webId,{read:!0,append:!0,write:!0,control:!0}),Object(Oe.saveAclFor)(t.state.datasetWithAcl,n,{fetch:Se.a.fetch}).then((function(){return t.updateDatasetAcl()})).catch((function(e){return console.error("Could not revoke public access: ",e)}))}))}},{key:"render",value:function(){return a.a.createElement("div",{className:"annoItemContainer"},this.renderSwitch())}}]),n}(r.Component)),Fe=function(e){Object(Y.a)(n,e);var t=Object(_.a)(n);function n(){var e;Object(I.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={order:"desc"},e}return Object(J.a)(n,[{key:"render",value:function(){var e=this,t=this.state.order,n=this.props.allEntries.filter((function(t){return e.props.filteringEntries.includes(t["@id"])})).sort((function(e,n){return("asc"===t?1:-1)*e.created.localeCompare(n.created)}));function r(e){console.log("i am being clicked");var t=Array.from(e.currentTarget.classList).filter((function(e){return e.startsWith("focus-")}));t.length>1&&console.warn("Element with multiple focus Ids!",e.target),Array.from(document.getElementsByClassName("inFocus")).forEach((function(e){return e.classList.remove("inFocus")})),Array.from(document.getElementsByClassName(t[0])).forEach((function(e){return e.classList.add("inFocus")}))}return a.a.createElement("div",{className:"listContainer",id:"listContainer"},n.map((function(t){var n=t["@id"].substr(t["@id"].lastIndexOf("/")+1);return a.a.createElement("div",{className:"focus-"+n,onClick:r,key:t["@id"],id:n},a.a.createElement(qe,{annotation:t,onAnnoReplyHandler:e.props.onAnnoReplyHandler,onMediaClick:e.props.onMediaClick,replyAnnotationTarget:e.props.replyAnnotationTarget,showReplyHandler:e.props.showReplyHandler,areRepliesVisible:e.props.areRepliesVisible,onRefreshClick:e.props.onRefreshClick}))})))}}]),n}(a.a.Component),He=n(502),We=n.n(He),Ve=function(e){Object(Y.a)(n,e);var t=Object(_.a)(n);function n(e){var r;return Object(I.a)(this,n),(r=t.call(this,e)).delete=function(){Se.a.fetch(r.props.annotation["@id"],{method:"DELETE"}).then(function(){var e=Object(G.a)(z.a.mark((function e(t){var n,a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(n=e.sent,t.ok){e.next=6;break}return a=n&&n.message||t.status,e.abrupt("return",Promise.reject(a));case 6:r.setState({resp:"success"});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(){r.props.onRefreshClick()})).catch((function(){console.warn("Your annotation has been deleted, refreshing...")}))},r.state={resp:""},r}return Object(J.a)(n,[{key:"render",value:function(){var e=this.props.annotation["@id"],t=this.props.annotation.body[0].seconds,n=this.props.annotation.body[0].value;return a.a.createElement("div",{className:"rootAnno playlistItem"},a.a.createElement("p",null,t),a.a.createElement("iframe",{src:n,title:e,frameBorder:"0",width:"400",height:"60"}),a.a.createElement("button",{onClick:this.delete},"del"))}}]),n}(r.Component),Qe=function(e){var t=Object(r.useState)(!1),n=Object(D.a)(t,2),i=n[0],o=n[1];return a.a.createElement("div",null,a.a.createElement("button",{className:"renditionButton",onClick:function(){o(!i)}},"Show recordings playlist"),a.a.createElement("div",{className:"playlist ".concat(i?"":"hidden")},e.allEntries.map((function(t){return"trompa:playlist"===t.motivation&&a.a.createElement("div",{key:t["@id"]},a.a.createElement(Ve,{annotation:t,onRefreshClick:e.onRefreshClick}))}))))},ze=n(503),Ge=n.n(ze),Je=n(504),Ze=n.n(Je),Ye=n(505),_e=n.n(Ye),Ke=n(506),Xe=n.n(Ke);function et(e){for(var t="-abcdefghijklmnopqrstuvwxyz".split(""),n=["A","B","C","D","E","F","G"],r=e.map((function(e){return(n.indexOf(e.pitch.toUpperCase())+1)%7+7*e.oct%7})),a=[],i=0;i<r.length-1;i++)a.push(r[i+1]-r[i]);return a.map((function(e){e<-26&&(e=-26),e>26&&(e=26);var n=t[Math.abs(e)];return e>0&&(n=n.toUpperCase()),n})).join("")}var tt=n(195),nt=function(e){var t=e.vrvToolkit.getMEI(),n=function(e){var t=e.getElementsByTagName("staffDef"),n={};Array.from(t).forEach((function(e){var t,r,a=e.attributes,i=e.getElementsByTagName("label");i.length&&(r=i[0].innerHTML);var o=null===a||void 0===a||null===(t=a.getNamedItem("n"))||void 0===t?void 0:t.value;o&&(n[o]={label:r,notes:[]})}));var r=e.getElementsByTagName("measure");Array.from(r).forEach((function(e){var t=e.getElementsByTagName("staff");Array.from(t).forEach((function(e){var t,r=null===(t=e.attributes.getNamedItem("n"))||void 0===t?void 0:t.value,a=e.getElementsByTagName("note");Array.from(a).forEach((function(e){var t,a,i=e.attributes,o=null===(t=i.getNamedItem("pname"))||void 0===t?void 0:t.value,s=null===(a=i.getNamedItem("oct"))||void 0===a?void 0:a.value;n[r].notes.push({pitch:o,oct:parseInt(s,10)})}))}))}));var a={};return Object.keys(n).forEach((function(e){n[e].label&&(a[e]={label:n[e].label,notes:et(n[e].notes)})})),a}((new DOMParser).parseFromString(t,"text/xml")),i=Object(r.useState)(void 0),o=Object(D.a)(i,2),s=o[0],l=o[1],c=Object(r.useState)([]),u=Object(D.a)(c,2),d=u[0],f=u[1];return a.a.createElement("div",{className:"ftempoContainer"},a.a.createElement("h3",null,"Search using F-TEMPO (experimental)"),n&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"Search this score on F-TEMPO: select a single voice from this list as query"),a.a.createElement("ul",null,Object.keys(n).map((function(e){return a.a.createElement($.a.Check,{key:e,type:"radio",name:"voice",value:e,id:"voice-"+e,checked:s===e,onChange:function(e){l(e.target.value),f([])},label:n[e].label})}))),a.a.createElement(w.a,{variant:"success",onClick:function(){if(s){var e=n[s];if(e&&e.notes){var t={codestring:e.notes};fetch("https://uk-dev-ftempo.rism.digital/api/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){f(e)}))}}},disabled:!s},"Search")),d.length>0&&a.a.createElement(tt.a,{allowZeroExpanded:!0},d.map((function(e){return a.a.createElement(tt.b,{key:e.id},a.a.createElement(tt.d,null,a.a.createElement(tt.c,null,e.id)),a.a.createElement(tt.e,null,a.a.createElement("img",{src:"https://uk-dev-ftempo.rism.digital/img/jpg/"+e.id+".jpg",alt:""})))}))))};function rt(e){return"rgba("+[~~(255*Math.random()),~~(255*Math.random()),~~(255*Math.random()),e||1]+")"}function at(e){var t,n;return e.target[0]instanceof pt?(t=e.target[0].fragmentStart,n=e.target[0].fragmentEnd):(t=e.target[0].start,n=e.target[0].end),[t,n]}var it,ot,st=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lt=function(){return(lt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},ct=function e(t,n){return"string"===typeof t||"number"===typeof t?t:(t instanceof pt?r=t.toJSONLD():Array.isArray(t)?r=t.map((function(t){return e(t)})):(r={},Object.keys(t).forEach((function(n){t[n]&&(r[n]=e(t[n]))}))),"object"===typeof r&&"target"in r&&(Array.isArray(r.target)||(r.target=[r.target]),r.target=r.target.map((function(e){var r;return"object"===typeof e?n?r=ut(e,n):(console.error("Missing resource for target: ",e," for annotation object: ",t),r=e.toString()):r=e,r}))),r);var r},ut=function(e,t){var n;return"fieldName"in e?n=t[e.fieldName]:e instanceof pt?(console.error("GOT UNDEFINED TARGET"),n="UNDEFINED FOR AnnotationTarget"):n=e.url,(e="fragment"in e?new URL(n+"#"+e.fragment):"start"in e&&"end"in e?new URL(n+"?t="+e.start+","+e.end):new URL(n)).toString()};!function(e){e.COMMENTING="commenting",e.DESCRIBING="describing",e.TAGGING="tagging",e.CLASSIFYING="classifying",e.ASSESSING="assessing",e.LINKING="linking"}(it||(it={})),function(e){e.RANGE="1",e.PUNCTUAL="2",e.WHOLE="3"}(ot||(ot={}));var dt,ft;!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}st(t,e)}(Error);!function(e){e.ltr="ltr",e.rtl="rtl",e.auto="auto"}(dt||(dt={})),function(e){e.Dataset="Dataset",e.Image="Image",e.Video="Video",e.Sound="Sound",e.Text="Text",e.TextualBody="TextualBody"}(ft||(ft={}));var mt=function(){function e(e){this.id=e.id,this.format=e.format,this.language=e.language,this.processingLanguage=e.processingLanguage,this.textDirection=e.textDirection,this.type=e.type}return e.prototype.toJSONLD=function(){return ct(this)},e}(),pt=(function(e){function t(t){var n=e.call(this,lt(lt({},t),{type:ft.TextualBody}))||this;return n.value=t.value,n}st(t,e),t.prototype.toJSONLD=function(){return ct(this)}}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),Object.defineProperty(t.prototype,"fragment",{get:function(){var e=new URL(this.id);if(e.hash)return e.hash.substring(1)},set:function(e){if(e){var t=new URL(this.id);t.hash="#"+e,this.id=t.toString()}},enumerable:!1,configurable:!0}),t.fragmentToStartAndEnd=function(e){var t=/t=(\d+(?:\.\d+)?)(?:,(\d+(?:\.\d+)?))?/.exec(e);return t?[parseFloat(t[1]),(null===t||void 0===t?void 0:t[2])?parseFloat(t[2]):void 0]:[void 0,void 0]},Object.defineProperty(t.prototype,"fragmentStart",{get:function(){if(this.fragment)return t.fragmentToStartAndEnd(this.fragment)[0]},set:function(e){var t=this.fragmentEnd;e&&(this.fragment=this.timeString(e,t))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fragmentEnd",{get:function(){if(this.fragment)return t.fragmentToStartAndEnd(this.fragment)[1]},set:function(e){var t=this.fragmentStart;e&&(this.fragment=this.timeString(t,e))},enumerable:!1,configurable:!0}),t.prototype.timeString=function(e,t){return isNaN(Number(e))?void 0:isNaN(Number(t))||e===t?"t="+e:"t="+e+","+t},t.prototype.toJSONLD=function(){console.log("case: TARGET");var e=this.id,t=this.fragment;return t&&(e+="#"+t),e},t}(mt)),ht=function(){function e(e){this.isNew=!0,this.identifier=e.identifier,this.target=e.target,this.creator=e.creator,this.created=e.created,this.motivation=e.motivation,this.customMotivation=e.customMotivation,this.body=e.body,this.canonical=e.canonical,this.via=e.via}return e.prototype.toJSONLD=function(e){return ct(this,e)},Object.defineProperty(e.prototype,"timeFragmentType",{get:function(){var e=at(this),t=e[0],n=e[1];return void 0===t||isNaN(t)?ot.WHOLE:void 0===n||isNaN(n)?ot.PUNCTUAL:ot.RANGE},set:function(e){},enumerable:!1,configurable:!0}),e}(),gt=n(12);var vt=n(1),bt=n.n(vt),yt=n(969),wt=(n(791),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),Et=function(){return(Et=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},At=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onInputChange=function(e){(0,t.props.onRatingChange)(Number(e.target.value))},t.getComponentFromType=function(){var e=t.props,n=e.ratingValue,r=e.type,a=e.bestRating,i=void 0===a?5:a,o=e.worstRating,s=void 0===o?1:o;switch(r){case"stars":var l=Array(n).fill("\u2605"),c=Array(n).fill("\u2606");return Object(gt.jsxs)("div",Et({style:{color:"gold",fontSize:"1.4em;"}},{children:[l.join(""),c.join("")]}),void 0);case"range":default:return Object(gt.jsxs)("div",Et({className:"form-control rangeInput"},{children:[Object(gt.jsx)("input",{type:"range",min:s,max:i,value:n,onChange:t.onInputChange},void 0),n&&Object(gt.jsx)(yt.a,{now:n,min:s,max:i,label:n+"/"+i},void 0)]}),void 0)}},t}wt(t,e),t.prototype.render=function(){var e=this.props.label;return Object(gt.jsxs)("div",Et({className:"form-group"},{children:[Object(gt.jsx)("label",Et({htmlFor:"value"},{children:e}),void 0),this.getComponentFromType()]}),void 0)}}(vt.Component),n(963));var St=n(953),Ct=n(508),Tt=(n(954),n(955),n(964));var Ot=n(510),jt=n.n(Ot),Dt=n(511),It=n.n(Dt),kt=n(512),xt=n.n(kt),Rt=n(513),Nt=n.n(Rt),$t=n(222),Mt=n.n($t),Bt=(n(794),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),Pt=function(){return(Pt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};(function(e){function t(t){var n=e.call(this,t)||this;return n.form=bt.a.createRef(),n.componentDidMount=function(){var e=n.props.initialRegions;n.wavesurfer=jt.a.create({barWidth:1,cursorWidth:1,container:"#waveform",backend:"WebAudio",height:80,interact:!0,progressColor:"#2D5BFF",responsive:!0,waveColor:"#EFEFEF",cursorColor:"transparent",plugins:[It.a.create({regions:e,dragSelection:{slop:0}}),xt.a.create({container:"#wave-timeline"}),Nt.a.create({showTime:!0,customShowTimeStyle:{bottom:0}})]});var t=document.querySelector("#track");t&&n.wavesurfer.load(t),n.wavesurfer.on("ready",(function(){var e;null===(e=n.wavesurfer)||void 0===e||e.enableDragSelection({color:rt(.1)})})),n.wavesurfer.on("region-click",(function(e,t){null===t||void 0===t||t.stopPropagation(),(null===t||void 0===t?void 0:t.shiftKey)?e.playLoop():e.play()})),n.wavesurfer.on("region-click",n.throttledSelectRegion),n.wavesurfer.on("region-created",n.throttledCreateRegion),n.wavesurfer.on("region-updated",n.throttledUpdateRegion),n.wavesurfer.on("region-removed",n.throttledDeleteRegion),n.wavesurfer.on("region-play",(function(e){e.once("out",(function(){var t,r;null===(t=n.wavesurfer)||void 0===t||t.play(e.start),null===(r=n.wavesurfer)||void 0===r||r.pause()}))})),n.wavesurfer.on("play",(function(){n.setState({playing:!0})})),n.wavesurfer.on("pause",(function(){n.setState({playing:!1})})),n.wavesurfer.drawer.on("dblclick",n.doubleClick)},n.doubleClick=function(e){var t,r,a,i=null===(t=n.wavesurfer)||void 0===t?void 0:t.drawer.handleEvent(e,!0),o=null===(r=n.wavesurfer)||void 0===r?void 0:r.regions.util.getRegionSnapToGridValue(i*n.wavesurfer.getDuration()),s=Number(o).toPrecision(2),l={start:s,end:s,resize:!1};null===(a=n.wavesurfer)||void 0===a||a.addRegion(l)},n.loadRegions=function(e){e.forEach((function(e){var t;null===(t=n.wavesurfer)||void 0===t||t.addRegion(e)}))},n.createNewRegion=function(){var e;null===(e=n.wavesurfer)||void 0===e||e.addRegion({})},n.updateRegionInWaveSurfer=function(e){var t=e.id,r=e.start,a=e.end;if(n.wavesurfer){var i=n.wavesurfer.regions.list[t];if(i){var o=r===a;i.update({start:r,end:a,resize:!o}),console.log("Region saved in wavesurfer:",i)}else console.error("No region with id",t)}},n.deleteRegionInWaveSurfer=function(e){var t,r=null===(t=n.wavesurfer)||void 0===t?void 0:t.regions.list[e];r&&r.remove()},n.selectRegionInWaveSurfer=function(e){var t,r,a=null===(t=n.wavesurfer)||void 0===t?void 0:t.regions.list[e];a&&(isNaN(a.start)||null===(r=n.wavesurfer)||void 0===r||r.fireEvent("region-click",a))},n.handlePlay=function(){var e,t,r,a=null===(e=n.wavesurfer)||void 0===e?void 0:e.isPlaying();a?null===(t=n.wavesurfer)||void 0===t||t.pause():null===(r=n.wavesurfer)||void 0===r||r.play(),n.setState({playing:!Boolean(a)})},n.state={playing:!1},n.form=bt.a.createRef(),n.throttledUpdateRegion=Mt()(t.updateRegion,1e3,{leading:!1}),n.throttledDeleteRegion=Mt()(t.deleteRegion,1e3,{leading:!1}),n.throttledSelectRegion=Mt()(t.selectRegion,250,{leading:!1}),n.throttledCreateRegion=Mt()(t.createRegion,250,{leading:!1}),n}Bt(t,e),t.prototype.render=function(){var e=this.props.resourceURL;return Object(gt.jsxs)("div",Pt({id:"waveformContainer"},{children:[Object(gt.jsx)("button",Pt({className:"playButton",onClick:this.handlePlay},{children:Object(gt.jsx)("i",{className:this.state.playing?"pause-button":"play-button",title:"Play/Pause"},void 0)}),void 0),Object(gt.jsxs)("div",Pt({id:"waveform-and-plugins"},{children:[Object(gt.jsx)("div",{id:"waveform"},void 0),Object(gt.jsx)("div",{id:"wave-timeline"},void 0)]}),void 0),Object(gt.jsx)("audio",{id:"track",src:e},void 0),Object(gt.jsx)("small",{children:"Click and drag to create a range annotation, double click to create a punctual annotation"},void 0)]}),void 0)}})(vt.Component),n(967),n(795);var Ut,Lt,qt,Ft,Ht,Wt,Vt,Qt,zt,Gt,Jt,Zt,Yt,_t,Kt,Xt,en,tn,nn,rn,an,on,sn,ln,cn,un,dn,fn,mn,pn,hn,gn=n(535),vn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bn=function(){return(bn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},yn=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(t){i(t)}}function s(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},wn=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},En=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={nodeid:"7c338222-6c68-45ce-a1aa-f2a41a261520",result:""},t.onInputChange=function(e){t.setState({nodeid:e.target.value})},t.searchNode=function(){return yn(t,void 0,void 0,(function(){var e,t,n,r;return wn(this,(function(a){switch(a.label){case 0:console.debug("Hello "+this.state.nodeid),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.props.trompaClient.getThingById(this.state.nodeid)];case 2:return e=a.sent(),console.debug("Apollo response:",e),(null===(r=null===(n=null===e||void 0===e?void 0:e.data)||void 0===n?void 0:n.ThingInterface)||void 0===r?void 0:r.length)?(this.setState({result:"You selected "+e.data.ThingInterface[0].contentUrl}),this.props.onSelect({source:e.data.ThingInterface[0].contentUrl})):this.setState({result:"No item with this id"}),[3,4];case 3:return t=a.sent(),this.setState({result:"Error! "+t}),[3,4];case 4:return[2]}}))}))},t}vn(t,e),t.prototype.render=function(){return Object(gt.jsxs)("div",{children:[Object(gt.jsxs)(St.a,bn({className:"align-items-center"},{children:[Object(gt.jsx)(Ct.a,{children:Object(gt.jsx)(Tt.a.Group,bn({controlId:"exampleForm.ControlInput1"},{children:Object(gt.jsx)(Tt.a.Control,{placeholder:"CE uuid",value:this.state.nodeid,onChange:this.onInputChange},void 0)}),void 0)},void 0),Object(gt.jsx)(Ct.a,bn({xs:"auto"},{children:Object(gt.jsx)(gn.a,bn({type:"submit",className:"mb-2",onClick:this.searchNode},{children:"Submit"}),void 0)}),void 0)]}),void 0),this.state.result]},void 0)}}(vt.Component),n(957)),An=n(509),Sn=(n(956),n(41)),Cn=n(514),Tn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),On=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},jn=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(t){i(t)}}function s(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},Dn=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},In=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Tn(t,e),t}(Error),kn=(function(){function e(e,t){var n=this;this.getApiToken=function(){return jn(n,void 0,void 0,(function(){return Dn(this,(function(e){return this.apiTokenExpired()?[2,fetch(this.authProxyUrl).then((function(e){return e.json()})).then((function(e){return localStorage.setItem("CEAuthToken",e.token),console.debug("token true"),!0})).catch((function(){return console.error("token false"),!1}))]:(console.debug("not expired, true!"),[2,!0])}))}))},this.apiTokenExpired=function(){var e=localStorage.getItem("CEAuthToken");if(e){var t=Object(Cn.a)(e),n=Date.now()/1e3;return t.exp-n<100}return!0},this.saveAnnotation=function(e){return jn(n,void 0,void 0,(function(){var t,n,r,a,i,o,s,l,c,u,d,f,m,p,h;return Dn(this,(function(g){switch(g.label){case 0:return console.debug(e),t=e.motivation,n=e.creator,e.identifier,[4,this.getApiToken()];case 1:if(g.sent(),!t)throw new TypeError("Annotation must have a motivation");if(!e.target)throw new TypeError("Annotation must have a target");if(!e.body)return[3,7];a=0,i=e.body,g.label=2;case 2:return a<i.length?(o=i[a])instanceof mt?[3,6]:[3,3]:[3,7];case 3:return"TextualBody"!==o.type?[3,5]:[4,this.apolloClient.mutate({mutation:Ln,variables:{creator:n,value:o.value,language:o.language,format:o.format}})];case 4:return(s=g.sent()).errors?console.error(s.errors):r=s.data.CreateAnnotationTextualBody.identifier,[3,6];case 5:"DefinedTerm"===o.type||"NodeBody"===o.type||o.type,g.label=6;case 6:return a++,[3,2];case 7:if(!e.target)return[3,14];c=0,u=e.target,g.label=8;case 8:return c<u.length?(d=u[c])instanceof pt?[3,13]:[3,9]:[3,14];case 9:return"AnnotationTarget"!==d.type?[3,13]:[4,this.apolloClient.mutate({mutation:qn,variables:{creator:n,field:d.fieldName,fragment:d.fragment}})];case 10:return(f=g.sent()).errors?(console.error(f.errors),[3,13]):[3,11];case 11:return l=f.data.CreateAnnotationCETarget.identifier,[4,this.apolloClient.mutate({mutation:Fn,variables:{annotationCeTargetId:l,ceNodeId:d.nodeId}})];case 12:(f=g.sent()).errors&&console.error(f.errors),g.label=13;case 13:return c++,[3,8];case 14:return[4,this.apolloClient.mutate({mutation:Hn,variables:{creator:n,motivation:t}})];case 15:return(m=g.sent()).errors?(console.error(m.errors),[3,22]):[3,16];case 16:return p=m.data.CreateAnnotation.identifier,r?[4,this.apolloClient.mutate({mutation:Qn,variables:{annotationId:p,bodyNodeId:r}})]:[3,18];case 17:(m=g.sent()).errors&&console.error(m.errors),g.label=18;case 18:if(!l)return[3,22];g.label=19;case 19:return g.trys.push([19,21,,22]),[4,this.apolloClient.mutate({mutation:Vn,variables:{annotationId:p,targetNodeId:l}})];case 20:return m=g.sent(),[3,22];case 21:return h=g.sent(),console.error(h),[3,22];case 22:return[2]}}))}))},this.deleteAnnotation=function(e){return jn(n,void 0,void 0,(function(){return Dn(this,(function(t){switch(t.label){case 0:return[4,this.getApiToken()];case 1:return t.sent(),[4,this.apolloClient.mutate({mutation:Wn,variables:{annotationId:e}})];case 2:return[2,t.sent()]}}))}))},this.getAnnotation=function(e){return jn(n,void 0,void 0,(function(){return Dn(this,(function(t){switch(t.label){case 0:return[4,this.getApiToken()];case 1:return t.sent(),[4,this.apolloClient.query({query:Zn,variables:{annotationId:e}})];case 2:return[2,t.sent()]}}))}))},this.getAnnotationsForUser=function(e){return jn(n,void 0,void 0,(function(){return Dn(this,(function(t){switch(t.label){case 0:return[4,this.getApiToken()];case 1:return t.sent(),[4,this.apolloClient.query({query:Gn,variables:{creator:e}})];case 2:return[2,t.sent()]}}))}))},this.getAnnotationsForItem=function(e){n.getApiToken(),n.apolloClient.query({query:Jn,variables:{nodeId:e}})},this.getAnnotationToolkitForItem=function(e){n.getApiToken(),n.apolloClient.query({query:Yn,variables:{itemId:e}})},this.deleteDefinedTerm=function(e,t){return jn(n,void 0,void 0,(function(){return Dn(this,(function(e){switch(e.label){case 0:return[4,this.getApiToken()];case 1:if(e.sent())return[3,2];throw new In("whew");case 2:return[4,this.apolloClient.mutate({mutation:Bn,variables:{identifier:t}})];case 3:return[2,e.sent()]}}))}))},this.deleteDefinedTermSet=function(e){return jn(n,void 0,void 0,(function(){return Dn(this,(function(t){switch(t.label){case 0:return[4,this.getApiToken()];case 1:if(t.sent())return[3,2];throw new In("whew");case 2:return[4,this.apolloClient.mutate({mutation:$n,variables:{identifier:e}})];case 3:return[2,t.sent()]}}))}))},this.createOrUpdateDefinedTerm=function(e,t){return jn(n,void 0,void 0,(function(){var n;return Dn(this,(function(r){switch(r.label){case 0:return[4,this.getApiToken()];case 1:if(r.sent())return[3,2];throw new In("whew");case 2:return[4,this.apolloClient.mutate({mutation:Mn,variables:{creator:t.creator,termCode:t.termCode,additionalType:t.additionalType}})];case 3:return n=r.sent(),[4,this.apolloClient.mutate({mutation:Pn,variables:{dtsId:e,dtId:n.data.CreateDefinedTerm.identifier}})];case 4:return r.sent(),[2,{data:n.data.CreateDefinedTerm}]}}))}))},this.createOrUpdateDefinedTermSet=function(e){return jn(n,void 0,void 0,(function(){return Dn(this,(function(t){switch(t.label){case 0:return[4,this.getApiToken()];case 1:if(t.sent())return[3,2];throw new In("whew");case 2:return[4,this.apolloClient.mutate({mutation:Nn,variables:{creator:e.creator,name:e.name,additionalType:e.additionalType}})];case 3:return[2,t.sent()]}}))}))},this.getDefinedTermSetsForUser=function(e,t){return jn(n,void 0,void 0,(function(){return Dn(this,(function(n){switch(n.label){case 0:return[4,this.getApiToken()];case 1:if(n.sent())return[3,2];throw new In("whew");case 2:return[4,this.apolloClient.query({query:Un,variables:{creator:e,additionalType:t}})];case 3:return[2,n.sent()]}}))}))},this.getAnnotationPaletteForUser=function(e){return n.getDefinedTermSetsForUser(e,"https://vocab.trompamusic.eu/vocab#AnnotationMotivationCollection")},this.getAnnotationToolkitForUser=function(e){return n.getDefinedTermSetsForUser(e,"https://vocab.trompamusic.eu/vocab#AnnotationToolkit")},this.getThingById=function(e){return jn(n,void 0,void 0,(function(){return Dn(this,(function(t){switch(t.label){case 0:return[4,this.getApiToken()];case 1:return t.sent(),[4,this.apolloClient.query({query:kn,variables:{id:e}})];case 2:return[2,t.sent()]}}))}))},this.getRatingDefinitionsForUser=function(e){return jn(n,void 0,void 0,(function(){return Dn(this,(function(t){switch(t.label){case 0:return[4,this.getApiToken()];case 1:if(t.sent())return[3,2];throw new In("whew");case 2:return[4,this.apolloClient.query({query:_n,variables:{creator:e}})];case 3:return[2,t.sent()]}}))}))},this.createRatingDefinition=function(e){return jn(n,void 0,void 0,(function(){return Dn(this,(function(t){switch(t.label){case 0:return[4,this.getApiToken()];case 1:if(t.sent())return[3,2];throw new In("whew");case 2:return[4,this.apolloClient.mutate({mutation:Xn,variables:{name:e.name,creator:e.creator,bestRating:e.bestRating,worstRating:e.worstRating,additionalType:"https://vocab.trompamusic.eu/vocab#RatingDefinition",description:e.description}})];case 3:return[2,t.sent()]}}))}))},this.deleteRating=function(e){return jn(n,void 0,void 0,(function(){return Dn(this,(function(t){switch(t.label){case 0:return[4,this.getApiToken()];case 1:if(t.sent())return[3,2];throw new In("whew");case 2:return[4,this.apolloClient.mutate({mutation:Kn,variables:{identifier:e}})];case 3:return[2,t.sent()]}}))}))},this.createMotivation=function(e){return jn(n,void 0,void 0,(function(){return Dn(this,(function(t){switch(t.label){case 0:return[4,this.getApiToken()];case 1:if(t.sent())return[3,2];throw new In("whew");case 2:return[4,this.apolloClient.mutate({mutation:nr,variables:{title:e.title,creator:e.creator,description:e.description,broaderUrl:e.broaderUrl,broaderMotivation:e.broaderMotivation}})];case 3:return[2,t.sent()]}}))}))},this.deleteMotivation=function(e){return jn(n,void 0,void 0,(function(){return Dn(this,(function(t){switch(t.label){case 0:return[4,this.getApiToken()];case 1:if(t.sent())return[3,2];throw new In("whew");case 2:return[4,this.apolloClient.mutate({mutation:tr,variables:{identifier:e}})];case 3:return[2,t.sent()]}}))}))},this.getMotivationsForUser=function(e){return jn(n,void 0,void 0,(function(){return Dn(this,(function(t){switch(t.label){case 0:return[4,this.getApiToken()];case 1:if(t.sent())return[3,2];throw new In("whew");case 2:return[4,this.apolloClient.query({query:er,variables:{creator:e}})];case 3:return[2,t.sent()]}}))}))},this.authProxyUrl=e,this.apolloClient=t,this.getApiToken()}e.annotationFromCE=function(e,t){var n,r,a=e.targetNode,i=e.targetUrl;if(void 0===a&&void 0===i)throw new TypeError("Annotation has no target");r=i?null===i||void 0===i?void 0:i.map((function(e){return new pt({id:e})})):null===a||void 0===a?void 0:a.map((function(e){var n,r,a;(null===e||void 0===e?void 0:e.fragment)&&(r=(n=pt.fragmentToStartAndEnd(e.fragment))[0],a=n[1]);var i="";if(null===e.field)i=t+(t.endsWith("/")?"":"/")+e.target.identifier;else if("url"===e.field)i=e.target.url;else if("source"===e.field)i=e.target.source;else{if("contentUrl"!==e.field)throw new TypeError("Unsupported targetNode field value");i=e.target.contentUrl}return{identifier:e.identifier,type:"AnnotationTarget",nodeId:e.target.identifier,fieldName:e.field,url:i,start:r,end:a}}));var o=[];e.bodyUrl&&e.bodyUrl.length>0?o=e.bodyUrl.map((function(e){return new mt({id:e})})):e.bodyText&&e.bodyText.length>0?o=e.bodyText.map((function(e){return{value:e.value,format:e.format,identifier:e.identifier,language:e.language,type:"TextualBody"}})):e.bodyNode&&e.bodyNode.length>0&&(o=e.bodyNode.map((function(e){return"DefinedTerm"===e.__typename?{identifier:e.identifier,type:"DefinedTerm",creator:e.creator,additionalType:e.additionalType,termCode:e.termCode}:"Rating"===e.__typename?{identifier:e.identifier,type:"Rating",creator:e.creator,bestRating:e.bestRating,worstRating:e.worstRating,name:e.name,additionalType:e.additionalType,ratingValue:e.ratingValue}:null})));var s,l=this.parseMotivationValue(e.motivation);if(e.motivationUrl&&e.motivationUrl.length>0)s=e.motivationUrl[0];else if(e.motivationDefinedTerm){var c=e.motivationDefinedTerm;s={type:"DefinedTerm",identifier:c.identifier,creator:c.creator,additionalType:c.additionalType,termCode:c.termCode}}else if(e.motivationNode&&e.motivationNode.length>0){var u=e.motivationNode[0];s={type:"AnnotationCEMotivation",identifier:u.identifier,creator:u.creator,description:u.description,title:u.title,broaderUrl:u.broaderUrl,broaderMotivation:u.broaderMotivation}}var d=new ht({identifier:e.identifier,target:r,creator:e.creator,created:null===(n=e.created)||void 0===n?void 0:n.formatted,motivation:l,customMotivation:s,body:o});return d.isNew=!1,d},e.parseMotivationValue=function(e){switch(e){case"commenting":return it.COMMENTING;case"describing":return it.DESCRIBING;case"tagging":return it.TAGGING;case"classifying":return it.CLASSIFYING;case"assessing":return it.ASSESSING;case"linking":return it.LINKING;default:throw new TypeError("Not known type")}}}(),Object(Sn.gql)(Ut||(Ut=On(["\n    query ThingInterface($id: ID!) {\n        ThingInterface(identifier: $id) {\n            __typename\n            identifier\n            source\n            name\n            title\n            ... on MediaObjectInterface {\n                contentUrl\n            }\n            ... on AudioObject {\n                contentUrl\n            }\n        }\n    }\n"],["\n    query ThingInterface($id: ID!) {\n        ThingInterface(identifier: $id) {\n            __typename\n            identifier\n            source\n            name\n            title\n            ... on MediaObjectInterface {\n                contentUrl\n            }\n            ... on AudioObject {\n                contentUrl\n            }\n        }\n    }\n"])))),xn=Object(Sn.gql)(Lt||(Lt=On(["\n    fragment DefinedTermFragment on DefinedTerm {\n        identifier\n        additionalType\n        termCode\n        image\n    }\n"],["\n    fragment DefinedTermFragment on DefinedTerm {\n        identifier\n        additionalType\n        termCode\n        image\n    }\n"]))),Rn=Object(Sn.gql)(qt||(qt=On(["\n    ","\n    fragment DefinedTermSetFragment on DefinedTermSet {\n        type: __typename\n        identifier\n        name\n        creator\n        additionalType\n        broaderUrl\n        broaderMotivation\n        hasDefinedTerm {\n            ...DefinedTermFragment\n        }\n    }\n"],["\n    ","\n    fragment DefinedTermSetFragment on DefinedTermSet {\n        type: __typename\n        identifier\n        name\n        creator\n        additionalType\n        broaderUrl\n        broaderMotivation\n        hasDefinedTerm {\n            ...DefinedTermFragment\n        }\n    }\n"])),xn),Nn=Object(Sn.gql)(Ft||(Ft=On(["\n    ","\n    mutation CreateDefinedTermSet($creator: String!, $name: String!, $additionalType: String!) {\n        CreateDefinedTermSet(\n            additionalType: [$additionalType]\n            creator: $creator\n            name: $name\n        ) {\n            ...DefinedTermSetFragment\n        }\n    }\n"],["\n    ","\n    mutation CreateDefinedTermSet($creator: String!, $name: String!, $additionalType: String!) {\n        CreateDefinedTermSet(\n            additionalType: [$additionalType]\n            creator: $creator\n            name: $name\n        ) {\n            ...DefinedTermSetFragment\n        }\n    }\n"])),Rn),$n=(Object(Sn.gql)(Ht||(Ht=On(["\n    ","\n    mutation UpdateDefinedTermSet($identifier: ID!, $creator: String!, $name: String!, $additionalType: String!) {\n        UpdateDefinedTermSet(\n            identifier: $identifier\n            additionalType: [$additionalType]\n            creator: $creator\n            name: $name\n        ) {\n            ...DefinedTermSetFragment\n        }\n    }\n"],["\n    ","\n    mutation UpdateDefinedTermSet($identifier: ID!, $creator: String!, $name: String!, $additionalType: String!) {\n        UpdateDefinedTermSet(\n            identifier: $identifier\n            additionalType: [$additionalType]\n            creator: $creator\n            name: $name\n        ) {\n            ...DefinedTermSetFragment\n        }\n    }\n"])),Rn),Object(Sn.gql)(Wt||(Wt=On(["\n    mutation DeleteDefinedTermSet($identifier: ID!) {\n        DeleteDefinedTermSet(identifier: $identifier) {\n            identifier\n        }\n    }\n"],["\n    mutation DeleteDefinedTermSet($identifier: ID!) {\n        DeleteDefinedTermSet(identifier: $identifier) {\n            identifier\n        }\n    }\n"])))),Mn=Object(Sn.gql)(Vt||(Vt=On(["\n    mutation CreateDefinedTerm($creator: String!, $additionalType: String!, $termCode: String!, $image: String) {\n        CreateDefinedTerm(\n            additionalType: [$additionalType]\n            creator: $creator\n            termCode: $termCode\n            image: $image\n        ) {\n            identifier\n            additionalType\n            creator\n            termCode\n            image\n        }\n    }\n"],["\n    mutation CreateDefinedTerm($creator: String!, $additionalType: String!, $termCode: String!, $image: String) {\n        CreateDefinedTerm(\n            additionalType: [$additionalType]\n            creator: $creator\n            termCode: $termCode\n            image: $image\n        ) {\n            identifier\n            additionalType\n            creator\n            termCode\n            image\n        }\n    }\n"]))),Bn=(Object(Sn.gql)(Qt||(Qt=On(["\n    mutation UpdateDefinedTerm($identifier: ID!, $creator: String!, $additionalType: String!, $termCode: String, $image: String) {\n        UpdateDefinedTerm(\n            identifier: $identifier\n            additionalType: [$additionalType]\n            creator: $creator\n            termCode: $termCode\n            image: $image\n        ) {\n            identifier\n        }\n    }\n"],["\n    mutation UpdateDefinedTerm($identifier: ID!, $creator: String!, $additionalType: String!, $termCode: String, $image: String) {\n        UpdateDefinedTerm(\n            identifier: $identifier\n            additionalType: [$additionalType]\n            creator: $creator\n            termCode: $termCode\n            image: $image\n        ) {\n            identifier\n        }\n    }\n"]))),Object(Sn.gql)(zt||(zt=On(["\n    mutation DeleteDefinedTerm($identifier: ID!) {\n        DeleteDefinedTerm(identifier: $identifier) {\n            identifier\n        }\n    }\n"],["\n    mutation DeleteDefinedTerm($identifier: ID!) {\n        DeleteDefinedTerm(identifier: $identifier) {\n            identifier\n        }\n    }\n"])))),Pn=Object(Sn.gql)(Gt||(Gt=On(["\n    mutation MergeDefinedTermSetHasDefinedTerm($dtsId: ID!, $dtId: ID!) {\n        MergeDefinedTermSetHasDefinedTerm(\n            from: {identifier: $dtsId}\n            to: {identifier: $dtId}\n        ) {\n            from {\n                identifier\n            }\n            to {\n                identifier\n            }\n        }\n    }\n"],["\n    mutation MergeDefinedTermSetHasDefinedTerm($dtsId: ID!, $dtId: ID!) {\n        MergeDefinedTermSetHasDefinedTerm(\n            from: {identifier: $dtsId}\n            to: {identifier: $dtId}\n        ) {\n            from {\n                identifier\n            }\n            to {\n                identifier\n            }\n        }\n    }\n"]))),Un=Object(Sn.gql)(Jt||(Jt=On(["\n    ","\n    query DefinedTermSet($creator: String!, $additionalType: String!) {\n        DefinedTermSet(creator: $creator filter: {additionalType_contains: [$additionalType]}) {\n            ...DefinedTermSetFragment\n        }\n    }\n"],["\n    ","\n    query DefinedTermSet($creator: String!, $additionalType: String!) {\n        DefinedTermSet(creator: $creator filter: {additionalType_contains: [$additionalType]}) {\n            ...DefinedTermSetFragment\n        }\n    }\n"])),Rn),Ln=Object(Sn.gql)(Zt||(Zt=On(["\n    mutation CreateAnnotationTextualBody($creator: String!, $value: String!, $format: String, $language: AvailableLanguage){\n        CreateAnnotationTextualBody(\n            creator: $creator\n            value: $value\n            format: $format\n            language: $language\n        ) {\n            identifier\n        }\n    }\n"],["\n    mutation CreateAnnotationTextualBody($creator: String!, $value: String!, $format: String, $language: AvailableLanguage){\n        CreateAnnotationTextualBody(\n            creator: $creator\n            value: $value\n            format: $format\n            language: $language\n        ) {\n            identifier\n        }\n    }\n"]))),qn=Object(Sn.gql)(Yt||(Yt=On(["\n    mutation CreateAnnotationCETarget($creator: String!, $field: String, $fragment: String) {\n        CreateAnnotationCETarget(\n            creator: $creator\n            field: $field\n            fragment: $fragment\n        ) {\n            identifier\n        }\n    }\n"],["\n    mutation CreateAnnotationCETarget($creator: String!, $field: String, $fragment: String) {\n        CreateAnnotationCETarget(\n            creator: $creator\n            field: $field\n            fragment: $fragment\n        ) {\n            identifier\n        }\n    }\n"]))),Fn=Object(Sn.gql)(_t||(_t=On(["\n    mutation MergeAnnotationCETargetTarget($annotationCeTargetId: ID!, $ceNodeId: ID!) {\n        MergeAnnotationCETargetTarget(\n            from: {identifier: $annotationCeTargetId}\n            to: {identifier: $ceNodeId}\n        ) {\n            from {identifier}\n            to {identifier}\n        }\n    }\n"],["\n    mutation MergeAnnotationCETargetTarget($annotationCeTargetId: ID!, $ceNodeId: ID!) {\n        MergeAnnotationCETargetTarget(\n            from: {identifier: $annotationCeTargetId}\n            to: {identifier: $ceNodeId}\n        ) {\n            from {identifier}\n            to {identifier}\n        }\n    }\n"]))),Hn=Object(Sn.gql)(Kt||(Kt=On(["\n    mutation CreateAnnotation($creator: String!, $motivation: AnnotationMotivation!) {\n        CreateAnnotation(\n            creator: $creator\n            motivation: $motivation\n        ) {\n            identifier\n        }\n    }\n"],["\n    mutation CreateAnnotation($creator: String!, $motivation: AnnotationMotivation!) {\n        CreateAnnotation(\n            creator: $creator\n            motivation: $motivation\n        ) {\n            identifier\n        }\n    }\n"]))),Wn=Object(Sn.gql)(Xt||(Xt=On(["\n    mutation DeleteAnnotation($annotationId: ID!) {\n        DeleteAnnotation(identifier: $annotationId) {\n            identifier\n        }\n    }\n"],["\n    mutation DeleteAnnotation($annotationId: ID!) {\n        DeleteAnnotation(identifier: $annotationId) {\n            identifier\n        }\n    }\n"]))),Vn=Object(Sn.gql)(en||(en=On(["\n    mutation MergeAnnotationTargetNode($annotationId: ID!, $targetNodeId: ID!){\n        MergeAnnotationTargetNode(\n            from: {identifier: $annotationId}\n            to: {identifier: $targetNodeId}\n        ) {\n            from {\n                identifier\n            }\n            to {\n                identifier\n            }\n        }\n    }\n"],["\n    mutation MergeAnnotationTargetNode($annotationId: ID!, $targetNodeId: ID!){\n        MergeAnnotationTargetNode(\n            from: {identifier: $annotationId}\n            to: {identifier: $targetNodeId}\n        ) {\n            from {\n                identifier\n            }\n            to {\n                identifier\n            }\n        }\n    }\n"]))),Qn=Object(Sn.gql)(tn||(tn=On(["\n    mutation MergeAnnotationBodyText($annotationId: ID!, $bodyNodeId: ID!){\n        MergeAnnotationBodyText(\n            from: {identifier: $annotationId}\n            to: {identifier: $bodyNodeId}\n        ) {\n            from {\n                identifier\n            }\n            to {\n                identifier\n            }\n        }\n    }\n"],["\n    mutation MergeAnnotationBodyText($annotationId: ID!, $bodyNodeId: ID!){\n        MergeAnnotationBodyText(\n            from: {identifier: $annotationId}\n            to: {identifier: $bodyNodeId}\n        ) {\n            from {\n                identifier\n            }\n            to {\n                identifier\n            }\n        }\n    }\n"]))),zn="\n\tidentifier\n\tcreator\n\tcreated {\n\t\tformatted\n\t}\n\ttargetUrl\n\ttargetNode {\n\t\ttarget {\n\t\t\t__typename\n\t\t\tidentifier\n\t\t\turl\n\t\t\tsource\n\t\t\t... on MediaObject {\n\t\t\t    contentUrl\n\t\t\t}\n\t\t\t... on AudioObject {\n\t\t\t    contentUrl\n\t\t\t}\n\t\t}\n\t\tfield\n\t\tfragment\n\t}\n    motivation\n    motivationUrl\n    motivationNode {\n      identifier\n      creator\n      broaderMotivation\n      broaderUrl\n      title\n      description\n    }\n    motivationDefinedTerm {\n      identifier\n      broaderMotivation\n      termCode\n      broaderUrl\n      additionalType\n    }\n\tbodyUrl\n\tbodyText {\n\t\tidentifier\n\t\tvalue\n\t\tformat\n\t\tlanguage\n\t}\n\tbodyNode {\n\t\t__typename\n\t\tidentifier\n\t\t... on DefinedTerm {\n\t\t\ttermCode\n\t\t\tadditionalType\n\t\t\tinDefinedTermSet {\n\t\t\t\t... on DefinedTermSet {\n\t\t\t\t\tidentifier\n\t\t\t\t\tadditionalType\n\t\t\t\t\tname\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t... on Rating {\n\t\t    creator\n\t\t\tratingValue\n\t\t\tbestRating\n\t\t\tworstRating\n\t\t\tadditionalType\n\t\t}\n\t}\n",Gn=Object(Sn.gql)(nn||(nn=On(["\n    query AnnotationForCreator($creator: String!) {\n        Annotation(creator: $creator) {\n            ","\n        }\n    }\n"],["\n    query AnnotationForCreator($creator: String!) {\n        Annotation(creator: $creator) {\n            ","\n        }\n    }\n"])),zn),Jn=Object(Sn.gql)(rn||(rn=On(["\n    query AnnotationForNode($nodeId: String!) {\n        Annotation(filter:{targetNode:{target:{identifier:$nodeId}}}) {\n            ","\n        }\n    }\n"],["\n    query AnnotationForNode($nodeId: String!) {\n        Annotation(filter:{targetNode:{target:{identifier:$nodeId}}}) {\n            ","\n        }\n    }\n"])),zn),Zn=Object(Sn.gql)(an||(an=On(["\n    query Annotation($annotationId: ID!) {\n        Annotation(identifier: $annotationId) {\n            ","\n        }\n    }\n"],["\n    query Annotation($annotationId: ID!) {\n        Annotation(identifier: $annotationId) {\n            ","\n        }\n    }\n"])),zn),Yn=Object(Sn.gql)(on||(on=On(["\n    query AnnotationToolkitForItem($itemId: ID!) {\n        ItemList(identifier:$itemId) {\n            additionalType\n            identifier\n            name\n            itemListElement {\n                ... on ListItem {\n                    identifier\n                    name\n                    itemUrl\n                    item {\n                        __typename\n                        identifier\n                        ... on DefinedTermSet {\n                            name\n                            additionalType\n                            hasDefinedTerm {\n                                identifier\n                                broaderUrl\n                                broaderMotivation\n                                termCode\n                                image\n                            }\n                        }\n                        ... on Rating {\n                            name\n                            worstRating\n                            bestRating\n                        }\n                    }\n                }\n            }\n        }\n    }\n"],["\n    query AnnotationToolkitForItem($itemId: ID!) {\n        ItemList(identifier:$itemId) {\n            additionalType\n            identifier\n            name\n            itemListElement {\n                ... on ListItem {\n                    identifier\n                    name\n                    itemUrl\n                    item {\n                        __typename\n                        identifier\n                        ... on DefinedTermSet {\n                            name\n                            additionalType\n                            hasDefinedTerm {\n                                identifier\n                                broaderUrl\n                                broaderMotivation\n                                termCode\n                                image\n                            }\n                        }\n                        ... on Rating {\n                            name\n                            worstRating\n                            bestRating\n                        }\n                    }\n                }\n            }\n        }\n    }\n"]))),_n=Object(Sn.gql)(sn||(sn=On(['\n    query RatingDefinitionsForUser($creator: String!) {\n        Rating(creator: $creator, filter: {additionalType_contains: ["','"]}) {\n            identifier\n            creator\n            additionalType\n            name\n            description\n            bestRating\n            worstRating\n        }\n    }\n'],['\n    query RatingDefinitionsForUser($creator: String!) {\n        Rating(creator: $creator, filter: {additionalType_contains: ["','"]}) {\n            identifier\n            creator\n            additionalType\n            name\n            description\n            bestRating\n            worstRating\n        }\n    }\n'])),"https://vocab.trompamusic.eu/vocab#RatingDefinition"),Kn=Object(Sn.gql)(ln||(ln=On(["\n    mutation DeleteRating($identifier: ID!) {\n        DeleteRating(identifier: $identifier) {\n            identifier\n        }\n    }\n"],["\n    mutation DeleteRating($identifier: ID!) {\n        DeleteRating(identifier: $identifier) {\n            identifier\n        }\n    }\n"]))),Xn=Object(Sn.gql)(cn||(cn=On(["\n    mutation CreateRating($name: String!, $creator: String!, $bestRating: Int!, $worstRating: Int!, \n        $ratingValue: Int, $additionalType: String!, $description: String\n    ) {\n        CreateRating(\n            creator: $creator\n            name: $name\n            bestRating: $bestRating\n            worstRating: $worstRating\n            additionalType: [$additionalType]\n            description: $description\n            ratingValue: $ratingValue\n        ) {\n            identifier\n            creator\n            name\n            description\n            bestRating\n            worstRating\n            ratingValue\n            additionalType\n        }\n    }\n"],["\n    mutation CreateRating($name: String!, $creator: String!, $bestRating: Int!, $worstRating: Int!, \n        $ratingValue: Int, $additionalType: String!, $description: String\n    ) {\n        CreateRating(\n            creator: $creator\n            name: $name\n            bestRating: $bestRating\n            worstRating: $worstRating\n            additionalType: [$additionalType]\n            description: $description\n            ratingValue: $ratingValue\n        ) {\n            identifier\n            creator\n            name\n            description\n            bestRating\n            worstRating\n            ratingValue\n            additionalType\n        }\n    }\n"]))),er=Object(Sn.gql)(un||(un=On(["\n    query AnnotationCEMotivationForUser($creator: String!) {\n        AnnotationCEMotivation(creator: $creator) {\n            identifier\n            creator\n            created {formatted}\n            title\n            description\n            broaderUrl\n            broaderMotivation\n        }\n    }\n"],["\n    query AnnotationCEMotivationForUser($creator: String!) {\n        AnnotationCEMotivation(creator: $creator) {\n            identifier\n            creator\n            created {formatted}\n            title\n            description\n            broaderUrl\n            broaderMotivation\n        }\n    }\n"]))),tr=Object(Sn.gql)(dn||(dn=On(["\n    mutation AnnotationCEMotivation($identifier: ID!) {\n        DeleteAnnotationCEMotivation(identifier: $identifier) {\n            identifier\n        }\n    }\n"],["\n    mutation AnnotationCEMotivation($identifier: ID!) {\n        DeleteAnnotationCEMotivation(identifier: $identifier) {\n            identifier\n        }\n    }\n"]))),nr=Object(Sn.gql)(fn||(fn=On(["\n    mutation CreateAnnotationCEMotivation($title: String!, $creator: String!, $description: String,\n        $broaderUrl: String, $broaderMotivation: AnnotationMotivation\n    ) {\n        CreateAnnotationCEMotivation(\n            creator: $creator\n            title: $title\n            description: $description\n            broaderUrl: $broaderUrl\n            broaderMotivation: $broaderMotivation\n        ) {\n            identifier\n            creator\n            created {formatted}\n            title\n            description\n            broaderUrl\n            broaderMotivation\n        }\n    }\n"],["\n    mutation CreateAnnotationCEMotivation($title: String!, $creator: String!, $description: String,\n        $broaderUrl: String, $broaderMotivation: AnnotationMotivation\n    ) {\n        CreateAnnotationCEMotivation(\n            creator: $creator\n            title: $title\n            description: $description\n            broaderUrl: $broaderUrl\n            broaderMotivation: $broaderMotivation\n        ) {\n            identifier\n            creator\n            created {formatted}\n            title\n            description\n            broaderUrl\n            broaderMotivation\n        }\n    }\n"]))),rr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ar=function(){return(ar=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},ir=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(t){i(t)}}function s(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},or=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},sr=function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},lr=(function(e){function t(t){var n=e.call(this,t)||this;return n.createDefinedTermSet=function(){return ir(n,void 0,void 0,(function(){var e,t,n,r;return or(this,(function(a){switch(a.label){case 0:e={type:"DefinedTermSet",creator:this.props.webId,additionalType:"https://vocab.trompamusic.eu/vocab#TagCollection",name:this.state.newDtsName,hasDefinedTerm:[]},a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.props.trompaClient.createOrUpdateDefinedTermSet(e)];case 2:return t=a.sent(),n=[],void 0!==this.state.data&&(n=this.state.data.slice()),r=sr(sr([],n),[t.data.CreateDefinedTermSet]),this.setState({data:r,newDtsName:""}),[3,4];case 3:return a.sent(),[3,4];case 4:return[2]}}))}))},n.createDefinedTerm=function(){return ir(n,void 0,void 0,(function(){var e,t,n,r,a,i,o;return or(this,(function(s){switch(s.label){case 0:if(void 0===this.state.selectedDts)return[2];e=sr([],this.state.data),t=ar({},e[this.state.selectedDts]),n=t.identifier,r={type:"DefinedTerm",creator:this.props.webId,additionalType:"https://vocab.trompamusic.eu/vocab#TagCollectionElement",termCode:this.state.newDtName},s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.props.trompaClient.createOrUpdateDefinedTerm(n,r)];case 2:return a=s.sent(),i=[],t.hasDefinedTerm.length&&(i=t.hasDefinedTerm.slice()),t.hasDefinedTerm=sr(sr([],i),[a.data]),e[this.state.selectedDts]=t,this.setState({data:e,newDtName:""}),[3,4];case 3:return o=s.sent(),console.error("Error when creating DefinedTerm"),console.error(o),[3,4];case 4:return[2]}}))}))},n.deleteDefinedTermSet=function(e,t){return ir(n,void 0,void 0,(function(){var n,r;return or(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.props.trompaClient.deleteDefinedTermSet(e)];case 1:return a.sent(),(n=this.state.data.slice()).splice(t,1),this.setState({data:n}),[3,3];case 2:return r=a.sent(),console.debug("error while deleting a DTS"),console.error(r),[3,3];case 3:return[2]}}))}))},n.deleteDefinedTerm=function(e,t){return ir(n,void 0,void 0,(function(){var n,r,a,i;return or(this,(function(o){switch(o.label){case 0:if(void 0===this.state.selectedDts)return[2];n=sr([],this.state.data),r=ar({},n[this.state.selectedDts]),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.props.trompaClient.deleteDefinedTerm(r.identifier,e)];case 2:return o.sent(),(a=r.hasDefinedTerm.slice()).splice(t,1),r.hasDefinedTerm=a,n[this.state.selectedDts]=r,this.setState({data:n}),[3,4];case 3:return i=o.sent(),console.error("Error deleting DefinedTerm"),console.error(i),[3,4];case 4:return[2]}}))}))},n.setSelectedDts=function(e){n.setState({selectedDts:e})},n.updateNewDtsName=function(e){n.setState({newDtsName:e.target.value})},n.updateNewDtName=function(e){n.setState({newDtName:e.target.value})},n.state={data:[],selectedDts:void 0,newDtsName:"",newDtName:"",error:!1},n}rr(t,e),t.prototype.componentDidMount=function(){return ir(this,void 0,void 0,(function(){var e;return or(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.props.trompaClient.getDefinedTermSetsForUser(this.props.webId,"https://vocab.trompamusic.eu/vocab#TagCollection")];case 1:return e=t.sent(),this.setState({data:e.data.DefinedTermSet}),[3,3];case 2:return t.sent(),this.setState({error:!0}),[3,3];case 3:return[2]}}))}))},t.prototype.render=function(){var e,t=this;return Object(gt.jsxs)(St.a,{children:[Object(gt.jsx)(Ct.a,ar({lg:6},{children:Object(gt.jsxs)(At.a,{children:[" ",this.state.data&&this.state.data.map((function(e,n){return Object(gt.jsx)(At.a.Item,ar({action:!0,as:"a",active:t.state.selectedDts===n,onClick:function(){return t.setSelectedDts(n)}},{children:Object(gt.jsxs)(St.a,{children:[Object(gt.jsxs)(Ct.a,{children:[e.name,Object(gt.jsx)("br",{},void 0),Object(gt.jsxs)("small",{children:["id: ",e.identifier]},void 0)]},void 0),Object(gt.jsx)(Ct.a,ar({xs:3},{children:Object(gt.jsx)(gn.a,ar({variant:"outline-danger",size:"sm",onClick:function(r){t.deleteDefinedTermSet(e.identifier,n),t.setSelectedDts(void 0),r.stopPropagation()}},{children:"Delete"}),void 0)}),void 0)]},void 0)}),e.identifier)})),Object(gt.jsx)(At.a.Item,ar({action:!0,as:"a"},{children:Object(gt.jsxs)(En.a,{children:[Object(gt.jsx)(An.a,{placeholder:"New Category","aria-label":"New Category",type:"text",value:this.state.newDtsName,onChange:this.updateNewDtsName},void 0),Object(gt.jsx)(gn.a,ar({variant:"outline-success",onClick:this.createDefinedTermSet},{children:"Create"}),void 0)]},void 0)}),void 0)]},void 0)}),void 0),Object(gt.jsx)(Ct.a,{children:void 0!==this.state.selectedDts&&this.state.data&&this.state.data[this.state.selectedDts]&&Object(gt.jsxs)(gt.Fragment,{children:[Object(gt.jsx)("h4",{children:"DefinedTerms"},void 0),Object(gt.jsxs)(At.a,{children:[null===(e=this.state.data[this.state.selectedDts].hasDefinedTerm)||void 0===e?void 0:e.map((function(e,n){return Object(gt.jsx)(At.a.Item,ar({action:!0,as:"a"},{children:Object(gt.jsxs)(St.a,{children:[Object(gt.jsx)(Ct.a,{children:e.termCode},void 0),Object(gt.jsx)(Ct.a,ar({xs:3},{children:Object(gt.jsx)(gn.a,ar({variant:"outline-danger",size:"sm",onClick:function(){t.deleteDefinedTerm(e.identifier,n)}},{children:"Delete"}),void 0)}),void 0)]},void 0)}),e.identifier)})),Object(gt.jsx)(At.a.Item,ar({action:!0,as:"a"},{children:Object(gt.jsxs)(En.a,{children:[Object(gt.jsx)(An.a,{placeholder:"New Category","aria-label":"New Category",type:"text",value:this.state.newDtName,onChange:this.updateNewDtName},void 0),Object(gt.jsx)(gn.a,ar({variant:"outline-success",onClick:this.createDefinedTerm},{children:"Create"}),void 0)]},void 0)}),void 0)]},void 0)]},void 0)},void 0)]},void 0)}}(vt.Component),n(517),function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}),cr=(function(){function e(){}e.filters=[{onProperty:"format",name:"format"}],e.searchAllQuery=Object(Sn.gql)(mn||(mn=lr(["\n        query($query: String!, $first: Int = 9999) {\n            allResults: searchMetadataText(onTypes: [AudioObject], onFields: [title], substring: $query, first: $first) {\n                ... on AudioObject {\n                    identifier\n                    format\n                    _searchScore\n                }\n            }\n        }\n    "],["\n        query($query: String!, $first: Int = 9999) {\n            allResults: searchMetadataText(onTypes: [AudioObject], onFields: [title], substring: $query, first: $first) {\n                ... on AudioObject {\n                    identifier\n                    format\n                    _searchScore\n                }\n            }\n        }\n    "]))),e.searchQuery=Object(Sn.gql)(pn||(pn=lr(["\n        query($filter: _AudioObjectFilter) {\n            results: AudioObject(filter: $filter, first: 50) {\n                __typename\n                ... on AudioObject {\n                    identifier\n                    name\n                    title\n                    contributor\n                    creator\n                    source\n                    contentUrl\n                    format\n                    encodingFormat\n                }\n            }\n        }\n    "],["\n        query($filter: _AudioObjectFilter) {\n            results: AudioObject(filter: $filter, first: 50) {\n                __typename\n                ... on AudioObject {\n                    identifier\n                    name\n                    title\n                    contributor\n                    creator\n                    source\n                    contentUrl\n                    format\n                    encodingFormat\n                }\n            }\n        }\n    "])))}(),n(117)),ur=n(530),dr=n(966),fr=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(t){i(t)}}function s(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},mr=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};!function(e){e.POST="POST",e.GET="GET",e.PUT="PUT",e.DELETE="DELETE",e.PATCH="PATCH"}(hn||(hn={}));var pr,hr=function(e){var t=this;this.solidRESTInteraction=function(e,n,r,a){return fr(t,void 0,void 0,(function(){var t;return mr(this,(function(i){if(r["content-type"]="application/ld+json",r.accept="application/ld+json","POST"===n){if(!a||!("@id"in a))return console.warn('Cowardly refusing to POST without a JSON-LD payload with an "@id" set.'),[2,null];"Slug"in r&&a["@id"]!==r.Slug?console.debug('Mismatch between top-level payload "@id" and Slug header. I hope you know what you are doing...'):"Slug"in r||(r.Slug=a["@id"].substring(a["@id"].lastIndexOf("/")+1))}return t={method:n,headers:r},a&&(t.body=JSON.stringify(a)),[2,this.session.fetch(e.toString(),t).then((function(e){return e})).catch((function(e){return console.error("Error with solidInteraction:",e),e}))]}))}))},this.isPublicReadable=function(e){return fr(t,void 0,void 0,(function(){return mr(this,(function(t){switch(t.label){case 0:return[4,cr.a.getPublicAccess(e.toString(),{fetch:this.session.fetch}).then((function(t){return null===t?(console.warn("Could not check whether the following resource is public readable. User may not have view access, or resource access may have been modified with incompatible Solid authn library.",e),!1):t.read}))];case 1:return[2,t.sent()]}}))}))},this.userControlsAccess=function(e){return fr(t,void 0,void 0,(function(){return mr(this,(function(t){switch(t.label){case 0:return[4,cr.a.getAgentAccess(e.toString(),this.session.info.webId.toString(),{fetch:this.session.fetch}).then((function(t){return null===t?(console.warn("Could not check whether the user controls access over the following resource. Have you turned on 'Control' for this URI in the Solid Pod's trusted application preferences? Otherwise, resource access may have been modified with incompatible Solid authn library.",e),!1):t.controlRead}))];case 1:return[2,t.sent()]}}))}))},this.grantPublicReadable=function(e){return fr(t,void 0,void 0,(function(){return mr(this,(function(t){return cr.a.setPublicAccess(e.toString(),{read:!0,write:!1},{fetch:this.session.fetch}).then((function(t){null===t?console.warn("Could not load access details for resource at ",e.toString()):console.debug("After revokePublicReadable on ",e.toString()," public access is: ",t)})),[2]}))}))},this.revokePublicReadable=function(e){return fr(t,void 0,void 0,(function(){return mr(this,(function(t){return cr.a.setPublicAccess(e.toString(),{read:!1,write:!1},{fetch:this.session.fetch}).then((function(t){null===t?console.warn("Could not load access details for resource at ",e.toString()):console.debug("After revokePublicReadable on ",e.toString()," public access is: ",t)})),[2]}))}))},this.saveAnnotation=function(e,n){return fr(t,void 0,void 0,(function(){var t,r,a,i,o;return mr(this,(function(s){switch(s.label){case 0:return t=this.session.info.webId.split("#")[0],[4,Object(cr.c)(t,{fetch:this.session.fetch})];case 1:return r=s.sent(),a=Object(cr.d)(r,this.session.info.webId),n.startsWith("/")||(n="/"+n),a?(o=Object(cr.e)(a,ur.a.storage))?i=new URL(new URL(o).origin+n):(console.error("Could not determine POD URL from user's webId profile. Dangerously hacking it from webId URL instead!"),i=new URL(new URL(this.session.info.webId).origin+n)):(console.error("Could not access user's profile. Dangerously hacking POD URL from webId URL instead!"),i=new URL(new URL(this.session.info.webId).origin+n)),e["@id"]="@id"in e?e["@id"].toString():i.origin+n+Object(dr.a)().toString()+".jsonld",e["@context"]="http://www.w3.org/ns/anno.jsonld",e["@type"]="Annotation",[2,this.solidRESTInteraction(i,hn.POST,{},e)]}}))}))},this.deleteAnnotation=function(e){return fr(t,void 0,void 0,(function(){return mr(this,(function(t){return console.debug("Trying to delete annotation at URL: ",e.toString()),[2,this.solidRESTInteraction(e,hn.DELETE,{},null)]}))}))},this.fetchAnnotation=function(e){return fr(t,void 0,void 0,(function(){return mr(this,(function(t){switch(t.label){case 0:return console.debug("Trying to fetch annotation at URL: ",e.toString()),[4,this.solidRESTInteraction(e,hn.GET,{},null)];case 1:return[2,t.sent()]}}))}))},this.fetchAnnotations=function(e,n){return fr(t,void 0,void 0,(function(){var t,r,a,i,o,s=this;return mr(this,(function(l){switch(l.label){case 0:return[4,Object(cr.c)(e.toString(),{fetch:this.session.fetch})];case 1:return t=l.sent(),[4,Object(cr.b)(t)];case 2:return r=l.sent(),a=r.map((function(e){return s.fetchAnnotation(new URL(e))})),[4,Promise.all(a).then((function(e){var t=e.filter((function(e){return e.status>=400&&console.error("Could not fetch annotation:",e),e.status<400})).map((function(e){return e.body.getReader().read()}));return Promise.all(t).then((function(e){return e.map((function(e){var t=new TextDecoder("utf-8").decode(e.value);try{return JSON.parse(t)}catch(l){return console.error("Error parsing json document, skipping"),console.log(t),null}})).filter((function(e){return null!==e}))}))}))];case 3:return i=l.sent(),o=i.filter((function(e){var t=!0;return Object.keys(n).forEach((function(r){if(r in e){var a=Array.isArray(e[r])?e[r]:[e[r]];(Array.isArray(n[r])?n[r]:[n[r]]).forEach((function(e){a.includes(e)||(t=!1)}))}else t=!1})),t})),console.debug("fetchAnnotations returning the following filtered list of annotations:",o),[2,o]}}))}))},this.session=e},gr=window.outerHeight,vr=window.outerWidth,br=gr<1439?2e3:2500,yr=vr>1925?2800:2e3;!function(e){e.Annotate="Annotate",e.Search="Search",e.Ready="Ready"}(pr||(pr={}));var wr=function(e){Object(Y.a)(n,e);var t=Object(_.a)(n);function n(e){var r;return Object(I.a)(this,n),(r=t.call(this,e)).player=a.a.createRef(),r.zoomIn=function(){var e=r.state.vrvOptions.scale,t=r.state.vrvOptions.pageHeight,n=r.state.vrvOptions.pageWidth,a=Object.assign({},r.state.vrvOptions);a.scale=e+5,a.pageHeight=t-5*a.scale,a.pageWidth=n-2*a.scale,a.scale<50&&(a.pageWidth=n-5*a.scale),a.scale<40&&(a.pageHeight=t-8*a.scale,a.pageWidth=n-5*a.scale),vr>=1925&&a.pageWidth>3500&&(a.pageWidth=3500),a.scale>=80?console.log("max zoom reached"):(console.log("ZOOM INCREASE",a.scale,"page w",a.pageWidth,"page h",a.pageHeight),r.setState({vrvOptions:a}))},r.zoomOut=function(){var e=r.state.vrvOptions.scale,t=r.state.vrvOptions.pageHeight,n=r.state.vrvOptions.pageWidth,a=Object.assign({},r.state.vrvOptions);a.scale=e-5,a.pageHeight=t+5*a.scale,a.pageWidth=n+2*a.scale,a.scale<50&&(a.pageWidth=n+5*a.scale),a.scale<40&&(a.pageHeight=t+8*a.scale,a.pageWidth=n+5*a.scale),a.scale<=25?console.log("minimum zoom reached"):(console.log("ZOOM DECREASE",a.scale,"page w",a.pageWidth,"page h",a.pageHeight),r.setState({vrvOptions:a}))},r.showReplyHandler=function(){r.setState({areRepliesVisible:!r.state.areRepliesVisible})},r.onAnnoReplyHandler=function(e,t){r.setState({replyAnnotationTarget:e,replyAnnotationTargetId:t})},r.saveAnnotation=function(){var e=Object(G.a)(z.a.mark((function e(t){var n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("selectable score: about to save an annotation"),console.log(t),n=new hr(r.props.solidSession),e.next=5,n.saveAnnotation(t,r.props.submitUri);case 5:return e.next=7,r.onRefreshClick();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.onRefreshClick=Object(G.a)(z.a.mark((function e(){var t,n,a,i;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new hr(r.props.solidSession),(n=new URL(r.props.solidSession.info.webId).origin).endsWith("/")||(n+="/"),a=n+r.props.submitUri,e.next=6,t.fetchAnnotations(new URL(a),{});case 6:i=e.sent,console.log("loaded annotations"),console.log(i),r.setState({replyAnnotationTarget:[],replyAnnotationTargetId:"",annoToDisplay:[]}),r.onReceiveAnnotationContainerContent(i);case 11:case"end":return e.stop()}}),e)}))),r.onMediaClick=function(e){console.log("button click",e);var t=e.split("#")[0],n=e.split("#")[1].replace("t=","");console.log("Setting up seek to: ",t,n),r.setState({currentMedia:t},(function(){r.player.current&&r.player.current.seekTo(parseInt(n,10))}))},r.onReceiveAnnotationContainerContent=function(e){if(!e||!e.length)return alert("no annotation to retrieve"),Array.from(document.getElementsByClassName("inFocus")).forEach((function(e){return e.classList.remove("inFocus")})),document.querySelectorAll(".measureBox").forEach((function(e){return e.remove()})),void document.querySelectorAll(".measureBoxBackground").forEach((function(e){return e.remove()}));var t=(e=e.filter((function(e){return e&&e["@id"].endsWith(".jsonld")}))).map((function(e){var t=[];if("replying"!==e.motivation){var n=e.target.map((function(e){var t=e.id,n=t.substr(t.lastIndexOf("#")),r=document.querySelector(n),a=null;return r&&(a=r.closest(".measure")),a})).filter((function(e){return e}));t=Array.from(new Set(n))}return{annoId:e["@id"],measures:t}})),n={};t.forEach((function(e){e.measures.forEach((function(t){var r=t.getAttribute("id");r in n?n[r].push(e.annoId):n[r]=[e.annoId]}))})),r.setState({currentAnnotation:e,measuresToAnnotationsMap:n},(function(){Array.from(document.getElementsByClassName("inFocus")).forEach((function(e){return e.classList.remove("inFocus")})),document.querySelectorAll(".measureBox").forEach((function(e){return e.remove()})),document.querySelectorAll(".measureBoxBackground").forEach((function(e){return e.remove()})),console.log("Mapped annotations ",n),console.log("current annotations ",e);var t=Object.keys(r.state.measuresToAnnotationsMap).filter((function(e){return document.querySelectorAll("#"+e).length}));console.log("Annotated measures on screen: ",t),t.forEach((function(t){var n=r.convertCoords(document.querySelector("#"+t));console.log("Coords: ",n);var a=document.createElement("div"),i=document.createElement("div"),o={left:Math.floor(n.x),top:Math.floor(n.y)+25,width:Math.ceil(n.x2-n.x),height:Math.ceil(n.y2-n.y)};console.log("Coords box: ",o),a.setAttribute("id","measureBox-"+t),a.setAttribute("class","measureBox"),a.setAttribute("style","position: absolute;background: rgba(0, 0, 0, 0);left: "+o.left+"px;top: "+o.top+"px;width: "+o.width+"px;height: "+o.height+"px;z-index: 1"),i.setAttribute("id","measureBoxBackground-"+t),i.setAttribute("class","measureBoxBackground"),i.classList.remove("isOpen"),i.classList.add("isClosed"),i.setAttribute("style","position: absolute;left: "+o.left+"px;top: "+o.top+"px;width: "+o.width+"px;height: "+o.height+"px;z-index: -1"),console.log("TRYING TO DRAW",a),document.querySelector(".annotationBoxesContainer").appendChild(a),document.querySelector(".annotationBoxesContainer").appendChild(i),a.onclick=function(n){Array.from(document.getElementsByClassName("inFocus")).forEach((function(e){return e.classList.remove("inFocus")}));var a=document.querySelectorAll(".measureBoxBackground"),i=n.target.closest(".measureBox");a.forEach((function(e){e.classList.add("isClosed"),e.classList.remove("isOpen");var t=e.id.split("measureBoxBackground-")[1];i.id.split("measureBox-")[1]===t&&(e.classList.remove("isClosed"),e.classList.add("isOpen"))}));var o=Array.from(document.getElementsByClassName("showReply"));if(console.log("no longer showing ",o),o.length){r.state.areRepliesVisible&&r.setState({areRepliesVisible:!1});var s=document.querySelector(".listContainer");console.log(s),o.forEach((function(e){e.classList.add("hiddenReply"),s.appendChild(e)})),o.forEach((function(e){return e.classList.remove("showReply")}))}r.handleAnnoShowingUpdate(e,t)}}))})),e.forEach((function(e){"replying"!==e.motivation&&e.target.forEach((function(t){var n=e.body,r=t.id,a=r.substr(r.lastIndexOf("#")),i=document.querySelector(a);if(!i)return console.warn("no content has been found");var o=e["@id"],s=o.substr(o.lastIndexOf("/")+1);switch(e.motivation){case"describing":n.length&&"value"in n[0]&&i.classList.add("focus-"+s);break;case"linking":n.length&&(i.classList.add("focus-"+s),i.classList.add("focus-"+s));break;case"trompa:cueMedia":case"trompa:cueImage":n.length&&i.classList.add("focus-"+s);break;case"trompa:playlist":return;default:console.log("sorry, don't know what to do for this annotation boss")}}))}))},r.handleAnnoShowingUpdate=function(e,t){var n=e.map((function(e){return e["@id"]})),a=r.state.measuresToAnnotationsMap[t],i=n.filter((function(e){return e&&a.includes(e)})),o=[].concat(Object(V.a)(i),Object(V.a)(e.filter((function(e){return"replying"===e.motivation})).map((function(e){return e["@id"]}))));console.log("to display: ",o),r.setState({annoToDisplay:o})},r.handleScoreUpdate=function(){var e=Object(G.a)(z.a.mark((function e(t){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Received updated score DOM element: ",t),e.next=3,r.onRefreshClick();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.annotate=function(){r.setState({applicationMode:pr.Annotate}),r.onRefreshClick()},r.state={annoValue:"",selection:[],selectorString:[],replyAnnotationTarget:[],currentAnnotation:[],hasContent:!0,currentMedia:r.props.currentMedia||"",seekTo:"",measuresToAnnotationsMap:{},annoToDisplay:[],replyAnnotationTargetId:"",areRepliesVisible:!1,scoreReady:!1,applicationMode:pr.Ready,vrvOptions:{scale:50,adjustPageHeight:0,pageHeight:br,pageWidth:yr,footer:"none",unit:6}},r.handleSelectionChange=r.handleSelectionChange.bind(Object(Z.a)(r)),r.handleStringChange=r.handleStringChange.bind(Object(Z.a)(r)),r.convertCoords=r.convertCoords.bind(Object(Z.a)(r)),r.annotate=r.annotate.bind(Object(Z.a)(r)),r.handlePageTurn=r.handlePageTurn.bind(Object(Z.a)(r)),r}return Object(J.a)(n,[{key:"convertCoords",value:function(e){if(!document.getElementById(e.getAttribute("id"))||"none"===e.style.display||0===e.getBBox().x&&0===e.getBBox().y)return console.warn("Element unavailable on page: ",e.getAttribute("id")),{x:0,y:0,x2:0,y2:0};var t=e.getElementsByClassName("staff")[0],n=Array.prototype.filter.call(t.children,(function(e){return"path"===e.tagName}))[0].getBBox(),r=e.getBBox().x,a=n.width,i=e.getBBox().y,o=e.getBBox().height,s=e.closest("svg").parentElement.getBoundingClientRect(),l=e.getScreenCTM();return{x:l.a*r+l.c*i+l.e-s.left,y:l.b*r+l.d*i+l.f-s.top,x2:l.a*(r+a)+l.c*i+l.e-s.left,y2:l.b*r+l.d*(i+o)+l.f-s.top}}},{key:"handleStringChange",value:function(e){this.setState({selectorString:e})}},{key:"handleSelectionChange",value:function(e){this.setState({selection:e})}},{key:"handlePageTurn",value:function(){document.querySelectorAll(".measureBox").forEach((function(e){return e.remove()})),document.querySelectorAll(".measureBoxBackground").forEach((function(e){return e.remove()}))}},{key:"render",value:function(){var e=this;return console.log("rendering: is logged in? "+this.props.solidSession.info.isLoggedIn),a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("div",{className:"scoreContainer"},a.a.createElement("div",{className:"controls"},a.a.createElement("div",{className:"prevPageButton",onClick:this.handlePageTurn},a.a.createElement(ee.a,{buttonContent:a.a.createElement("img",{src:Ge.a,alt:"previous page"}),uri:this.props.resourceUri})),a.a.createElement("button",{onClick:this.zoomOut,className:"zoomOut"},a.a.createElement("img",{src:_e.a,alt:"zoom out"})),a.a.createElement("button",{onClick:this.zoomIn,className:"zoomIn"},a.a.createElement("img",{src:Xe.a,alt:"zoom in"})),a.a.createElement("div",{className:"nextPageButton",onClick:this.handlePageTurn},a.a.createElement(X.a,{buttonContent:a.a.createElement("img",{src:Ze.a,alt:"next page"}),uri:this.props.resourceUri}))),a.a.createElement("div",{className:"annotationBoxesContainer"}),a.a.createElement(K.a,{uri:this.props.resourceUri,vrvOptions:this.state.vrvOptions,onSelectionChange:this.handleSelectionChange,selectorString:this.state.selectorString,onScoreUpdate:this.handleScoreUpdate,selectionArea:".scoreContainer",onScoreReady:function(){e.setState({scoreReady:!0})}}))),a.a.createElement("div",null,this.state.applicationMode===pr.Ready&&a.a.createElement(a.a.Fragment,null,a.a.createElement("h3",null,"Search using F-TEMPO (experimental)"),a.a.createElement(w.a,{variant:"info",onClick:function(){e.setState({applicationMode:pr.Search})},disabled:!this.state.scoreReady},"Show search options"),a.a.createElement("h3",null,"Annotate the score using the Annotation Tools"),!this.props.solidSession.info.isLoggedIn&&a.a.createElement(a.a.Fragment,null,a.a.createElement("small",null,"You must be logged in to perform annotations"),a.a.createElement("br",null)),a.a.createElement(w.a,{variant:"info",onClick:this.annotate,disabled:!this.state.scoreReady||!this.props.solidSession.info.isLoggedIn},"Make an annotation"))),this.state.applicationMode===pr.Search&&a.a.createElement(nt,{vrvToolkit:this.props.score.vrvTk}),this.state.applicationMode===pr.Annotate&&a.a.createElement("div",null,a.a.createElement(Ee,{selectorString:this.state.selectorString,handleStringChange:this.handleStringChange}),a.a.createElement(ye,{creator:this.props.solidSession.info.webId,uri:this.props.resourceUri,selection:this.state.selection,saveAnnotation:this.saveAnnotation,onRefreshClick:this.onRefreshClick}),a.a.createElement(Qe,{allEntries:this.state.currentAnnotation,onRefreshClick:this.onRefreshClick}),a.a.createElement(Fe,{allEntries:this.state.currentAnnotation,filteringEntries:this.state.annoToDisplay,onAnnoReplyHandler:this.onAnnoReplyHandler,onMediaClick:this.onMediaClick,replyAnnotationTarget:this.state.replyAnnotationTarget,showReplyHandler:this.showReplyHandler,areRepliesVisible:this.state.areRepliesVisible,onRefreshClick:this.onRefreshClick}),a.a.createElement(We.a,{width:"80%",height:"80%",ref:this.player,url:this.state.currentMedia,controls:!0,onReady:function(){e.state.seekTo&&e.player.current&&(console.log("Seeking to: ",e.state.seekTo),e.player.current.seekTo(Math.floor(Number(e.state.seekTo))),e.setState({seekTo:""}))}})))}}]),n}(r.Component);var Er=Object(f.b)((function(e){return{score:e.score}}),(function(e){return Object(u.b)({},e)}),null,{forwardRef:!0})(wr),Ar=function(e){var t=Object(r.useState)("private/"),n=Object(D.a)(t,2),i=n[0],o=n[1],s=Object(v.useSession)().session;return a.a.createElement("div",{id:"authWrapper"},a.a.createElement("p",null,"Specify the annotation container path inside your Pod:"),a.a.createElement("div",null,a.a.createElement("input",{title:"enter your preferred POD folder",type:"text",placeholder:"private/",onChange:function(e){o(e.target.value?e.target.value:"private/")},className:"sizedTextBox"})),a.a.createElement(Er,{resourceUri:e.resourceUri,submitUri:i,solidSession:s}))},Sr=function(){return a.a.createElement("div",null,a.a.createElement("h3",null,"Below you can find some tips on how to use the annotation tool:"),a.a.createElement("br",null),a.a.createElement("div",null,a.a.createElement("h4",null,"How do I create an annotation?"),a.a.createElement("ol",null,a.a.createElement("li",null,"Select the type of selection you want to use (note, measure, directives etc)"),a.a.createElement("li",null,"Drag across the score in order to select the elements you want to annotate"),a.a.createElement("li",null,"You can select discontinuous measures by holding the shift key"),a.a.createElement("li",null,"Sometimes slurs can get in the way of your selection, you can deselect unwanted measures by holding the shift key and clicking on the measure you wish to deselect"),a.a.createElement("li",null,"Select the type of annotation you wish to submit (description, link etc)"),a.a.createElement("li",null,"Type the text or paste the URL you wish to attach to the annotation"),a.a.createElement("li",null,"Click the green submit button")),a.a.createElement("h4",null,"I made a mistake in my annotation, how can I delete it?"),a.a.createElement("ul",null,a.a.createElement("li",null,"You can delete you annotation by clicking the rubbish bin icon in the annotation item and click yes to delete it")),a.a.createElement("h4",null,"I have replied to an annotation but I can\u2019t see my reply, where is it?"),a.a.createElement("ul",null,a.a.createElement("li",null,"You can see all the replies to the specific annotation by clicking the \u201cshow replies button\u201d in the annotation you are replying to")),a.a.createElement("h4",null,"Can I create a different type of reply (media or image content)?"),a.a.createElement("ul",null,a.a.createElement("li",null,"Not right now, this feature will be released in a future version of the software")),a.a.createElement("h4",null,"How does the solid pod system work, is my data really safe?"),a.a.createElement("ul",null,a.a.createElement("li",null,"Solid was purposely built for data safety and protection, and by design everything contained in the pod is private unless specified. For more information visit the"," ",a.a.createElement("a",{href:"https://solidproject.org/",target:"_blank",rel:"noopener noreferrer"},"solid project")," ","page for more info")),a.a.createElement("h4",null,"I have found a bug, what can i do?"),a.a.createElement("ul",null,a.a.createElement("li",null,"Please submit a bug report to"," ",a.a.createElement("a",{href:"mailto:fzuba001@gold.ac.uk?subject=Bug report"},"fzuba001@gold.ac.uk")," ","describing the nature of the bug and how to reproduce it, make sure to include browser model and operating system used. Thanks! :)"))))},Cr=function(){var e=Object(y.g)(),t=Object(y.h)(),n=new URLSearchParams(t.search).get("resource");return"/annotate"!==t.pathname||n||e.push("/new"),a.a.createElement(y.d,null,a.a.createElement(y.b,{exact:!0,path:"/"},a.a.createElement(y.a,{to:"/new"})),a.a.createElement(y.b,{exact:!0,path:"/new"},a.a.createElement(H,null)),a.a.createElement(y.b,{exact:!0,path:"/annotate"},a.a.createElement(Ar,{resourceUri:n})),a.a.createElement(y.b,{exact:!0,path:"/help"},a.a.createElement(Sr,null)))},Tr=new l.ApolloClient({uri:"https://api.trompamusic.eu",cache:new l.InMemoryCache});var Or=function(){var e=Object(u.a)(d.a,p.a)(u.d),t=Object(y.g)();return a.a.createElement(v.SessionProvider,{sessionId:"trompa-music-scholars-annotator",onSessionRestore:function(e){var n=new URL(e);t.push(n.pathname+n.search)}},a.a.createElement(f.a,{store:e(c.a)},a.a.createElement(l.ApolloProvider,{client:Tr},a.a.createElement(S,null),a.a.createElement(j.a,{fluid:"lg",style:{paddingLeft:"0px"}},a.a.createElement(Cr,null)))))};o.a.render(a.a.createElement(s.a,{basename:"/music-scholars-annotator"},a.a.createElement(Or,null)),document.querySelector(".container"))}},[[569,1,2]]]);
//# sourceMappingURL=main.691852a0.chunk.js.map