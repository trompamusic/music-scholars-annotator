{"version":3,"sources":["graphics/top-bar-logo_0_0.png","graphics/play-solid.svg","annotations/addAnnotation.js","annotations/annotationSubmitter.js","annotations/checkBox.js","annotations/selectionHandler.js","annotations/annotationItem.js","annotations/annotationList.js","annotations/playlistItem.js","annotations/renditionsPlaylist.js","containers/selectableScoreApp.js","containers/solidWrapper.js","containers/selectableScoreWrapper.js","index.js"],"names":["module","exports","Addannotation","state","value","seconds","target","buttonStatus","onChange","e","setState","onTimeChange","console","log","this","handlerArgs","props","annotationType","type","name","placeholder","className","id","pattern","title","aria-hidden","focusable","data-prefix","data-icon","role","xmlns","viewBox","width","height","display","fill","d","buttonContent","submitUri","submitHandler","submitHandlerArgs","onResponse","onClick","onRefreshClick","React","Component","AnnotationSubmitter","textArea","current","wipeState","selection","map","elem","uri","getAttribute","body","uuidv4","motivation","created","Date","toISOString","creator","replyAnnotationTargetId","createRef","onAnnoTypeChange","disabled","checked","ref","selectorString","Checkbox","label","key","Selectors","RadioButton","createCheckbox","option","updateSelectorList","buildCheckboxes","concat","handleStringChange","filter","val","AnnotationItem","showDetails","preventDefault","stopPropagation","parent","closest","details","querySelector","isVisible","classList","remove","add","visibleDetails","showReplyDetails","replyTarget","annotation","replyTargetId","onAnnoReplyHandler","showConfirm","confirmScreen","isConfirmVisible","visibleConfirm","onPlayClick","bodyMedia","onMediaClick","onPreviewclick","_children","children","isPictureShowing","previewButtonContent","document","addEventListener","onShowReplyClick","rootAnno","replyTargetAnnos","querySelectorAll","length","forEach","replyTargetAnno","replyTargetAnnoId","dataset","replyAnnotationTarget","rootAnnoTargetId","selfId","areRepliesVisible","isClicked","appendChild","showReplyHandler","noLongerShowing","Array","from","getElementsByClassName","noReplyShowing","showing","showingReply","annoContainer","warn","renderSwitch","permission","modifyPermissionsElement","date","datasetWithAcl","getPublicAccess","read","Object","keys","getAgentAccessAll","userMayModifyAccess","grantPublic","icons","unchecked","vertical-align","revokePublic","commonAnnoComponents","deleteAnno","style","paddingTop","onMouseEnter","onMouseLeave","replyButtonsCluster","bodyD","bodyL","repTarget","data-target","data-self-id","startsWith","href","rel","appendURL","cleanMediaString","split","src","PlayLogo","alt","alignContent","textAlign","maxWidth","maxHeight","marginTop","data-reply-annotation-target","resourceAcl","aclModified","userId","resp","bind","updateDatasetAcl","testReplyRetrieval","auth","fetch","method","then","a","response","json","data","ok","error","message","status","Promise","reject","catch","currentSession","s","getSolidDatasetWithAcl","hasResourceAcl","getResourceAcl","now","hasAccessibleAcl","hasFallbackAcl","createAclFromFallbackAcl","userControllableResourceAcl","setAgentResourceAccess","webId","append","write","control","nextProps","nextState","updatedAcl","setPublicResourceAccess","saveAclFor","AnnotationList","order","sortedFilteredAnno","allEntries","anno","filteringEntries","includes","sort","b","localeCompare","focusId","currentTarget","c","noFocusElement","focusElement","item","annoIdFragment","substr","lastIndexOf","PlaylistItem","delete","link","frameBorder","renditionsPlaylist","visible","viewPortHeight","window","outerHeight","viewPortWidth","outerWidth","SelectableScoreApp","activateModal","helpWindowIsActive","deactivateModal","onMEIInputChange","onSubmitMEI","hideMEIInput","annoValue","currentAnnotation","toggleAnnotationRetrieval","hasContent","showMEIInput","currentMedia","seekTo","measuresToAnnotationsMap","annoToDisplay","vrvOptions","scale","adjustPageHeight","pageHeight","pageWidth","footer","unit","handleSelectionChange","handleScoreUpdate","onReceiveAnnotationContainerContent","convertCoords","handleAnnoShowingUpdate","zoomIn","zoomOut","player","handlePageTurn","initialZoom","initialHeight","initialWidth","newVrvOptions","assign","getElementById","getBBox","x","y","x2","y2","offset","parentElement","getBoundingClientRect","matrix","getScreenCTM","left","f","top","alert","replace","content","mb","measuresToAnnotationsMapList","endsWith","distinctMeasures","measures","jsonTarget","targetId","fragment","element","measure","el","Set","annoId","newMap","measureToAnnoMap","m","mId","push","annotatedMeasuresOnScreen","measureId","coords","measureBox","createElement","measureBoxBackground","coordsBox","Math","floor","ceil","setAttribute","onclick","bgBoxes","frontBox","box","bgBoxId","bodies","_annoIds","jsonIds","_filteredAnnoIds","compare","annotationsToDisplay","scoreElement","modal","isOpen","onRequestClose","contentLabel","overlayClassName","ariaHideApp","overflow","annotationContainerUri","onSelectionChange","onScoreUpdate","selectionArea","replyAnnoBody","padding","marginLeft","url","controls","onReady","SolidWrapper","context","extend","trompa","userPOD","useLDflexValue","useState","userInput","setUserInput","LoggedOut","Logo","LoginButton","popup","LoggedIn","Value","LogoutButton","podUri","createStoreWithMiddleware","applyMiddleware","thunk","ReduxPromise","createStore","SelectableScoreWrapper","MEI_URI","store","reducers","handleMEIInput","ReactDOM","render"],"mappings":"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","file":"static/js/main.05ab8218.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQEAAAA1CAYAAABBcF7yAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAERVJREFUeNrsXWmMHEcVrh7fINnNjxAIItsOIIQ4dlaKkzg+dsY57MRRdvyHPyB2RgIUEGh3cwoRMTM/SEzsaHclRAQ5diYEhPjjseQoh4m313buiG0n4oyI286fhLOdPz4ST/FeT/VuT031NdM9M7uuJ5Wmp7vrelXvq/deHU2IJEmSJEmSJEmSJEmSJEmSJEmSJEmSLjlSlmKhzxa+pBKqpGldyRCaGiR1uKZK4eO/PaHLJpUkKRqt7PcCnrvjKhWwKk3qqQwI/SAKP6kTbQHC6FKFMkmSJAi00IXxz6gUhZymMgQFvp6CER4Enrr0Fur6lSRJ0tIFgQ/vu4yN8Aob4VMg/C6Bt4Ue/lBnmHcP+a3XUhmQJKmPQeCj4nrbhocAI3xqEIQerqm2IOCxjOxSNQhDt912G5pSaRaQhiFYEE6w/waGQ4cOmZJbEgTapvoDazONET7VsOFB4Kl7RFcUJrP+o3so6gBAQCBm4SeTBA9AiBSWRwl+ihGiWkwQTUrpHPzWnn76aauTsuzevVtTFCUPl6MQNI/XchxvDMi/CpeVqPkL+GoCPzYmBGotbejw3vUOPp+NmLSObQE8ONhJG0DeB3jeIk+hjIV+AYFUrMK/d1W6/uDqNGN4kahX5hRtm0Yu/1qL3PrJdNOFQhf+KzaAcPc70R0oTSx0kIcKIQMBhXYGwkkQ4vE2hV+FgCB0EtIrUhuMQ5cD23GS5V/qkK9au3UIqF+e8UrI+w7bGdPNudqg1A7/MQ1B2jl8tixBgCHe5IIcD36TkMFvkNSuvd7S7vXbBVOgT0FABAqTt9566yyE0B0H3k1DvHkm/J3mX4T05jHNDvhajFL+EPVTveqWQDu7eaBG6F95n/RyyxMEFDKwYGs65v7lX20Z0ZuFlkq7PhzhyDR7yy23BHZCeAe1iHkf1d9W0ZnK6w5+Km+a5Z9us/y2IMXFDEhrPKB+SVA6bBuwMo6286yvfAJ0f8qxpXTl7nqW3cMONgn/PyGIMg1CXgVZtu0v+uZT0NWOEXr2g4b8b9xCUoVDi+bDH/aR+uH9PqN7h/6C4EZCm3cu4DXejkbhqUbRNgRUDoi2AQLyme9saaae7gkAgBmPfE27jcDGfeaZZ0yP+BrLW+Q/wPKgEGQhvhGxzkjjEHfaK++wxMo45pNPmPJUIJwKaIOcgAfYBmjnZwPKmGag4QnqWI9OedENxyA29ASEEa4jWQgQAAR6k1px34dGwzG4piGo1ilC//cu3FCaBLf+2O1E2f1AO5pG8zoBZwqxTUyABqgEvbNr165hHgSeffbZUicgECY+5FtmplWeN7ngWQbS0AVxUFuY8XA2liHOVAieYPti+UqQnsipaQMBPMtCekZEECAMxLIdgndRAJBRQaAq4iFHEx48yMD9PMSv+OQ5FqJoY0y++tocQEYPohAwrcABgQL7bXYM/mwVre9dTQPt9au2EmXtBpdw0wT8BLGpnYE2ZxLxoYNZEArwfkWQRksH27lzJ6rbBwTvoqBmwwCAB1gNQRqWwKY9gHm24WvJQLxMu+2BcX1s7Ug+gbA8gHfLIh9HQLvzDkFsxxrvIFwKPgGVjYKmbZPuT5XYyJThzQa6b0VJIbRhZw5sJ8q2HxNlYNuCENtyfO4MoSeP22YBtU4TglpCi4w3+wgU8X3s2JVLYYHQc889JwLcnMcIqwo0Oc8RO6QQGGzk5v0FGok29cmXtV0q9qANSsxn0lR/ACTNA6hEptxBFvg0cn0NAqDuG+gLYP4AnTXAMFNjciD8sxDSDBTGQGJtsCAbBgjZ9AOCYNAk3u+9RepP3E7qj99OLj46Qup//F2YsdRg9huqTdl1j/1dWff434bWzfyl0AwOyTgVe6UJ8L4LPo2bb755AYjxWjDy4OhdgA5sxSAEuGZgj6Au45C3FqLOJj9lCPEiTxlCHNGUoJWkJuDXBmwaVfTuCF9G4GGNaQJ8eUf6XRMQAUOWjTCWy1FijzrKvR81bL23fk3IP094ju4+10zgqS3wa35+SlnzC3No7SPvFNb+8h9Ta3/1ti70EyxDc4BLQw+YhhwTPC8///zzRlx8gLT0sGqx4J2qAAiKN910U2i7Ht8VTAmaInMpIRAww4AAlFMTmQKMh5bAJMhH4UMvHIOtzNifoi71hjCfwRnbXHhoJaV1kMut9xNyJZgEEOzZAfO4l9MRAgW0UIzVD7+nE0mR6cYbb9QE5oF5+PDhqQSym2JaoOq2fZmPKIjwHfeqPWfKcCKkEI4risJrHWXS/WnCoHLmFKVlZKpyZkGej8O03b7XBBzb0AmjzAxAtc6t0mQpaAL0NzsJfWoXoe+/2Yir0IZKr5Dsyp/+V1n14H+GVu39d2HVQ/+aWrXv/Q4BgCbZqP2gCWR80hE9m06CFwAsFj/yojADEOWC6gxxdV6jwb7DQCwM0PHajg5pVpJ2DLrS0Dycrjzx5URANlw8rPFaBQPW/tME2GyACeq/ycwAy+0cgecWAwN8b1i556KCmoDt6T9zCoyF04TWFbLi/rNL2n/XjtDGGZ+l0bKw5IUXXtAd+1MQpZYgP6oM+N007M7Tq87oo4CfkwInYTYgT9GUYDksf5NqA95he8MNN+C6AB7UpgVp1TgepiGuBm1q9psmUCStc9Q8TTKNAEBhhaPqzXat9F2YQuy1JrBjx44ZwShU8xmhjCQ7E6RtCJxb6YA6D7O4Ihs+A3XM+NRfNCVYcYFg4poAlGFcoI2ZyAsunzFBHrWQTsaeaQMpNqqjl58XXkS0UeeZ4HmV2TfVhpOQZrrss2s2A5bZfGE2m1URADyA2D26pP1Gp4TIEPSVsDRBWqcbZwIGIzdZJHjFZWwEbVAirv0wvCbCEe+b0UWAfOTIEUPAw55NFa50dZy8wJEz6fNcI4tLS8usM1YbjbZ8zvxKwhwAAc/4RFGZeo2jn8hrPDU7O6v7pH+iCzyx/EDAj2cgABbUf5oTbg3ujUO9pjg+2VOCPADCe2aU9vF4ZzSgHexlwwL13gZBKENFUFbVxyEoMqvSHA9ykG6tVyBwgmkEaVwbwHwAOrP7TZ+OZbo6gAVyr4P8F5fT2X8J+QTaNZkMXdcn4rZ326jTCb+RK6hM0NFLmUyG35tQhHsVqJ8NMHAt2nCEz6ai1t/jnXyb1bdEPoyovhlm0vEaxkiS/pwgn8Ak98sza9IBCXt14P4UIl6FaQBZhuqAanS26z1SuWR2HlZIh2vuYwSBgRiS4acGm4TeY5fghAMSPSIcIIf4MgwPD2sCUKz4lRWemQKBz0NaXV8zsJKN+sIx29k5uNAwDb8AqlBZtnnIZPdt1Ui55yKYEBdJY/9At1WB5FYM9jI+43F5bm6uEjL9gS4wW+PytaLWGYSgBh1eJ81L0MfhnuPv4HcJGiIedGl2wGJ+mCkog0iwc4I8DoYo10EBeHR9zUCkxUIICq7FQm6yt2TSfSsoraeW1bEAPQQBHHUKR48eNQLSN7kRU+sCTzRBWSPXGd5DbWCeuz3DgE8N0BySBgGdCT9uNa9AO1g+6fOefQver4Uol2MSuOs61tcgAADgNhuGXOBQYiAwwjpEvlvHgjeySU7rSAIEjh071lTY7du348g6z3UGjfgf8uEFApkk+b1t2zZNAAJmOzxDgIP0Kpx9Lip/DXimxwwCWa80I/IjI+CHCvdpm+VKQ9w0lM3oGQi4VP4ys1kmXUhcZR0173rPUZcMkMW0olCVfuVbRIFAn9rZJb8AWdLaBwiDCQ1f5nwyyOcDbrD1oDlecCCtHHSipBxMGY8ydOIbyBH/8wEm+rj5RhNKs2sgkPJguOHqiA7KqWzmoOpS1yaY6mKx9xoqFK4YxH0Da9XkhV90HbMm0I3FQiC0U7jQh1+Es3Xr1lKQStnNhSce5/rp7fIM6o0Lj6Z9zgcowztmJ/yNY9mwiKBtvA4S7TTku4liIhBIk8W5asul6lkuNdVRQQfZr8ruZez4uJX49FFi/8ZA57+/UTv3vaty5+74XOncdz9fOvudL+TPfvuLWjeG/26uGMRltaJdelu2bPE81+/48eOGYIdbBuLEbhZAmnnBCkUdymB2wjOIX/LYpYcAMdUpf5MCAQYAagIgoAKvu7Z4SOQTGHQEn438ztmCGjtUxFH/LJeWUIF3J+i+1DzuCCRvPZm3zxeknQ3P5394ZQbSKBJcMEK5YX8Zzgy++OKLBjQ+mgVFrrPNXH/99dmXXnrJy0dQJtyqOzyhOCBOJIK07FOPBTvk4lq9N8HMn6Z7wBOrX9sL9xMI+LEnjC+H9yHwdWd7FWo9AQEUZo93NdY5daYtFBxfANtchB8VwU+JpTu10dk3CWcIbrGkSq8buqvxodOXQOBGSPNqsjTj/YRHnArEKXIOQue7AYU4AIA0FjipXH10ABk9Dp5BHWqQj+7yORiQdiUO/iaxoArKirzO8NOYUOZam+kZXJvnkO9xgXhUc8DfDF88VERlnWwSNQSmJZRDOLL8AeDOK1QAkVmFnz/1/AjJ8jEHAsyC8c2bN2cixslDnE6O8iIQHwV/Fv0TgvQn4uQZq0OWhT1x8TcJc8DjnMPpDtKr9so30MmhIo7vwIVe9lRd0XXdDjuK9odKQ3+BONnPFPdincDLL79sXHfddS1mAar8cH/olVdesQRxdI84ebiPbbQH4plRyoHx2OnFLT4JUIMLWM44eQbpmSTiBqheaQKircXAk07Ud3Tw8it2MY+ppEHA2UVIPRYBuWmWa6CG6389aEWoiWJYr3VUmAt3fUoDeR6XHyEhBAS2RMS79WYC4ohUaBTikyDUk9dee21gI+E78C7mMy8CAMwDBLZyqbYN8CZDWhdl1YAnbavuDAB5EEkzAO+KJpAl4Ta1tM754QzAegiXQVnfnSPkzOn2B2cFTADqNdL7XTfsseWiCbjVY9K6oi4HQpp79dVXax5AUIDntgYgeIzr8cfhucF8O2fYr6PRbWA2ud9HMyqQd6HbI28/aQIeB4wcjCFd0TLixNcMNG0gcq0IdLSDkutdi3gt6PgylPOTg0wwO/qsmBoSLLhfqn/syT9ZSXWyXh0qAsJmeBzuOXPNNdeoPvEKHvEW1h+gj4HN+c+y7xUU2b20T7xCEADEwbO4+RunTwD5LjrZGfhSiaEutV74BVIuFEN70r1lGCs1zA4UmW8RUBT8rx8h5PMjhDy8ohHenYunVBE/QqJ08ZCJbtNrr70mMgtUjy8N8fGyJJ5DRlBbGII0L1kTwCWootWNtZja2hKYc+qmTZsSXTPg7CIsCZ6dYmFAqFp+wPrWZWmhDNNF7SEKVRYdW82qv9KYE2g1AxRSWDfzZ72X6mbSqqiXWQCdI//6669XfDoV8mUjvkcaG1PSbQh/1S+PS9AcGBWkV42xPgcF8pbomgHP2QEEBnZugFgdwaXBCAQIAmvgtfMueV/8RmCkgq/e/5554a5PizzcIsIjzSbWPfHXSsKdbIJDfiti/App/XpNJAIhNK6++uohwQhkhoyPZahAGhqzOYddfgDVVS+DLB4iU3vjjTfMXvAsbv46n2Ljbhtt5lcmnOYJfIptEIK2qkE7ZVv7enLkO4fn+ipxK+FswOafNK5/v2PRFEDhh0DrigW/Q6kfXYjckS7ceUWO1JVJSlOa/TFTTLOeggbAXzvdabieWvfo2327mkySpKVCYUBgkjjbg0NBpS20Fghp1vlKcbt0fuyzaRB6DdJLQzBoPWWufeQdQzabJEm90QSMUDYlxS3FqYJy70dSWCVJWuogIACFHFk4T7CFUOinlbvrFclWSZKWKQi4wEAjzSumFjcRSZIkSZIkSZIkSZIkSZIkSZIkSZIkqe/p/wIMAMflv55Wc/6WAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/play-solid.f79fe6ae.svg\";","/* addAnnotation contains the submitButton component imported from the selectable score component, this handles the logic behind the POST to solid */\n/* also the input field changes based on the chosen annotation motivation*/\nimport React from \"react\";\nimport SubmitButton from \"selectable-score/lib/submit-button.js\";\n\nexport class Addannotation extends React.Component {\n  state = {\n    value: \"\",\n    seconds: \"\",\n    target: [],\n    buttonStatus: \"disabledSubmitButton\",\n  };\n  onChange = (e) => this.setState({ value: e.target.value });\n\n  onTimeChange = (e) =>\n    this.setState({ seconds: e.target.value }, () =>\n      console.log(this.state.seconds)\n    );\n\n  wipeState() {\n    this.setState({ value: \"\", seconds: \"\" });\n  }\n\n  render() {\n    //packages the two states in one variable. The submithandlerArgs then are read with .value and .seconds from the submitHandler function\n    let value = this.state.value;\n    let seconds = this.state.seconds;\n    let handlerArgs = {\n      value,\n      seconds,\n    };\n\n    return (\n      <div>\n        {this.props.annotationType === \"playlist\" && (\n          <div>\n            <input\n              type=\"text\"\n              value={this.state.value}\n              name=\"value\"\n              placeholder=\"enter link here\"\n              onChange={this.onChange}\n              className=\"sizedTextBox\"\n            />\n            <span> with title: </span>\n            <input\n              type=\"text\"\n              placeholder=\"title\"\n              name=\"seconds\"\n              value={this.state.seconds}\n              onChange={this.onTimeChange}\n              className=\"sizedTextBox\"\n            />\n          </div>\n        )}\n        {this.props.annotationType !== \"cueMedia\" && (\n          <textarea\n            className=\"textArea\"\n            id=\"annotationContent\"\n            name=\"value\"\n            value={this.state.value}\n            placeholder={this.props.placeholder}\n            onChange={this.onChange}\n          />\n        )}\n        {this.props.annotationType === \"cueMedia\" && (\n          <div>\n            <input\n              type=\"text\"\n              value={this.state.value}\n              name=\"value\"\n              placeholder=\"enter link here\"\n              onChange={this.onChange}\n              className=\"sizedTextBox\"\n            />\n            <span> jump to: </span>\n            <input\n              type=\"text\"\n              pattern=\"[0-9]\"\n              placeholder=\"seconds\"\n              name=\"seconds\"\n              value={this.state.seconds}\n              onChange={this.onTimeChange}\n              className=\"sizedTextBox\"\n            />\n          </div>\n        )}\n        {this.state.value && (\n          <button\n            className=\"enabledSubmitButton\"\n            title=\"click to post your annotation to your solid POD\"\n          >\n            <svg\n              aria-hidden=\"true\"\n              focusable=\"false\"\n              data-prefix=\"far\"\n              data-icon=\"arrow-alt-to-top\"\n              className=\"svg-inline--fa fa-arrow-alt-to-top fa-w-12\"\n              role=\"img\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              viewBox=\"0 0 384 512\"\n              width=\"1em\"\n              height=\"1em\"\n              display=\"inline-flex\"\n            >\n              <path\n                fill=\"white\"\n                d=\"M48 336h51.6v96c0 26.5 21.5 48 48 48h88.6c26.5 0 48-21.5 48-48v-96h51.6c42.6 0 64.2-51.7 33.9-81.9l-143.9-144c-18.7-18.7-49.1-18.7-67.9 0l-144 144C-16 284.2 5.3 336 48 336zm144-192l144 144h-99.7v144h-88.6V288H48l144-144zM0 68V44c0-6.6 5.4-12 12-12h360c6.6 0 12 5.4 12 12v24c0 6.6-5.4 12-12 12H12C5.4 80 0 74.6 0 68z\"\n              ></path>\n            </svg>{\" \"}\n            <SubmitButton\n              buttonContent={this.props.buttonContent}\n              submitUri={this.props.submitUri}\n              submitHandler={this.props.submitHandler}\n              submitHandlerArgs={handlerArgs}\n              onResponse={this.props.onResponse}\n            />\n          </button>\n        )}\n        {!this.state.value && (\n          <button\n            className=\"disabledSubmitButton\"\n            title=\"click to post your annotation to your solid POD\"\n          >\n            <svg\n              aria-hidden=\"true\"\n              focusable=\"false\"\n              data-prefix=\"far\"\n              data-icon=\"file-import\"\n              className=\"svg-inline--fa fa-file-import fa-w-16\"\n              role=\"img\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              viewBox=\"0 0 512 512\"\n              width=\"1em\"\n              height=\"1em\"\n              display=\"inline-flex\"\n            >\n              <path\n                fill=\"white\"\n                d=\"M497.83 97.98L413.94 14.1c-9-9-21.2-14.1-33.89-14.1H175.99C149.5.1 128 21.6 128 48.09v215.98H12c-6.63 0-12 5.37-12 12v24c0 6.63 5.37 12 12 12h276v48.88c0 10.71 12.97 16.05 20.52 8.45l71.77-72.31c4.95-4.99 4.95-13.04 0-18.03l-71.77-72.31c-7.55-7.6-20.52-2.26-20.52 8.45v48.88H175.99V48.09h159.97v103.98c0 13.3 10.7 23.99 24 23.99H464v287.95H175.99V360.07H128v103.94c0 26.49 21.5 47.99 47.99 47.99h287.94c26.5 0 48.07-21.5 48.07-47.99V131.97c0-12.69-5.17-24.99-14.17-33.99zm-113.88 30.09V51.99l76.09 76.08h-76.09z\"\n              ></path>\n            </svg>{\" \"}\n            <SubmitButton\n              buttonContent=\"Select measures to begin\"\n              submitUri={this.props.submitUri}\n              submitHandler={this.props.submitHandler}\n              submitHandlerArgs={handlerArgs}\n              onResponse={this.props.onResponse}\n            />\n          </button>\n        )}\n        <span>\n          <button\n            onClick={this.props.onRefreshClick}\n            className=\"refreshButton\"\n            title=\"click to display the annotation contained in your solid POD\"\n          >\n            <svg\n              aria-hidden=\"true\"\n              focusable=\"false\"\n              data-prefix=\"fas\"\n              data-icon=\"redo-alt\"\n              className=\"svg-inline--fa fa-redo-alt fa-w-16\"\n              role=\"img\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              viewBox=\"0 0 512 512\"\n              width=\"1em\"\n              height=\"1em\"\n              display=\"inline-flex\"\n            >\n              <path\n                fill=\"white\"\n                d=\"M256.455 8c66.269.119 126.437 26.233 170.859 68.685l35.715-35.715C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.75c-30.864-28.899-70.801-44.907-113.23-45.273-92.398-.798-170.283 73.977-169.484 169.442C88.764 348.009 162.184 424 256 424c41.127 0 79.997-14.678 110.629-41.556 4.743-4.161 11.906-3.908 16.368.553l39.662 39.662c4.872 4.872 4.631 12.815-.482 17.433C378.202 479.813 319.926 504 256 504 119.034 504 8.001 392.967 8 256.002 7.999 119.193 119.646 7.755 256.455 8z\"\n              ></path>\n            </svg>\n\n            <span>{\"\"} Fetch Annotations</span>\n          </button>\n        </span>\n      </div>\n    );\n  }\n}\n\nexport default Addannotation;\n\n/* old */\n/* <button\n          style={{ padding: \"5px\", marginBottom: \"5px\" }}\n          onClick={() => this.setState({ visible: !visible })}\n        >\n          Toggle legend\n        </button>\n        {this.state.visible === true && (\n          <div>\n            <h4>Annotation legend</h4>\n\n            <span className=\"selectionLegend\" />\n            <span>currently selected</span>\n\n            <span className=\"descriptionLegend\" />\n            <span>descriptive annotation</span>\n\n            <span className=\"linkingLegend\" />\n            <span>linking annotation</span>\n\n            <span className=\"cueMediaLegend\" />\n            <span>cue media annotation</span>\n\n            <span className=\"replyLegend\" />\n            <span>replying annotation</span>\n\n            <span className=\"focusLegend\" />\n            <span>highlighted annotation</span>\n          </div>\n        )} */\n","/* annotation submitter takes the handlerArgs passed from the addAnnotaiton script and builds the jsonLd structure of each annotation based on its motivation */\n/* it also renders the radio button array to selecte the annotation motivation  */\nimport React from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport Addannotations from \"./addAnnotation.js\";\nexport class AnnotationSubmitter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.textArea = React.createRef();\n  }\n  submitHandler = (handlerArgs) => {\n    this.textArea.current.wipeState();\n    //adds different annotations based on selection\n    //let replyAnnotationTargetId = this.props.replyAnnotationTargetId;\n    let value = handlerArgs.value;\n    let seconds = handlerArgs.seconds;\n\n    switch (this.props.annotationType) {\n      case \"describing\":\n        return {\n          \"@context\": \"http://www.w3.org/ns/anno.jsonld\",\n          target: this.props.selection.map((elem) => {\n            return { id: this.props.uri + \"#\" + elem.getAttribute(\"id\") };\n          }), //this takes the measure id selected by the user\n          type: \"Annotation\",\n          body: [{ id: uuidv4(), type: \"TextualBody\", value }], //this takes the user input\n          motivation: \"describing\",\n          created: new Date().toISOString(),\n          creator: this.props.creator,\n        };\n\n      case \"linking\":\n        return {\n          \"@context\": \"http://www.w3.org/ns/anno.jsonld\",\n          target: this.props.selection.map((elem) => {\n            return { id: this.props.uri + \"#\" + elem.getAttribute(\"id\") };\n          }), //this takes the measure id selected by the user\n          type: \"Annotation\",\n          body: [{ id: value }], //this takes the user URI\n          motivation: \"linking\",\n          created: new Date().toISOString(),\n          creator: this.props.creator,\n        };\n\n      case \"cueMedia\":\n        return {\n          \"@context\": \"http://www.w3.org/ns/anno.jsonld\",\n          target: this.props.selection.map((elem) => {\n            return { id: this.props.uri + \"#\" + elem.getAttribute(\"id\") };\n          }), //this takes the measure id selected by the user\n          type: \"Annotation\",\n          body: [{ id: value + \"#t=\" + seconds }], //this takes the user link + time offest\n          motivation: \"trompa:cueMedia\",\n          created: new Date().toISOString(),\n          creator: this.props.creator,\n        };\n\n      case \"image\":\n        return {\n          \"@context\": \"http://www.w3.org/ns/anno.jsonld\",\n          target: this.props.selection.map((elem) => {\n            return { id: this.props.uri + \"#\" + elem.getAttribute(\"id\") };\n          }), //this takes the measure id selected by the user\n          type: \"Annotation\",\n          body: [{ id: value }], //this takes the user image link\n          motivation: \"trompa:cueImage\",\n          created: new Date().toISOString(),\n          creator: this.props.creator,\n        };\n\n      case \"playlist\":\n        return {\n          \"@context\": \"http://www.w3.org/ns/anno.jsonld\",\n          target: this.props.selection.map((elem) => {\n            return { id: this.props.uri + \"#\" + elem.getAttribute(\"id\") };\n          }), //this takes the measure id selected by the user\n          type: \"Annotation\",\n          body: [{ id: uuidv4(), type: \"TextualBody\", seconds, value }], //this takes the user input\n          motivation: \"trompa:playlist\",\n          created: new Date().toISOString(),\n          creator: this.props.creator,\n        };\n\n      case \"replying\":\n        return {\n          \"@context\": \"http://www.w3.org/ns/anno.jsonld\",\n          target: this.props.replyAnnotationTargetId, //this takes the annotation ID being replied to\n          type: \"Annotation\",\n          body: [{ id: uuidv4(), type: \"TextualBody\", value }], //this takes the user input\n          motivation: \"replying\",\n          created: new Date().toISOString(),\n          creator: this.props.creator,\n        };\n\n      default:\n        console.log(\n          \"no annotation found, have you selected the annotation type?\"\n        );\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <div className=\"container\">\n          <h3>Annotation type</h3>\n          <label>\n            <input\n              title=\"adds a textual content to the annotation\"\n              type=\"radio\"\n              name=\"annotationType\"\n              value=\"describing\"\n              placeholder=\"Add your annotation...\"\n              onChange={this.props.onAnnoTypeChange}\n            />\n            Describing\n          </label>\n          <label>\n            <input\n              title=\"links external resources to the annotation\"\n              type=\"radio\"\n              value=\"linking\"\n              name=\"annotationType\"\n              placeholder=\"Insert your URI link...\"\n              onChange={this.props.onAnnoTypeChange}\n            />\n            Linking\n          </label>\n          <label>\n            <input\n              title=\"links a media content to the annotation\"\n              type=\"radio\"\n              value=\"cueMedia\"\n              name=\"annotationType\"\n              onChange={this.props.onAnnoTypeChange}\n            />\n            Cue Media\n          </label>\n          <label>\n            <input\n              title=\"links an image content to the annotation\"\n              type=\"radio\"\n              value=\"image\"\n              name=\"annotationType\"\n              placeholder=\"Insert your image link...\"\n              onChange={this.props.onAnnoTypeChange}\n            />\n            Image\n          </label>\n          <label>\n            <input\n              title=\"playlist\"\n              type=\"radio\"\n              value=\"playlist\"\n              name=\"annotationType\"\n              onChange={this.props.onAnnoTypeChange}\n            />\n            Playlist\n          </label>\n          <label>\n            <input\n              title=\"will be used when the reply button is clicked\"\n              type=\"radio\"\n              value=\"reply\"\n              name=\"annotationType\"\n              disabled={true}\n              checked={this.props.annotationType === \"replying\"}\n            />\n            Reply\n          </label>\n          <div className=\"addAnnotations\">\n            <Addannotations\n              ref={this.textArea}\n              annotationType={this.props.annotationType}\n              submitUri={this.props.submitUri}\n              placeholder={this.props.placeholder}\n              submitHandler={this.submitHandler}\n              onResponse={this.props.onResponse}\n              onRefreshClick={this.props.onRefreshClick}\n              buttonContent={this.props.buttonContent}\n              selectorString={this.props.selectorString}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default AnnotationSubmitter;\n","/* simple checkbox component */\nimport React from 'react'\n\nconst Checkbox = ({ label, onClick }) => (\n  <span>\n    <label>\n      <input\n        type='checkbox'\n        name={label.name}\n        onClick={onClick}\n        value={label.value}\n        key={label.value}\n      />\n      {label.name}\n    </label>\n  </span>\n)\n\nexport default Checkbox\n","/* manages the rendering of the checkbox component mapping across the selectors const */\n/* and uses updateSelectorList to update the selectorString Prop passed from the selctableScore main app*/\n\nimport React, { Component } from \"react\";\nimport Checkbox from \"./checkBox\";\nconst Selectors = [\n  {\n    name: \"Note\",\n    value: \".note\",\n  },\n\n  {\n    name: \"Measure\",\n    value: \".measure\",\n  },\n\n  {\n    name: \"Dynamics\",\n    value: \".dynam\",\n  },\n\n  {\n    name: \"Directives\",\n    value: \".dir\",\n  },\n];\n\nexport default class RadioButton extends Component {\n  state = {\n    selectorString: [],\n  };\n\n  updateSelectorList(e, value) {\n    if (e.target.checked) {\n      //append to array\n      this.setState(\n        {\n          selectorString: this.state.selectorString.concat([value]),\n        },\n        () => {\n          this.props.handleStringChange(this.state.selectorString);\n        }\n      );\n    } else {\n      //remove from array\n      this.setState(\n        {\n          selectorString: this.state.selectorString.filter(function (val) {\n            return val !== value;\n          }),\n        },\n        () => {\n          this.props.handleStringChange(this.state.selectorString);\n        }\n      );\n    }\n  }\n\n  createCheckbox = (option) => (\n    <Checkbox\n      label={option}\n      onClick={(e) => this.updateSelectorList(e, option.value)}\n      key={option.value}\n    />\n  );\n\n  buildCheckboxes = () => Selectors.map(this.createCheckbox);\n\n  render() {\n    return (\n      <div>\n        <h3>Selection Type</h3>\n        <form>{this.buildCheckboxes()}</form>\n      </div>\n    );\n  }\n}\n","/* item that contains the annotation contents, the renderSwitch function assign specific display to the specfic anntation based on its motivation*/\nimport React from \"react\";\nimport auth from \"solid-auth-client\";\nimport Toggle from \"react-toggle\";\nimport {\n  getSolidDatasetWithAcl,\n  hasResourceAcl,\n  hasFallbackAcl,\n  hasAccessibleAcl,\n  // eslint-disable-next-line\n  createAcl,\n  createAclFromFallbackAcl,\n  getResourceAcl,\n  setAgentResourceAccess,\n  setPublicResourceAccess,\n  saveAclFor,\n  // eslint-disable-next-line\n  getSolidDataset,\n  getPublicAccess,\n  getAgentAccessAll,\n} from \"@inrupt/solid-client\";\n\nimport PlayLogo from \"../graphics/play-solid.svg\";\nclass AnnotationItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isClicked: false,\n      userMayModifyAccess: false,\n      resourceAcl: null,\n      aclModified: false,\n      datasetWithAcl: null,\n      userId: null,\n      isPictureShowing: false,\n      previewButtonContent: \"Show preview\",\n\n      isConfirmVisible: false,\n      isVisible: false,\n      resp: \"\",\n    };\n    this.onClick = this.onClick.bind(this);\n    this.grantPublic = this.grantPublic.bind(this);\n    this.revokePublic = this.revokePublic.bind(this);\n    this.updateDatasetAcl = this.updateDatasetAcl.bind(this);\n    this.showDetails = this.showDetails.bind(this);\n    this.deleteAnno = this.deleteAnno.bind(this);\n  }\n\n  deleteAnno(e) {\n    const parent = e.target.closest(\".rootAnno\");\n    const testReplyRetrieval = document.querySelectorAll(\".replyAnno\");\n\n    if (testReplyRetrieval) {\n      testReplyRetrieval.forEach((replyTargetAnno) => {\n        const replyTargetAnnoId = replyTargetAnno.dataset.replyAnnotationTarget;\n        const rootAnnoTargetId = parent.dataset.selfId;\n        if (replyTargetAnnoId === rootAnnoTargetId) {\n          console.log(\"replies found: \", replyTargetAnno.dataset.selfId);\n          auth\n            .fetch(replyTargetAnno.dataset.selfId, { method: \"DELETE\" })\n            .then(console.log(\"replies deleted\"));\n        }\n      });\n    }\n    auth\n      .fetch(this.props.annotation[\"@id\"], { method: \"DELETE\" })\n      .then(async (response) => {\n        const data = await response.json();\n        // check for error response\n        if (!response.ok) {\n          // get error message from body or default to response status\n          const error = (data && data.message) || response.status;\n          return Promise.reject(error);\n        }\n\n        this.setState({ resp: \"success\" });\n      })\n      .then(this.props.onRefreshClick())\n      .catch(() => {\n        console.warn(\"Your annotation has been deleted, refreshing...\");\n      });\n  }\n\n  showDetails = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const parent = e.target.closest(\".rootAnno\");\n    const details = parent.querySelector(\".hiddenDetails\");\n    if (details && this.state.isVisible === false) {\n      this.setState({ isVisible: true });\n      details.classList.remove(\"hiddenDetails\");\n      details.classList.add(\"showDetails\");\n    } else {\n      if (this.state.isVisible === true) {\n        this.setState({ isVisible: false });\n        const visibleDetails = parent.querySelector(\".showDetails\");\n        visibleDetails.classList.remove(\"showDetails\");\n        visibleDetails.classList.add(\"hiddenDetails\");\n      }\n    }\n  };\n\n  showReplyDetails = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const parent = e.target.closest(\".quoteContent\");\n    const details = parent.querySelector(\".hiddenDetails\");\n    if (details && this.state.isVisible === false) {\n      this.setState({ isVisible: true });\n      details.classList.remove(\"hiddenDetails\");\n      details.classList.add(\"showDetails\");\n    } else {\n      if (this.state.isVisible === true) {\n        this.setState({ isVisible: false });\n        const visibleDetails = parent.querySelector(\".showDetails\");\n        visibleDetails.classList.remove(\"showDetails\");\n        visibleDetails.classList.add(\"hiddenDetails\");\n      }\n    }\n  };\n  onClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const replyTarget = this.props.annotation.target;\n    const replyTargetId = this.props.annotation[\"@id\"];\n    this.props.onAnnoReplyHandler(replyTarget, replyTargetId);\n    console.log(\"reply target id\", replyTargetId);\n  };\n  componentDidMount() {\n    this.updateDatasetAcl();\n  }\n\n  showConfirm = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const parent = e.target.closest(\".rootAnno\");\n    const confirmScreen = parent.querySelector(\".hiddenConfirm\");\n    if (confirmScreen && this.state.isConfirmVisible === false) {\n      this.setState({ isConfirmVisible: !this.state.isConfirmVisible });\n      confirmScreen.classList.remove(\"hiddenConfirm\");\n      confirmScreen.classList.add(\"showConfirm\");\n    } else {\n      if (this.state.isConfirmVisible === true) {\n        this.setState({ isConfirmVisible: !this.state.isConfirmVisible });\n        const visibleConfirm = parent.querySelector(\".showConfirm\");\n        visibleConfirm.classList.remove(\"showConfirm\");\n        visibleConfirm.classList.add(\"hiddenConfirm\");\n      }\n    }\n  };\n\n  updateDatasetAcl() {\n    auth\n      .currentSession()\n      .then((s) => {\n        getSolidDatasetWithAcl(this.props.annotation[\"@id\"], {\n          fetch: auth.fetch,\n        })\n          .then((datasetWithAcl) => {\n            console.log(\"Got dataset: \", datasetWithAcl);\n            let resourceAcl;\n            if (!hasResourceAcl(datasetWithAcl)) {\n              if (!hasAccessibleAcl(datasetWithAcl)) {\n                console.warn(\n                  \"You do not have permission to modify access on \",\n                  this.props.annotation[\"@id\"]\n                );\n              }\n              if (!hasFallbackAcl(datasetWithAcl)) {\n                console.warn(\n                  \"You do not have permission to view access rights list on \",\n                  this.props.annotation[\"@id\"]\n                );\n              } else {\n                resourceAcl = createAclFromFallbackAcl(datasetWithAcl);\n                // ensure current user has control in the new ACL\n                const userControllableResourceAcl = setAgentResourceAccess(\n                  resourceAcl,\n                  s.webId,\n                  { read: true, append: true, write: true, control: true }\n                );\n                this.setState({\n                  userMayModifyAccess: true,\n                  datasetWithAcl,\n                  resourceAcl: userControllableResourceAcl,\n                  aclModified: Date.now(),\n                });\n                console.log(\"Creating ACL from fallback ACL\");\n              }\n            } else {\n              resourceAcl = getResourceAcl(datasetWithAcl);\n              this.setState({\n                userMayModifyAccess: true,\n                datasetWithAcl,\n                resourceAcl,\n                aclModified: Date.now(),\n              });\n              console.log(\"Got resource ACL\");\n            }\n          })\n          .catch((e) =>\n            console.error(\n              \"Couldn't get Solid dataset with ACL: \",\n              this.props.annotation[\"@id\"],\n              e\n            )\n          );\n      })\n      .catch((e) =>\n        console.error(\"Couldn't access the current Solid session: \", e)\n      );\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.aclModified !== nextState.aclModified) {\n      // user has enacted an ACL change. Request a re-render accordingly.\n      return true;\n    }\n    return false;\n  }\n\n  onPlayClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const bodyMedia = this.props.annotation.body[0].id;\n    this.props.onMediaClick(bodyMedia);\n  };\n\n  onPreviewclick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const aimAt = e.target.closest(\".rootAnno\");\n    const _children = aimAt.children[0];\n\n    //const aimAt = rootAnno.contains(\"hiddenContainer\");\n    if (this.state.isPictureShowing === false) {\n      this.setState({\n        isPictureShowing: true,\n        previewButtonContent: \"Hide preview\",\n      });\n      console.log(_children);\n      document\n        .querySelector(\".hiddenContainer\")\n        .addEventListener(\"click\", function (e) {\n          e.stopPropagation();\n        });\n      _children.classList.remove(\"hiddenContainer\");\n      _children.classList.add(\"showContainer\");\n    } else {\n      document\n        .querySelector(\".showContainer\")\n        .addEventListener(\"click\", function (e) {\n          e.stopPropagation();\n        });\n      this.setState({\n        isPictureShowing: false,\n        previewButtonContent: \"show preview\",\n      });\n      _children.classList.add(\"hiddenContainer\");\n      _children.classList.remove(\"showContainer\");\n    }\n  };\n\n  onShowReplyClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const rootAnno = e.target.closest(\".rootAnno\");\n    console.log(\"root anno\", rootAnno);\n    const replyTargetAnnos = document.querySelectorAll(\".replyAnno\");\n    if (replyTargetAnnos.length) {\n      replyTargetAnnos.forEach((replyTargetAnno) => {\n        const replyTargetAnnoId = replyTargetAnno.dataset.replyAnnotationTarget;\n\n        const rootAnnoTargetId = rootAnno.dataset.selfId;\n\n        console.log(\"Reply target anno id: \", replyTargetAnnoId);\n        if (replyTargetAnnoId === rootAnnoTargetId) {\n          if (\n            this.props.areRepliesVisible === false ||\n            this.state.isClicked === false\n          ) {\n            this.setState({\n              isClicked: true,\n            });\n            rootAnno.appendChild(replyTargetAnno);\n            this.props.showReplyHandler();\n            //creates an array of all the visible replies\n            const noLongerShowing = Array.from(\n              rootAnno.getElementsByClassName(\"showReply\")\n            );\n            //hides them\n            noLongerShowing.forEach((noReplyShowing) =>\n              noReplyShowing.classList.add(\"hiddenReply\")\n            );\n            noLongerShowing.forEach((noReplyShowing) =>\n              noReplyShowing.classList.remove(\"showReply\")\n            );\n            //creates an array of the hidden annotations\n            const showing = Array.from(\n              rootAnno.getElementsByClassName(\"hiddenReply\")\n            );\n            //shows them\n            showing.forEach((showingReply) =>\n              showingReply.classList.add(\"showReply\")\n            );\n            showing.forEach((showingReply) =>\n              showingReply.classList.remove(\"hiddenReply\")\n            );\n          } else {\n            this.setState({\n              isClicked: false,\n            });\n            this.props.showReplyHandler();\n            const annoContainer = document.querySelector(\".listContainer\");\n            const noLongerShowing = Array.from(\n              rootAnno.getElementsByClassName(\"showReply\")\n            );\n            //hides them\n            noLongerShowing.forEach((noReplyShowing) => {\n              noReplyShowing.classList.add(\"hiddenReply\");\n              annoContainer.appendChild(noReplyShowing);\n            });\n            noLongerShowing.forEach((noReplyShowing) =>\n              noReplyShowing.classList.remove(\"showReply\")\n            );\n          }\n        }\n      });\n    } else console.warn(\"no replies to show for this annotation\");\n  };\n\n  grantPublic(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    auth.currentSession().then((s) => {\n      let updatedAcl = setPublicResourceAccess(this.state.resourceAcl, {\n        read: true,\n        append: false,\n        write: false,\n        control: false,\n      });\n      // ensure current user has control in the new ACL\n      updatedAcl = setAgentResourceAccess(updatedAcl, s.webId, {\n        read: true,\n        append: true,\n        write: true,\n        control: true,\n      });\n      saveAclFor(this.state.datasetWithAcl, updatedAcl, { fetch: auth.fetch })\n        .then(() => this.updateDatasetAcl())\n        .catch((e) => console.error(\"Could not grant public access: \", e));\n    });\n  }\n\n  revokePublic(e) {\n    console.log(\"Revoking. Old acl: \", this.state.resourceAcl);\n    e.stopPropagation();\n    e.preventDefault();\n    auth.currentSession().then((s) => {\n      let updatedAcl = setPublicResourceAccess(this.state.resourceAcl, {\n        read: false,\n        append: false,\n        write: false,\n        control: false,\n      });\n      // ensure current user has control in the new ACL\n      updatedAcl = setAgentResourceAccess(updatedAcl, s.webId, {\n        read: true,\n        append: true,\n        write: true,\n        control: true,\n      });\n\n      saveAclFor(this.state.datasetWithAcl, updatedAcl, { fetch: auth.fetch })\n        .then(() => this.updateDatasetAcl())\n        .catch((e) => console.error(\"Could not revoke public access: \", e));\n    });\n  }\n\n  renderSwitch = () => {\n    /* determine permission state of annotation in Solid Pod */\n    const date = this.props.annotation.created;\n    let permission;\n    let modifyPermissionsElement;\n    if (this.state.datasetWithAcl) {\n      if (getPublicAccess(this.state.datasetWithAcl).read)\n        permission = \"public\";\n      else if (Object.keys(getAgentAccessAll(this.state.datasetWithAcl)) > 1)\n        /* declare it as shared if it has any access info for more than one (assumed to be user)\n         * TODO check assumptions...\n         */\n        permission = \"shared\";\n      else permission = \"private\";\n    } else {\n      permission = \"unknown\";\n    }\n    // Logic to toggle public access on and off\n    // TODO allow sharing with individual agents using setAgentResourceAccess\n    if (!this.state.userMayModifyAccess) {\n      modifyPermissionsElement = (\n        <span className=\"accessPermissions\">No access</span>\n      );\n    } else {\n      if (permission !== \"public\") {\n        modifyPermissionsElement = (\n          <Toggle\n            checked={false}\n            onChange={this.grantPublic}\n            icons={{\n              unchecked: (\n                <svg\n                  aria-hidden=\"true\"\n                  focusable=\"false\"\n                  data-prefix=\"fas\"\n                  data-icon=\"lock\"\n                  className=\"svg-inline--fa fa-lock fa-w-14\"\n                  role=\"img\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 576 512\"\n                  vertical-align=\"middle\"\n                >\n                  <path\n                    fill=\"white\"\n                    d=\"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z\"\n                  ></path>\n                </svg>\n              ),\n            }}\n          />\n        );\n      } else if (permission === \"public\") {\n        modifyPermissionsElement = (\n          <Toggle\n            checked={true}\n            onChange={this.revokePublic}\n            icons={{\n              checked: (\n                <svg\n                  aria-hidden=\"true\"\n                  focusable=\"false\"\n                  data-prefix=\"fas\"\n                  data-icon=\"lock-open\"\n                  className=\"svg-inline--fa fa-lock-open fa-w-18\"\n                  role=\"img\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 576 512\"\n                >\n                  <path\n                    fill=\"white\"\n                    d=\"M423.5 0C339.5.3 272 69.5 272 153.5V224H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48h-48v-71.1c0-39.6 31.7-72.5 71.3-72.9 40-.4 72.7 32.1 72.7 72v80c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24v-80C576 68 507.5-.3 423.5 0z\"\n                  ></path>\n                </svg>\n              ),\n            }}\n          />\n        );\n      }\n    }\n    let commonAnnoComponents = (\n      <div>\n        <div className=\"hiddenConfirm\">\n          <div>\n            Delete this annotation and its replies?\n            <p>\n              <button className={\"delteYes\"} onClick={this.deleteAnno}>\n                yes\n              </button>\n              <button className={\"deleteNo\"} onClick={this.showConfirm}>\n                no\n              </button>\n            </p>\n          </div>\n        </div>\n        <div style={{ paddingTop: \"1.5%\" }}>\n          <button className=\"deleteButton\" onClick={this.showConfirm}>\n            <svg\n              aria-hidden=\"true\"\n              focusable=\"false\"\n              data-prefix=\"fas\"\n              data-icon=\"trash\"\n              className=\"svg-inline--fa fa-trash fa-w-14\"\n              role=\"img\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              viewBox=\"0 0 448 512\"\n              width=\"100%\"\n              height=\"100%\"\n            >\n              <path\n                fill=\"grey\"\n                d=\"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z\"\n              ></path>\n            </svg>\n          </button>\n          <button\n            className=\"infoButton\"\n            onMouseEnter={this.showDetails}\n            onMouseLeave={this.showDetails}\n          >\n            <svg\n              aria-hidden=\"true\"\n              focusable=\"false\"\n              data-prefix=\"far\"\n              data-icon=\"info-circle\"\n              className=\"svg-inline--fa fa-info-circle fa-w-16\"\n              role=\"img\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              viewBox=\"0 0 512 512\"\n              width=\"100%\"\n              height=\"100%\"\n            >\n              <path\n                fill=\"grey\"\n                d=\"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm0-338c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z\"\n              ></path>\n            </svg>\n          </button>\n          permissions: {modifyPermissionsElement}\n        </div>\n      </div>\n    );\n\n    let replyButtonsCluster = (\n      <div>\n        <div className=\"hiddenDetails\">\n          {\" \"}\n          <p className=\"date\">\n            Created on: {date}, access permissions: {permission}.\n          </p>\n        </div>\n        <button\n          className=\"showRepliesButton\"\n          name=\"showRepliesButton\"\n          onClick={this.onShowReplyClick}\n        >\n          Show Replies\n        </button>\n        <button\n          className=\"replyButton\"\n          name=\"replyButton\"\n          onClick={this.onClick}\n        >\n          Reply\n        </button>\n      </div>\n    );\n\n    //stuff that i am carrying around: the annotation's ID you are replying to, the body (currently sits under annotation.source) and the annotation's specific ID\n    const motivation = this.props.annotation.motivation;\n    const bodyD = this.props.annotation.body[0].value;\n    const bodyL = this.props.annotation.body[0].id;\n    const bodyMedia = this.props.annotation.body[0].id;\n    const target = this.props.annotation.target[0].id;\n    const repTarget = this.props.annotation.target;\n\n    const creator = this.props.annotation.creator || \"unknown\";\n    const selfId = this.props.annotation[\"@id\"];\n\n    // const originAnno = document.querySelectorAll(\"div[data-self-id]\");\n    // const innerBodyString = this.props.annotation.source;\n    // const selfIdData = selfId.dataset.selfId;\n    // const rootAnnoTargetIdData = rootAnnoTargetId.dataset.rootAnnotationId;\n\n    switch (motivation) {\n      case \"describing\":\n        return (\n          <div\n            className=\"rootAnno annoItem\"\n            data-target={target}\n            data-self-id={selfId}\n          >\n            {\" \"}\n            {commonAnnoComponents}\n            <p>{bodyD}</p>\n            {replyButtonsCluster}\n          </div>\n        );\n      case \"linking\":\n        if (bodyL.startsWith(\"http\")) {\n          return (\n            <div\n              className=\"rootAnno annoItem\"\n              data-target={target}\n              data-self-id={selfId}\n            >\n              <p>\n                {\"\"}\n                {commonAnnoComponents}\n                {\n                  <a\n                    href={bodyL}\n                    onClick=\"return false;\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    {bodyL}\n                  </a>\n                }\n              </p>\n              {replyButtonsCluster}\n            </div>\n          );\n        } else {\n          const appendURL = \"https://\" + bodyL;\n          return (\n            <div\n              className=\"rootAnno annoItem\"\n              data-target={target}\n              data-self-id={selfId}\n            >\n              {commonAnnoComponents}\n              <p>\n                {\"\"}\n                {\n                  <a\n                    href={appendURL}\n                    onClick=\"return false;\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    {bodyL}\n                  </a>\n                }\n              </p>\n              {replyButtonsCluster}\n            </div>\n          );\n        }\n\n      case \"trompa:cueMedia\":\n        const cleanMediaString = bodyMedia.split(\"#\")[0];\n        return (\n          <div\n            className=\"rootAnno annoItem\"\n            data-target={target}\n            data-self-id={selfId}\n          >\n            {\" \"}\n            {commonAnnoComponents}\n            <p>\n              {cleanMediaString}{\" \"}\n              <button className=\"playButton\" onClick={this.onPlayClick}>\n                {\" \"}\n                <img\n                  src={PlayLogo}\n                  alt=\"\"\n                  style={{\n                    width: \"5px\",\n                    alignContent: \"center\",\n                    textAlign: \"center\",\n                  }}\n                ></img>{\" \"}\n                play{\" \"}\n              </button>\n            </p>\n            {replyButtonsCluster}\n          </div>\n        );\n      case \"trompa:cueImage\":\n        return (\n          <div\n            className=\"rootAnno annoItem\"\n            data-target={target}\n            data-self-id={selfId}\n          >\n            {\" \"}\n            <div className=\"hiddenContainer\">\n              <a href={bodyMedia} target=\"_blank\" rel=\"noopener noreferrer\">\n                <img\n                  title=\"click for full res\"\n                  src={bodyMedia}\n                  alt=\"annotation\"\n                  style={{\n                    maxWidth: \"240px\",\n                    maxHeight: \"135px\",\n                    marginTop: \"5px\",\n                  }}\n                />\n              </a>\n            </div>\n            {commonAnnoComponents}\n            <p>\n              The content of this annotation is a picture, click the button to\n              see a preview{\" \"}\n              <button onClick={this.onPreviewclick}>\n                {this.state.previewButtonContent}{\" \"}\n              </button>\n            </p>\n            {replyButtonsCluster}\n          </div>\n        );\n      //FIXME: if deleting root anno what happens to replies? Still sittin in solidPOD but are not rendered... needs discussion\n      case \"trompa:playlist\":\n        return;\n\n      case \"replying\":\n        return (\n          <div\n            data-reply-annotation-target={repTarget}\n            data-self-id={selfId}\n            className=\"replyAnno hiddenReply\"\n          >\n            <div className=\"quoteContent\">\n              <button className=\"deleteButton\" onClick={this.deleteAnno}>\n                <svg\n                  aria-hidden=\"true\"\n                  focusable=\"false\"\n                  data-prefix=\"fas\"\n                  data-icon=\"trash\"\n                  className=\"svg-inline--fa fa-trash fa-w-14\"\n                  role=\"img\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 448 512\"\n                  width=\"100%\"\n                  height=\"100%\"\n                >\n                  <path\n                    fill=\"grey\"\n                    d=\"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z\"\n                  ></path>\n                </svg>\n              </button>\n              <button\n                className=\"infoButton\"\n                onMouseEnter={this.showReplyDetails}\n                onMouseLeave={this.showReplyDetails}\n              >\n                <svg\n                  aria-hidden=\"true\"\n                  focusable=\"false\"\n                  data-prefix=\"far\"\n                  data-icon=\"info-circle\"\n                  className=\"svg-inline--fa fa-info-circle fa-w-16\"\n                  role=\"img\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 512 512\"\n                  width=\"100%\"\n                  height=\"100%\"\n                >\n                  <path\n                    fill=\"grey\"\n                    d=\"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm0-338c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z\"\n                  ></path>\n                </svg>\n              </button>\n              <p>Reply: {bodyD}</p>\n              <span className=\"hiddenDetails\">\n                {\" \"}\n                <span className=\"date\">\n                  Created on: {date}, access permissions: {permission}.\n                </span>\n              </span>\n            </div>\n          </div>\n        );\n\n      default:\n        console.log(\n          \"no motivation provided defaulting to plain text annotation\",\n          motivation\n        );\n        return (\n          <div className=\"annoItem\" data-target={target}>\n            {\" \"}\n            <p>The plain text content of this annotation is {bodyD}</p>\n            <div className=\"date\">\n              Created on: {date} by {creator} with {motivation} motivation\n            </div>\n          </div>\n        );\n    }\n  };\n\n  render() {\n    return <div className=\"annoItemContainer\">{this.renderSwitch()}</div>;\n  }\n}\n\nexport default AnnotationItem;\n","/* annotationList is the annotationItem container. Filters the annotations in order to render only the one associated to the specific measure selected */\n/* they are ordered chronologically with sortedfilteredAnno and the onClick funciton is attacehd to the annotation item's body to highlight the annotated section of the score*/\n\nimport React from \"react\";\nimport AnnotationItem from \"./annotationItem\";\n//import PropTypes from \"prop-types\";\nexport class AnnotationList extends React.Component {\n  state = {\n    order: \"desc\",\n  };\n\n  render() {\n    const { order } = this.state;\n    const filtering = this.props.allEntries.filter((anno) =>\n      this.props.filteringEntries.includes(anno[\"@id\"])\n    );\n    const sortedFilteredAnno = filtering.sort((a, b) => {\n      const isReverse = order === \"asc\" ? 1 : -1;\n      return isReverse * a.created.localeCompare(b.created);\n    });\n\n    function onClick(e) {\n      // e.preventDefault();\n      // e.stopPropagation();\n      console.log(\"i am being clicked\");\n      // figure out this element's focus Id\n      const focusId = Array.from(e.currentTarget.classList).filter((c) =>\n        c.startsWith(\"focus-\")\n      );\n      if (focusId.length > 1) {\n        console.warn(\"Element with multiple focus Ids!\", e.target);\n      }\n      // remove focus off previous inFocus elements (now outdated)\n      const noLongerInFocusList = Array.from(\n        document.getElementsByClassName(\"inFocus\")\n      );\n      noLongerInFocusList.forEach((noFocusElement) =>\n        noFocusElement.classList.remove(\"inFocus\")\n      );\n      // add focus to newly inFocus elements\n      const inFocusList = Array.from(\n        document.getElementsByClassName(focusId[0])\n      );\n      inFocusList.forEach((focusElement) =>\n        focusElement.classList.add(\"inFocus\")\n      );\n      // scroll page to highlighted item\n      // document\n      //   .querySelector(\".inFocus\")\n      //   .scrollIntoView({ behavior: \"smooth\" });\n    }\n\n    return (\n      <div className=\"listContainer\" id=\"listContainer\">\n        {sortedFilteredAnno.map((item) => {\n          const annoIdFragment = item[\"@id\"].substr(\n            item[\"@id\"].lastIndexOf(\"/\") + 1\n          );\n          return (\n            <div\n              className={\"focus-\" + annoIdFragment}\n              onClick={onClick}\n              key={item[\"@id\"]}\n              id={annoIdFragment}\n            >\n              <AnnotationItem\n                annotation={item}\n                onAnnoReplyHandler={this.props.onAnnoReplyHandler}\n                onMediaClick={this.props.onMediaClick}\n                replyAnnotationTarget={this.props.replyAnnotationTarget}\n                showReplyHandler={this.props.showReplyHandler}\n                areRepliesVisible={this.props.areRepliesVisible}\n                onRefreshClick={this.props.onRefreshClick}\n              />\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\n// AnnotationList.propTypes = {\n//   entries: PropTypes.array.isRequired,\n// };\n\nexport default AnnotationList;\n","import React from \"react\";\nimport auth from \"solid-auth-client\";\nclass PlaylistItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      resp: \"\",\n    };\n    this.delete = this.delete.bind(this);\n  }\n  delete() {\n    auth\n      .fetch(this.props.annotation[\"@id\"], { method: \"DELETE\" })\n      .then(async (response) => {\n        const data = await response.json();\n        // check for error response\n        if (!response.ok) {\n          // get error message from body or default to response status\n          const error = (data && data.message) || response.status;\n          return Promise.reject(error);\n        }\n\n        this.setState({ resp: \"success\" });\n      })\n      .then(this.props.onRefreshClick())\n      .catch(() => {\n        console.warn(\"Your annotation has been deleted, refreshing...\");\n      });\n  }\n\n  render() {\n    const selfId = this.props.annotation[\"@id\"];\n    const title = this.props.annotation.body[0].seconds;\n    const link = this.props.annotation.body[0].value;\n\n    return (\n      <div className=\"rootAnno playlistItem\">\n        <p>{title}</p>\n        <iframe\n          src={link}\n          title={selfId}\n          frameBorder=\"0\"\n          width=\"400\"\n          height=\"60\"\n        />\n        <button onClick={this.delete}>del</button>\n      </div>\n    );\n  }\n}\n\nexport default PlaylistItem;\n","import React from \"react\";\nimport PlaylistItem from \"./playlistItem\";\nclass renditionsPlaylist extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      visible: false,\n    };\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick() {\n    let target = document.querySelector(\".playlist\");\n    if (this.state.visible === false) {\n      this.setState({ visible: !this.state.visible });\n      target.classList.remove(\"hidden\");\n    } else {\n      if (this.state.visible === true) {\n        target.classList.add(\"hidden\");\n        this.setState({ visible: !this.state.visible });\n      }\n    }\n  }\n  render() {\n    return (\n      <div>\n        <button className=\"renditionButton\" onClick={this.onClick}>\n          show renditions playlist\n        </button>\n        <div className=\"playlist hidden\">\n          {this.props.allEntries.map((anno) => {\n            const motivation = anno.motivation;\n            return (\n              motivation === \"trompa:playlist\" && (\n                <div key={anno[\"@id\"]}>\n                  <PlaylistItem\n                    annotation={anno}\n                    onRefreshClick={this.props.onRefreshClick}\n                  />\n                </div>\n              )\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default renditionsPlaylist;\n","import React, { Component } from \"react\";\nimport SelectableScore from \"selectable-score/lib/selectable-score\";\nimport NextPageButton from \"selectable-score/lib/next-page-button.js\";\nimport PrevPageButton from \"selectable-score/lib/prev-page-button.js\";\nimport AnnotationSubmitter from \"../annotations/annotationSubmitter.js\";\nimport SelectionHandler from \"../annotations/selectionHandler.js\";\nimport AnnotationList from \"../annotations/annotationList.js\";\nimport ReactPlayer from \"react-player\";\nimport Modal from \"react-modal\";\nimport RenditionsPlaylist from \"../annotations/renditionsPlaylist.js\";\n\n//Modal.setAppElement(\"root\");\n//\n//const vAdjust = 26; // num. pixels to nudge down anno measureBoxes+\nvar scale = 50;\n\nlet viewPortHeight = window.outerHeight;\nlet viewPortWidth = window.outerWidth;\n// prettier-ignore\nvar height = (viewPortHeight < 1439) ? 2000 : 2500;\n// prettier-ignore\nvar width = (viewPortWidth > 1925) ? 2800 : 2000;\n\n// height /= scale / 100;\n// width /= scale / 100;\n\nexport default class SelectableScoreApp extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      annoValue: \"\",\n      selection: [],\n      annotationType: \"\",\n      placeholder: \"Add your annotation...\",\n      uri:\n        \"https://raw.githubusercontent.com/trompamusic-encodings/Mahler_Symphony_No4_Doblinger-4hands/master/Mahler_No4_1-Doblinger-4hands.mei\",\n      selectorString: \"\",\n      buttonContent: \"Submit to your Solid POD\",\n      replyAnnotationTarget: [],\n      currentAnnotation: [],\n      toggleAnnotationRetrieval: false,\n      hasContent: true,\n      isClicked: false,\n      showMEIInput: true,\n      currentMedia: this.props.currentMedia || \"\",\n      seekTo: \"\",\n      measuresToAnnotationsMap: {},\n      annoToDisplay: [],\n      helpWindowIsActive: false,\n      replyAnnotationTargetId: \"\",\n      areRepliesVisible: false,\n      vrvOptions: {\n        scale: scale,\n        adjustPageHeight: 0,\n        pageHeight: height,\n        pageWidth: width,\n        footer: \"none\",\n        unit: 6,\n      },\n    };\n    this.handleSelectionChange = this.handleSelectionChange.bind(this);\n    this.handleScoreUpdate = this.handleScoreUpdate.bind(this);\n    this.handleStringChange = this.handleStringChange.bind(this);\n    this.onResponse = this.onResponse.bind(this);\n    this.onRefreshClick = this.onRefreshClick.bind(this);\n    this.onReceiveAnnotationContainerContent = this.onReceiveAnnotationContainerContent.bind(\n      this\n    );\n    this.onSubmitMEI = this.onSubmitMEI.bind(this);\n    this.onMEIInputChange = this.onMEIInputChange.bind(this);\n    this.hideMEIInput = this.hideMEIInput.bind(this);\n    this.onAnnoTypeChange = this.onAnnoTypeChange.bind(this);\n    this.onAnnoReplyHandler = this.onAnnoReplyHandler.bind(this);\n    this.convertCoords = this.convertCoords.bind(this);\n    this.activateModal = this.activateModal.bind(this);\n    this.deactivateModal = this.deactivateModal.bind(this);\n    this.onMediaClick = this.onMediaClick.bind(this);\n    this.showReplyHandler = this.showReplyHandler.bind(this);\n    this.handleAnnoShowingUpdate = this.handleAnnoShowingUpdate.bind(this);\n    this.zoomIn = this.zoomIn.bind(this);\n    this.zoomOut = this.zoomOut.bind(this);\n    this.player = React.createRef();\n    this.handlePageTurn = this.handlePageTurn.bind(this);\n  }\n\n  zoomIn() {\n    let step = 5;\n    let initialZoom = this.state.vrvOptions.scale;\n    let initialHeight = this.state.vrvOptions.pageHeight;\n    let initialWidth = this.state.vrvOptions.pageWidth;\n    //   vrvOptions.scale = vrvOptions.scale + step;\n    //   vrvOptions.pageHeight = (pageHeight * 100) / vrvOptions.scale;\n    //   vrvOptions.pageWidth = (pageWidth * 100) / vrvOptions.scale;\n    //\n    const newVrvOptions = Object.assign({}, this.state.vrvOptions);\n    newVrvOptions.scale = initialZoom + step;\n    //prettier-ignore\n    newVrvOptions.pageHeight = initialHeight - (newVrvOptions.scale * 5);\n    //prettier-ignore\n    newVrvOptions.pageWidth = initialWidth - (newVrvOptions.scale * 2);\n    if (newVrvOptions.scale < 50) {\n      //prettier-ignore\n      newVrvOptions.pageWidth = initialWidth - (newVrvOptions.scale * 5);\n    }\n\n    if (newVrvOptions.scale < 40) {\n      //prettier-ignore\n      newVrvOptions.pageHeight = initialHeight - (newVrvOptions.scale * 8);\n      //prettier-ignore\n      newVrvOptions.pageWidth = initialWidth - (newVrvOptions.scale * 5);\n    }\n    if (viewPortWidth >= 1925) {\n      if (newVrvOptions.pageWidth > 3500) {\n        newVrvOptions.pageWidth = 3500;\n      }\n    }\n\n    if (newVrvOptions.scale >= 80) {\n      console.log(\"max zoom reached\");\n      return;\n    }\n    // if (newVrvOptions.pageWidth >= 2380) {\n    //   newVrvOptions.pageWidth = 2380;\n    // }\n    // if (newVrvOptions.pageWidth < 1500 || newVrvOptions.pageWidth > 1500) {\n    //   newVrvOptions.pageWidth = 1500;\n    // }\n    // if (newVrvOptions.pageHeight < 1500 || newVrvOptions.pageHeight > 1500) {\n    //   newVrvOptions.pageHeight = 1500;\n    // }\n    console.log(\n      \"ZOOM INCREASE\",\n      newVrvOptions.scale,\n      \"page w\",\n      newVrvOptions.pageWidth,\n      \"page h\",\n      newVrvOptions.pageHeight\n    );\n    this.setState({ vrvOptions: newVrvOptions });\n  }\n\n  zoomOut() {\n    let step = 5;\n    let initialZoom = this.state.vrvOptions.scale;\n    let initialHeight = this.state.vrvOptions.pageHeight;\n    let initialWidth = this.state.vrvOptions.pageWidth;\n    //   vrvOptions.scale = vrvOptions.scale + step;\n    //   vrvOptions.pageHeight = (pageHeight * 100) / vrvOptions.scale;\n    //   vrvOptions.pageWidth = (pageWidth * 100) / vrvOptions.scale;\n    //\n    const newVrvOptions = Object.assign({}, this.state.vrvOptions);\n    newVrvOptions.scale = initialZoom - step;\n    //prettier-ignore\n    newVrvOptions.pageHeight = initialHeight + (newVrvOptions.scale * 5);\n    //prettier-ignore\n    newVrvOptions.pageWidth = initialWidth + (newVrvOptions.scale * 2);\n    if (newVrvOptions.scale < 50) {\n      //prettier-ignore\n      newVrvOptions.pageWidth = initialWidth + (newVrvOptions.scale * 5);\n    }\n\n    if (newVrvOptions.scale < 40) {\n      //prettier-ignore\n      newVrvOptions.pageHeight = initialHeight + (newVrvOptions.scale * 8);\n      //prettier-ignore\n      newVrvOptions.pageWidth = initialWidth + (newVrvOptions.scale * 5);\n    }\n\n    if (newVrvOptions.scale <= 25) {\n      console.log(\"minimum zoom reached\");\n      return;\n    }\n    // if (newVrvOptions.pageWidth < 1500 || newVrvOptions.pageWidth > 1500) {\n    //   newVrvOptions.pageWidth = 1500;\n    // }\n    // if (newVrvOptions.pageHeight < 1500 || newVrvOptions.pageHeight > 1500) {\n    //   newVrvOptions.pageHeight = 1500;\n    // }\n    console.log(\n      \"ZOOM DECREASE\",\n      newVrvOptions.scale,\n      \"page w\",\n      newVrvOptions.pageWidth,\n      \"page h\",\n      newVrvOptions.pageHeight\n    );\n    this.setState({ vrvOptions: newVrvOptions });\n  }\n  showReplyHandler = () => {\n    this.setState({ areRepliesVisible: !this.state.areRepliesVisible });\n  };\n  activateModal = () => {\n    this.setState({ helpWindowIsActive: true });\n  };\n\n  deactivateModal = () => {\n    this.setState({ helpWindowIsActive: false });\n  };\n\n  convertCoords(elem) {\n    if (\n      document.getElementById(elem.getAttribute(\"id\")) &&\n      elem.style.display !== \"none\" &&\n      (elem.getBBox().x !== 0 || elem.getBBox().y !== 0)\n    ) {\n      const x = elem.getBBox().x;\n      const width = elem.getBBox().width;\n      const y = elem.getBBox().y;\n      const height = elem.getBBox().height;\n      const offset = elem.closest(\"svg\").parentElement.getBoundingClientRect();\n      const matrix = elem.getScreenCTM();\n      return {\n        x: matrix.a * x + matrix.c * y + matrix.e - offset.left,\n        y: matrix.b * x + matrix.d * y + matrix.f - offset.top,\n        x2: matrix.a * (x + width) + matrix.c * y + matrix.e - offset.left,\n        y2: matrix.b * x + matrix.d * (y + height) + matrix.f - offset.top,\n      };\n    } else {\n      console.warn(\"Element unavailable on page: \", elem.getAttribute(\"id\"));\n      return { x: 0, y: 0, x2: 0, y2: 0 };\n    }\n  }\n\n  onAnnoTypeChange = (e) =>\n    this.setState({\n      annotationType: e.target.value,\n      placeholder: e.target.placeholder,\n      buttonContent: \"Submit to your Solid POD\",\n    });\n\n  handleStringChange(selectorString) {\n    this.setState({ selectorString }, () =>\n      console.log(this.state.selectorString)\n    );\n  }\n\n  handleSelectionChange(selection) {\n    this.setState({ selection });\n    /* and anything else your app needs to do when the selection changes */\n  }\n\n  onMEIInputChange = (e) => {\n    this.setState({ uri: e.target.value });\n  };\n\n  hideMEIInput() {\n    this.setState({ showMEIInput: !this.state.showMEIInput });\n  }\n  //////////// NEEDS TO WIPE TARGET REPLY AFTER RPELYING TO IT ALSO THE ANNOTATION TYPE HANDLING IS MESSY //////////////////\n  onAnnoReplyHandler(replyTarget, replyTargetId) {\n    this.setState({\n      annotationType: \"replying\",\n      placeholder: \"you are replying to the selected annotation\",\n      buttonContent: \"Reply to selected Solid annotation\",\n      replyAnnotationTarget: replyTarget,\n      replyAnnotationTargetId: replyTargetId,\n    });\n  }\n\n  onSubmitMEI = () => {\n    this.setState(\n      {\n        isClicked: true,\n      },\n      () => {\n        this.hideMEIInput();\n      }\n    );\n  };\n\n  onResponse(resp) {\n    console.log(resp);\n    if (resp.status === 201) {\n      this.setState(\n        {\n          toggleAnnotationRetrieval: true,\n        },\n        () => {\n          this.setState({\n            toggleAnnotationRetrieval: false,\n            annotationType: \"\",\n            replyAnnotationTarget: [],\n            replyAnnotationTargetId: \"\",\n            placeholder: \"Add your annotation...\",\n            annoToDisplay: [],\n          });\n        }\n      );\n    } else if (resp.status === 404) {\n      alert(\"folder not found, check your annotation container path!\");\n    }\n  }\n\n  onRefreshClick() {\n    if (this.state.hasContent === false) {\n      return;\n    } else\n      this.setState(\n        {\n          toggleAnnotationRetrieval: true,\n        },\n        () => {\n          this.setState({\n            toggleAnnotationRetrieval: false,\n            annotationType: \"\",\n            replyAnnotationTarget: [],\n            replyAnnotationTargetId: \"\",\n            placeholder: \"Add your annotation...\",\n            annoToDisplay: [],\n          });\n        }\n      );\n  }\n\n  onMediaClick(bodyMedia) {\n    console.log(\"button click\", bodyMedia);\n    //appends http fragment to avoid partial linking error\n    //const mediaCue = bodies[0][\"id\"];\n    // TODO validate properly\n    const currentMedia = bodyMedia.split(\"#\")[0];\n    const seekTo = bodyMedia.split(\"#\")[1].replace(\"t=\", \"\");\n    console.log(\"Setting up seek to: \", currentMedia, seekTo);\n    this.setState({ currentMedia }, () => this.player.current.seekTo(seekTo));\n  }\n\n  onReceiveAnnotationContainerContent(content) {\n    if (!content || !content.length) {\n      alert(\"no annotation to retrieve\");\n      const noLongerInFocusList = Array.from(\n        document.getElementsByClassName(\"inFocus\")\n      );\n      noLongerInFocusList.forEach((noFocusElement) =>\n        noFocusElement.classList.remove(\"inFocus\")\n      );\n      document.querySelectorAll(\".measureBox\").forEach((mb) => mb.remove());\n      document\n        .querySelectorAll(\".measureBoxBackground\")\n        .forEach((mb) => mb.remove());\n      this.setState(\n        {\n          hasContent: false,\n        },\n        () => {\n          console.log(this.state.hasContent, \"no content to retrieve\");\n          this.setState({ hasContent: true });\n        }\n      );\n      return;\n    }\n    // FIXME: Validate that these are (TROMPA?) Web Annotations\n    content = content.filter((c) => c[\"@id\"].endsWith(\".jsonld\"));\n\n    let measuresToAnnotationsMapList = content.map((anno) => {\n      let distinctMeasures = [];\n      // replying annotations don't have distinct measures since they target\n      // annotations, *not* MEI elements\n      if (anno.motivation !== \"replying\") {\n        const measures = anno.target\n          .map((jsonTarget) => {\n            const targetId = jsonTarget.id;\n            const fragment = targetId.substr(targetId.lastIndexOf(\"#\"));\n            const element = document.querySelector(fragment);\n            let measure = \"\";\n            if (element) {\n              measure = element.closest(\".measure\");\n            }\n            return measure;\n          })\n          .filter((el) => el); // ensure element exists on screen\n        distinctMeasures = [...new Set(measures)];\n      }\n      return { annoId: anno[\"@id\"], measures: distinctMeasures };\n    });\n    let newMap = {};\n    measuresToAnnotationsMapList.forEach((measureToAnnoMap) => {\n      measureToAnnoMap.measures.forEach((m) => {\n        const mId = m.getAttribute(\"id\");\n        if (mId in newMap) {\n          newMap[mId].push(measureToAnnoMap.annoId);\n        } else {\n          newMap[mId] = [measureToAnnoMap.annoId];\n        }\n      });\n    });\n\n    this.setState(\n      { currentAnnotation: content, measuresToAnnotationsMap: newMap },\n      () => {\n        const noLongerInFocusList = Array.from(\n          document.getElementsByClassName(\"inFocus\")\n        );\n        noLongerInFocusList.forEach((noFocusElement) =>\n          noFocusElement.classList.remove(\"inFocus\")\n        );\n        // delete any existing measure boxes so we can redraw from blank slate\n        document.querySelectorAll(\".measureBox\").forEach((mb) => mb.remove());\n        document\n          .querySelectorAll(\".measureBoxBackground\")\n          .forEach((mb) => mb.remove());\n        console.log(\"Mapped annotaitons \", newMap);\n        console.log(\"current annotations \", content);\n        // draw bounding boxes for all measures containing annotations\n        const annotatedMeasuresOnScreen = Object.keys(\n          this.state.measuresToAnnotationsMap\n        ).filter(\n          (measureId) => document.querySelectorAll(\"#\" + measureId).length\n        );\n        console.log(\n          \"Annotated measures on screen: \",\n          annotatedMeasuresOnScreen\n        );\n        annotatedMeasuresOnScreen.forEach((measureId) => {\n          const coords = this.convertCoords(\n            document.querySelector(\"#\" + measureId)\n          );\n          console.log(\"Coords: \", coords);\n          const measureBox = document.createElement(\"div\");\n          const measureBoxBackground = document.createElement(\"div\");\n\n          const coordsBox = {\n            left: Math.floor(coords.x),\n            top: Math.floor(coords.y),\n            width: Math.ceil(coords.x2 - coords.x),\n            height: Math.ceil(coords.y2 - coords.y),\n          };\n          console.log(\"Coords box: \", coordsBox);\n          measureBox.setAttribute(\"id\", \"measureBox-\" + measureId);\n          measureBox.setAttribute(\"class\", \"measureBox\");\n          measureBox.setAttribute(\n            \"style\",\n            \"position: absolute;\" +\n              \"background: rgba(0, 0, 0, 0);\" +\n              \"left: \" +\n              coordsBox.left +\n              \"px;\" +\n              \"top: \" +\n              coordsBox.top +\n              \"px;\" +\n              \"width: \" +\n              coordsBox.width +\n              \"px;\" +\n              \"height: \" +\n              coordsBox.height +\n              \"px;\" +\n              \"z-index: 1\"\n          );\n\n          measureBoxBackground.setAttribute(\n            \"id\",\n            \"measureBoxBackground-\" + measureId\n          );\n          measureBoxBackground.setAttribute(\"class\", \"measureBoxBackground\");\n          measureBoxBackground.classList.remove(\"isOpen\");\n          measureBoxBackground.classList.add(\"isClosed\");\n          measureBoxBackground.setAttribute(\n            \"style\",\n            \"position: absolute;\" +\n              // \"background: rgba(241, 145, 0, 0.25);\" +\n              // \"border:1px solid orange;\" +\n              \"left: \" +\n              coordsBox.left +\n              \"px;\" +\n              \"top: \" +\n              coordsBox.top +\n              \"px;\" +\n              \"width: \" +\n              coordsBox.width +\n              \"px;\" +\n              \"height: \" +\n              coordsBox.height +\n              \"px;\" +\n              \"z-index: -1\"\n          );\n          console.log(\"TRYING TO DRAW\", measureBox);\n          document\n            .querySelector(\".annotationBoxesContainer\")\n            .appendChild(measureBox);\n          document\n            .querySelector(\".annotationBoxesContainer\")\n            .appendChild(measureBoxBackground);\n\n          // FIXME: might need to work more on the onClick interaction\n          // e.preventDefault();\n          // const isBoxOpen = Array.from(e.currentTarget.classList).filter((c) =>\n          //   c.startsWith(\"measureBox\")\n          // );\n          // if (isBoxOpen.length > 1) {\n          //   console.warn(\"too many open boxes\", e.target);\n          // }\n          // // remove focus off previous inFocus elements (now outdated)\n          // const noLongerOpen = Array.from(\n          //   document.getElementsByClassName(\"isOpen\")\n          // );\n          // noLongerOpen.forEach((noFocusElement) =>\n          //   noFocusElement.classList.remove(\"isOpen\")\n          // );\n          // // add focus to newly inFocus elements\n          // const inOpenList = Array.from(\n          //   document.getElementsByClassName(isBoxOpen[0])\n          // );\n          // inOpenList.forEach((focusElement) =>\n          //   focusElement.classList.add(\"isOpen\")\n          // );\n\n          measureBox.onclick = (e) => {\n            const noLongerInFocusList = Array.from(\n              document.getElementsByClassName(\"inFocus\")\n            );\n            noLongerInFocusList.forEach((noFocusElement) =>\n              noFocusElement.classList.remove(\"inFocus\")\n            );\n            const bgBoxes = document.querySelectorAll(\".measureBoxBackground\");\n            const frontBox = e.target.closest(\".measureBox\");\n            bgBoxes.forEach((box) => {\n              box.classList.add(\"isClosed\");\n              box.classList.remove(\"isOpen\");\n              const bgBoxId = box.id.split(\"measureBoxBackground-\")[1];\n              const frontBoxId = frontBox.id.split(\"measureBox-\")[1];\n\n              if (frontBoxId === bgBoxId) {\n                box.classList.remove(\"isClosed\");\n                box.classList.add(\"isOpen\");\n                // box.setAttribute(\n                //   \"style\",\n                //   \"position: absolute;\" +\n                //     \"background: rgb(255, 255, 255);\" +\n                //     \"border:1px solid orange;\" +\n                //     \"left: \" +\n                //     coordsBox.left +\n                //     \"px;\" +\n                //     \"top: \" +\n                //     coordsBox.top +\n                //     \"px;\" +\n                //     \"width: \" +\n                //     coordsBox.width +\n                //     \"px;\" +\n                //     \"height: \" +\n                //     coordsBox.height +\n                //     \"px;\" +\n                //     \"z-index: -1\"\n                // );\n              }\n            });\n\n            const noLongerShowing = Array.from(\n              document.getElementsByClassName(\"showReply\")\n            );\n            console.log(\"no longer showing \", noLongerShowing);\n            //hides them\n            if (noLongerShowing.length) {\n              //const replyHolder = document.createElement(\"div\");\n              if (this.state.areRepliesVisible === true) {\n                this.setState({ areRepliesVisible: false });\n              }\n              const annoContainer = document.querySelector(\".listContainer\");\n              console.log(annoContainer);\n              //annoContainer.appendChild(replyHolder);\n              noLongerShowing.forEach((noReplyShowing) => {\n                noReplyShowing.classList.add(\"hiddenReply\");\n                annoContainer.appendChild(noReplyShowing);\n              });\n              noLongerShowing.forEach((noReplyShowing) =>\n                noReplyShowing.classList.remove(\"showReply\")\n              );\n            }\n            this.handleAnnoShowingUpdate(content, measureId);\n          };\n        });\n      }\n    );\n    console.log(\"iteration succeded\");\n\n    content.forEach((anno) => {\n      if (anno.motivation !== \"replying\") {\n        anno.target.forEach((jsonTarget) => {\n          const bodies = anno.body;\n          const targetId = jsonTarget.id;\n          const fragment = targetId.substr(targetId.lastIndexOf(\"#\"));\n          const element = document.querySelector(fragment);\n          if (!element) {\n            return console.warn(\"no content has been found\");\n          }\n          const annoId = anno[\"@id\"];\n          const annoIdFragment = annoId.substr(annoId.lastIndexOf(\"/\") + 1);\n          //checks what's the motivation of the target\n          switch (anno.motivation) {\n            case \"describing\":\n              if (bodies.length) {\n                if (\"value\" in bodies[0]) {\n                  // const title = document.createElementNS(\n                  //   \"http://www.w3.org/2000/svg\",\n                  //   \"title\"\n                  // );\n                  // Embeds the annotation text into this title node\n                  //title.innerHTML = bodies[0][\"value\"];\n                  //element.insertBefore(title, element.firstChild);\n                  //element.classList.add(anno.anno.motivation);\n                  element.classList.add(\"focus-\" + annoIdFragment);\n                }\n              }\n              break;\n            case \"linking\":\n              if (bodies.length) {\n                // make the target clickable, linking to the (first) body URI\n                // element.addEventListener(\n                //   \"click\",\n                //   function () {\n                //     //appends http fragment to avoid partial linking error\n                //     const URL = bodies[0][\"id\"];\n                //     if (URL.startsWith(\"http\")) {\n                //       window.open(URL, \"_blank\");\n                //     } else {\n                //       const appendURL = \"https://\" + URL;\n                //       window.open(appendURL, \"_blank\");\n                //     }\n                //   },\n                //   true\n                // );\n                // and turn the cursor into a pointer as a hint that it's clickable\n                element.classList.add(\"focus-\" + annoIdFragment);\n                //element.classList.add(anno.anno.motivation);\n                element.classList.add(\"focus-\" + annoIdFragment);\n              }\n              break;\n            case \"trompa:cueMedia\":\n              if (bodies.length) {\n                // make the target clickable, seeking player to the (first) body media cue\n                // element.onMediaClick = () => {\n                //   //appends http fragment to avoid partial linking error\n                //   const mediaCue = bodies[0][\"id\"];\n                //   // TODO validate properly\n                //   const currentMedia = mediaCue.split(\"#\")[0];\n                //   const seekTo = mediaCue.split(\"#\")[1].replace(\"t=\", \"\");\n                //   console.log(\"Setting up seek to: \", currentMedia, seekTo);\n                //   this.setState({ currentMedia }, () =>\n                //     this.player.current.seekTo(seekTo)\n                //   );\n                // };\n                // and turn the cursor into a pointer as a hint that it's clickable\n                element.classList.add(\"focus-\" + annoIdFragment);\n                //element.classList.add(\"cueMedia\");\n              }\n              break;\n            case \"trompa:cueImage\":\n              if (bodies.length) {\n                element.classList.add(\"focus-\" + annoIdFragment);\n                //element.classList.add(\"cueMedia\");\n              }\n              break;\n            case \"trompa:playlist\": {\n              return;\n            }\n\n            default:\n              console.log(\n                \"sorry, don't know what to do for this annotation boss\"\n              );\n          }\n        });\n      }\n    });\n  }\n  handleAnnoShowingUpdate(content, measureId) {\n    let _annoIds = content.map((jsonIds) => {\n      const annotationsIds = jsonIds[\"@id\"];\n      return annotationsIds;\n    });\n    let _filteredAnnoIds = this.state.measuresToAnnotationsMap[measureId];\n    let compare = _annoIds.filter((anno) => _filteredAnnoIds.includes(anno));\n    // compare has all annotation IDs *for our measure*\n    // we want those, PLUS all replying annotations (which aren't tied to measures)\n    const annotationsToDisplay = [\n      ...compare,\n      ...content\n        .filter((anno) => anno.motivation === \"replying\") // get the replies\n        .map((anno) => anno[\"@id\"]), // and return their IDs\n    ];\n    console.log(\"to display: \", annotationsToDisplay);\n    this.setState({\n      annoToDisplay: annotationsToDisplay,\n    });\n  }\n\n  handleScoreUpdate(scoreElement) {\n    console.log(\"Received updated score DOM element: \", scoreElement);\n    this.onRefreshClick();\n  }\n\n  handlePageTurn() {\n    document.querySelectorAll(\".measureBox\").forEach((mb) => mb.remove());\n    document\n      .querySelectorAll(\".measureBoxBackground\")\n      .forEach((mb) => mb.remove());\n  }\n\n  render() {\n    const modal = this.state.helpWindowIsActive ? (\n      <Modal\n        isOpen={this.state.helpWindowIsActive}\n        onRequestClose={this.deactivateModal}\n        contentLabel=\"my modal\"\n        className=\"mymodal\"\n        overlayClassName=\"myoverlay\"\n        ariaHideApp={false}\n      >\n        <div>\n          <header className=\"modal-header\">\n            <h1 className=\"modal-title\">Help section</h1>\n          </header>\n          <div className=\"modal-body\">\n            <h3>\n              Below you can find some tips on how to use the annotation tool:\n            </h3>\n            <br />\n            <div style={{ height: 500, overflow: \"auto\" }}>\n              <h4>How do I create an annotation?</h4>\n              <p>\n                - Select the type of selection you want to use (note, measure,\n                directives etc)\n                <br />\n                <br />- Drag across the score in order to select the elements\n                you want to annotate\n                <br />\n                <br />- Select the type of annotation you wish to submit\n                (description, link etc)\n                <br />\n                <br />- Type the text or paste the URL you wish to attach to the\n                annotation\n                <br />\n                <br />- Click the green submit button\n              </p>\n              <h4>I made a mistake in my annotation, can I delete it?</h4>\n              <p>\n                - Yes, you can delete you annotation by clicking the rubbish bin\n                icon in the annotation item and click yes to delete it\n              </p>\n\n              <h4>\n                I have replied to an annotation but I cant see my reply, where\n                is it?\n              </h4>\n              <p>\n                - You can see all the replies to the specific annotation by\n                clicking the show replies button in the annotation you are\n                replying to\n              </p>\n              <h4>\n                Can I create a different type of reply (media or image content)?\n              </h4>\n              <p>\n                - Not right now, this feature will be released in a future\n                version of the software\n              </p>\n              <h4>\n                How does the solid pod system work, is my data really safe?\n              </h4>\n              <p>\n                - Solid was purposely built for data safety and protection, and\n                by design everything contained in the pod is private unless\n                specified. For more information visit the{\" \"}\n                <a\n                  href=\"https://solidproject.org/\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  solid project\n                </a>{\" \"}\n                page for more info\n              </p>\n              <h4>I have found a bug, what can i do?</h4>\n              <p>\n                - Please submit a bug report to fzuba002@gold.ac.uk describing\n                the nature of the bug and how to reproduce it, make sure to\n                include browser model and operating system used. Thanks! :)\n              </p>\n            </div>\n          </div>\n          <footer className=\"modal-footer\">\n            <button onClick={this.deactivateModal}>close</button>\n          </footer>\n        </div>\n      </Modal>\n    ) : (\n      false\n    );\n    return (\n      <div>\n        {this.state.isClicked === true && (\n          <div>\n            <div className=\"scoreContainer\">\n              <div className=\"annotationBoxesContainer\" />\n              <SelectableScore\n                uri={this.state.uri}\n                annotationContainerUri={this.props.submitUri}\n                vrvOptions={this.state.vrvOptions}\n                onSelectionChange={this.handleSelectionChange}\n                selectorString={this.state.selectorString}\n                onScoreUpdate={this.handleScoreUpdate}\n                onReceiveAnnotationContainerContent={\n                  this.onReceiveAnnotationContainerContent\n                }\n                toggleAnnotationRetrieval={this.state.toggleAnnotationRetrieval}\n                selectionArea=\".scoreContainer\"\n              />\n            </div>\n            <div className=\"prevPageButton\" onClick={this.handlePageTurn}>\n              <PrevPageButton\n                buttonContent={\n                  <svg\n                    aria-hidden=\"true\"\n                    focusable=\"false\"\n                    data-prefix=\"far\"\n                    data-icon=\"arrow-to-left\"\n                    className=\"svg-inline--fa fa-arrow-to-left fa-w-14\"\n                    role=\"img\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    viewBox=\"0 0 448 512\"\n                    width=\"100%\"\n                    height=\"100%\"\n                  >\n                    <path\n                      fill=\"grey\"\n                      d=\"M247.9 412.5l-148.4-148c-4.7-4.7-4.7-12.3 0-17l148.4-148c4.7-4.7 12.3-4.7 17 0l19.6 19.6c4.8 4.8 4.7 12.5-.2 17.1L187.2 230H436c6.6 0 12 5.4 12 12v28c0 6.6-5.4 12-12 12H187.2l97.1 93.7c4.8 4.7 4.9 12.4.2 17.1l-19.6 19.6c-4.7 4.8-12.3 4.8-17 .1zM52 436V76c0-6.6-5.4-12-12-12H12C5.4 64 0 69.4 0 76v360c0 6.6 5.4 12 12 12h28c6.6 0 12-5.4 12-12z\"\n                    ></path>\n                  </svg>\n                }\n                uri={this.state.uri}\n              />\n            </div>\n            <button onClick={this.zoomOut} className=\"zoomOut\">\n              <svg\n                aria-hidden=\"true\"\n                focusable=\"false\"\n                data-prefix=\"fas\"\n                data-icon=\"search-minus\"\n                className=\"svg-inline--fa fa-search-minus fa-w-16\"\n                role=\"img\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 512 512\"\n                width=\"100%\"\n                height=\"100%\"\n              >\n                <path\n                  fill=\"grey\"\n                  d=\"M304 192v32c0 6.6-5.4 12-12 12H124c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z\"\n                ></path>\n              </svg>\n            </button>\n            {/* <div className=\"divider\"></div> */}\n            {/* pass anything as buttonContent that you'd like to function as a clickable next page button */}\n            <button onClick={this.zoomIn} className=\"zoomIn\">\n              <svg\n                aria-hidden=\"true\"\n                focusable=\"false\"\n                data-prefix=\"fas\"\n                data-icon=\"search-plus\"\n                className=\"svg-inline--fa fa-search-plus fa-w-16\"\n                role=\"img\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 512 512\"\n                width=\"100%\"\n                height=\"100%\"\n              >\n                <path\n                  fill=\"grey\"\n                  d=\"M304 192v32c0 6.6-5.4 12-12 12h-56v56c0 6.6-5.4 12-12 12h-32c-6.6 0-12-5.4-12-12v-56h-56c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h56v-56c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v56h56c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z\"\n                ></path>\n              </svg>\n            </button>\n            <div className=\"nextPageButton\" onClick={this.handlePageTurn}>\n              <NextPageButton\n                buttonContent={\n                  <svg\n                    aria-hidden=\"true\"\n                    focusable=\"false\"\n                    data-prefix=\"far\"\n                    data-icon=\"arrow-to-right\"\n                    className=\"svg-inline--fa fa-arrow-to-right fa-w-14\"\n                    role=\"img\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    viewBox=\"0 0 448 512\"\n                    width=\"100%\"\n                    height=\"100%\"\n                  >\n                    <path\n                      fill=\"grey\"\n                      d=\"M200.1 99.5l148.4 148c4.7 4.7 4.7 12.3 0 17l-148.4 148c-4.7 4.7-12.3 4.7-17 0l-19.6-19.6c-4.8-4.8-4.7-12.5.2-17.1l97.1-93.7H12c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h248.8l-97.1-93.7c-4.8-4.7-4.9-12.4-.2-17.1l19.6-19.6c4.7-4.9 12.3-4.9 17-.2zM396 76v360c0 6.6 5.4 12 12 12h28c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12h-28c-6.6 0-12 5.4-12 12z\"\n                    ></path>\n                  </svg>\n                }\n                uri={this.state.uri}\n              />\n            </div>\n          </div>\n        )}\n        {this.state.showMEIInput && (\n          <div>\n            <p>Select your MEI file:</p>\n            <input\n              type=\"text\"\n              onChange={this.onMEIInputChange}\n              placeholder=\"mahler four hands rendition...\"\n              className=\"sizedTextBox\"\n            />\n\n            <input\n              title=\"click to render the linked MEI file\"\n              className=\"MEIButton\"\n              type=\"button\"\n              onClick={this.onSubmitMEI}\n              value=\"render\"\n            />\n          </div>\n        )}\n\n        {/*selector for the component selection*/}\n        <SelectionHandler\n          selectorString={this.state.selectorString}\n          handleStringChange={this.handleStringChange}\n        />\n        {/*annotation submission component*/}\n        <AnnotationSubmitter\n          onAnnoTypeChange={this.onAnnoTypeChange}\n          uri={this.state.uri}\n          submitUri={this.props.submitUri}\n          selection={this.state.selection}\n          onResponse={this.onResponse}\n          onRefreshClick={this.onRefreshClick}\n          annotationType={this.state.annotationType}\n          placeholder={this.state.placeholder}\n          replyAnnotationTarget={this.state.replyAnnotationTarget}\n          buttonContent={this.state.buttonContent}\n          creator={this.props.userId}\n          selectorString={this.state.selectorString}\n          replyAnnotationTargetId={this.state.replyAnnotationTargetId}\n          replyAnnoBody={this.state.replyAnnoBody}\n        />\n        {/*as buttonContent that you'd like to function as a clickable prev page\n        button */}\n\n        <RenditionsPlaylist\n          allEntries={this.state.currentAnnotation}\n          onRefreshClick={this.onRefreshClick}\n        />\n\n        <AnnotationList\n          allEntries={this.state.currentAnnotation}\n          filteringEntries={this.state.annoToDisplay}\n          onAnnoReplyHandler={this.onAnnoReplyHandler}\n          onMediaClick={this.onMediaClick}\n          replyAnnotationTarget={this.state.replyAnnotationTarget}\n          showReplyHandler={this.showReplyHandler}\n          areRepliesVisible={this.state.areRepliesVisible}\n          onRefreshClick={this.onRefreshClick}\n        />\n        <div>\n          <button\n            onClick={this.activateModal}\n            style={{ padding: \"5px\", marginTop: \"5px\", marginLeft: \"5px\" }}\n          >\n            help\n          </button>\n          {modal}\n        </div>\n        <ReactPlayer\n          width=\"80%\"\n          height=\"80%\"\n          ref={this.player}\n          url={this.state.currentMedia}\n          controls={true}\n          onReady={() => {\n            if (this.state.seekTo) {\n              console.log(\"Seeking to: \", this.state.seekTo);\n              this.player.current.seekTo(Math.floor(this.state.seekTo));\n              this.setState({ seekTo: \"\" });\n            }\n          }}\n        />\n      </div>\n    );\n  }\n}\n","import React, { useState } from \"react\";\nimport data from \"@solid/query-ldflex\";\n\nimport {\n  LoginButton,\n  LogoutButton,\n  Value,\n  LoggedIn,\n  LoggedOut,\n  useLDflexValue,\n} from \"@solid/react\";\n\nimport SelectableScoreApp from \"./selectableScoreApp\";\nimport Logo from \"../graphics/top-bar-logo_0_0.png\";\n\nexport default function SolidWrapper(props) {\n  data.context.extend({\n    trompa: \"http://vocab.trompamusic.eu/vocab#\",\n  });\n  const userPOD = useLDflexValue(\"user.storage\");\n  const userId = useLDflexValue(\"user\");\n  const [userInput, setUserInput] = useState(\"private/\");\n  const handleUserInput = (e) => {\n    // eslint-disable-next-line\n    const containerPath = e.target.value\n      ? setUserInput(e.target.value)\n      : \"private/\";\n  };\n  return (\n    <div id=\"authWrapper\">\n      <LoggedOut>\n        <div>\n          <a\n            href=\"https://trompamusic.eu/\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            <img src={Logo} alt=\"trompa logo\" />\n          </a>\n          <p>\n            <LoginButton className=\"loginButton\" popup=\"auth-popup.html\">\n              Log in with Solid\n            </LoginButton>\n          </p>\n        </div>\n      </LoggedOut>\n      <LoggedIn>\n        <a\n          href=\"https://trompamusic.eu/\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <img src={Logo} alt=\"trompa logo\" />\n        </a>\n        <h2>Music scholars annotation tool</h2>\n        <p>\n          You are logged in as{\" \"}\n          <a href={userId} target=\"_blank\" rel=\"noopener noreferrer\">\n            <Value src=\"user.name\" />\n          </a>\n        </p>\n        <p title=\"close the current session and quit the app\">\n          <LogoutButton className=\"logoutButton\">Log out</LogoutButton>\n        </p>\n        <p>Specify the annotation container path inside your Pod:</p>\n        <div>\n          <input\n            title=\"enter your preferred POD folder\"\n            type=\"text\"\n            placeholder=\"private/\"\n            onChange={handleUserInput}\n            className=\"sizedTextBox\"\n          />\n        </div>\n        {typeof userPOD !== \"undefined\" ? (\n          <SelectableScoreApp\n            uri={props.uri}\n            //vrvOptions={props.vrvOptions}\n            podUri={`${userPOD}`}\n            submitUri={`${userPOD}` + userInput}\n            userId={`${userId}`}\n          />\n        ) : (\n          <div>Loading... </div>\n        )}\n      </LoggedIn>\n    </div>\n  );\n}\n","import React, { Component } from \"react\";\nimport { Provider } from \"react-redux\";\nimport { createStore, applyMiddleware } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport ReduxPromise from \"redux-promise\";\n\nimport { reducers } from \"meld-clients-core/lib/reducers\";\nimport SolidWrapper from \"./solidWrapper\";\n\nconst createStoreWithMiddleware = applyMiddleware(\n  thunk,\n  ReduxPromise\n)(createStore);\n\nexport default class SelectableScoreWrapper extends Component {\n  constructor(props) {\n    super(props);\n    // MEI_URI: Can be a full URI, e.g. obtained from the TROMPA Contributor Environment\n    this.state = {\n      MEI_URI: \"Mahler.mei\",\n    };\n    this.store = createStore(reducers);\n  }\n\n  render() {\n    return (\n      <Provider store={createStoreWithMiddleware(reducers)}>\n        <SolidWrapper\n          uri={this.state.MEI_URI}\n          //vrvOptions={this.props.vrvOptions}\n          handleMEIInput={this.handleMEIInput}\n          onChange={this.onChange}\n          value={this.state.value}\n          // zoomIn={this.props.zoomIn}\n          // zoomOut={this.props.zoomOut}\n        />\n      </Provider>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport SelectableScoreWrapper from \"./containers/selectableScoreWrapper\";\n\n// Parameters for SelectableScore component\n// ****************************************\n// MEI_URI: Can be a full URI, e.g. obtained from the TROMPA Contributor Environment\n// const MEI_URI = \"test.mei\";\n// vrvOptions: If not supplied to <SelectableScore>, will default to predefined options\n// var zoom = 45;\n// var pageHeight = 1150;\n// var pageWidth = 1000;\n// var sizedPageWidth = (pageWidth * 100) / zoom;\n// var sizedPageHeight = (pageHeight * 100) / zoom;\n// const vrvOptions = {\n//   scale: zoom,\n//   adjustPageHeight: 1,\n//   pageHeight: sizedPageHeight,\n//   pageWidth: sizedPageWidth,\n//   footer: \"none\",\n//   unit: 6,\n// };\n\n// function onZoomIncrease() {\n//   var step = 10;\n//   vrvOptions.scale = vrvOptions.scale + step;\n//   vrvOptions.pageHeight = (pageHeight * 100) / vrvOptions.scale;\n//   vrvOptions.pageWidth = (pageWidth * 100) / vrvOptions.scale;\n//   console.log(\n//     \"ZOOM INCREASE\",\n//     vrvOptions.scale,\n//     \"page w\",\n//     vrvOptions.pageWidth,\n//     \"page h\",\n//     vrvOptions.pageHeight\n//   );\n// }\n\n// function onZoomDecrease() {\n//   var step = 10;\n//   vrvOptions.scale = vrvOptions.scale - step;\n//   vrvOptions.pageHeight = (pageHeight * 100) / vrvOptions.scale;\n//   vrvOptions.pageWidth = (pageWidth * 100) / vrvOptions.scale;\n//   console.log(\n//     \"ZOOM DECREASE\",\n//     vrvOptions.scale,\n//     \"page w\",\n//     vrvOptions.pageWidth,\n//     \"page h\",\n//     vrvOptions.pageHeight\n//   );\n// }\n\nReactDOM.render(\n  <SelectableScoreWrapper\n  // vrvOptions={vrvOptions}\n  // zoomIn={onZoomIncrease}\n  // zoomOut={onZoomDecrease}\n  />,\n  document.querySelector(\".container\")\n);\n"],"sourceRoot":""}